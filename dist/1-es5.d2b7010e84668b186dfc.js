!function(){function t(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||o(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var u,s=t[Symbol.iterator]();!(r=(u=s.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(a){i=!0,o=a}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||o(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){if(t){if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"I/3d":function(n,o,u){"use strict";u.d(o,"a",function(){return Od});var a=u("fXoL"),c=u("D0XW"),h=u("HDdC"),f=u("Cfvw"),l=u("LRne"),p=u("JX91"),d=u("Zy1z"),v=u("lJxs"),y=u("Kqap"),g=u("/uUt"),b=u("pLZG"),m=u("pxpQ"),w=u("spgP"),I=u("ofXK"),O=u("Jgta"),_=u("zIRd"),E=u("q/0M"),T=u("qOnz"),j=function(t,e){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function A(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var S,N="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},x=x||{},k=N||self;function D(){}function C(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function P(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var L="closure_uid_"+(1e9*Math.random()>>>0),R=0;function V(t,e,n){return t.call.apply(t.bind,arguments)}function U(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function M(t,e,n){return(M=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?V:U).apply(null,arguments)}function q(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function F(){return Date.now()}function z(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function G(){this.j=this.j,this.i=this.i}G.prototype.j=!1,G.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,L)&&t[L]||(t[L]=++R)}(this)},G.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var B=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},H=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function K(t){return Array.prototype.concat.apply([],arguments)}function J(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function W(t){return/^[\s\xa0]*$/.test(t)}var X,Y=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Q(t,e){return-1!=t.indexOf(e)}function $(t,e){return t<e?-1:t>e?1:0}t:{var Z=k.navigator;if(Z){var tt=Z.userAgent;if(tt){X=tt;break t}}X=""}function et(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function nt(t){var e={};for(var n in t)e[n]=t[n];return e}var rt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function it(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<rt.length;o++)n=rt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ot(t){return ot[" "](t),t}ot[" "]=D;var ut,st,at=Q(X,"Opera"),ct=Q(X,"Trident")||Q(X,"MSIE"),ht=Q(X,"Edge"),ft=ht||ct,lt=Q(X,"Gecko")&&!(Q(X.toLowerCase(),"webkit")&&!Q(X,"Edge"))&&!(Q(X,"Trident")||Q(X,"MSIE"))&&!Q(X,"Edge"),pt=Q(X.toLowerCase(),"webkit")&&!Q(X,"Edge");function dt(){var t=k.document;return t?t.documentMode:void 0}t:{var vt="",yt=(st=X,lt?/rv:([^\);]+)(\)|;)/.exec(st):ht?/Edge\/([\d\.]+)/.exec(st):ct?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(st):pt?/WebKit\/(\S+)/.exec(st):at?/(?:Version)[ \/]?(\S+)/.exec(st):void 0);if(yt&&(vt=yt?yt[1]:""),ct){var gt=dt();if(null!=gt&&gt>parseFloat(vt)){ut=String(gt);break t}}ut=vt}var bt={};function mt(t){return function(t,e){var n=bt;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=Y(String(ut)).split("."),r=Y(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var u=n[o]||"",s=r[o]||"";do{if(u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==u[0].length&&0==s[0].length)break;e=$(0==u[1].length?0:parseInt(u[1],10),0==s[1].length?0:parseInt(s[1],10))||$(0==u[2].length,0==s[2].length)||$(u[2],s[2]),u=u[3],s=s[3]}while(0==e)}return 0<=e})}var wt=k.document&&ct&&(dt()||parseInt(ut,10))||void 0,It=!ct||9<=Number(wt),Ot=ct&&!mt("9"),_t=function(){if(!k.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{k.addEventListener("test",D,e),k.removeEventListener("test",D,e)}catch(n){}return t}();function Et(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Tt(t,e){if(Et.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(lt){t:{try{ot(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:jt[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Et.prototype.b=function(){this.defaultPrevented=!0},z(Tt,Et);var jt={2:"touch",3:"pen",4:"mouse"};Tt.prototype.b=function(){Tt.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ot)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var At="closure_listenable_"+(1e6*Math.random()|0),St=0;function Nt(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++St,this.Y=this.Z=!1}function xt(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function kt(t){this.src=t,this.a={},this.b=0}function Dt(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=B(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(xt(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Ct(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}kt.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var u=Ct(t,e,r,i);return-1<u?(e=t[u],n||(e.Z=!1)):((e=new Nt(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Pt="closure_lm_"+(1e6*Math.random()|0),Lt={};function Rt(t,e,n,r,i){if(r&&r.once)return Ut(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Rt(t,e[o],n,r,i);return null}return n=Kt(n),t&&t[At]?t.va(e,n,P(r)?!!r.capture:!!r,i):Vt(t,e,n,!1,r,i)}function Vt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var u=P(i)?!!i.capture:!!i;if(u&&!It)return null;var s=Bt(t);if(s||(t[Pt]=s=new kt(t)),(n=s.add(e,n,r,u,o)).proxy)return n;if(r=function(){var t=Gt,e=It?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)_t||(i=u),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Ft(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Ut(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Ut(t,e[o],n,r,i);return null}return n=Kt(n),t&&t[At]?t.wa(e,n,P(r)?!!r.capture:!!r,i):Vt(t,e,n,!0,r,i)}function Mt(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Mt(t,e[o],n,r,i);else r=P(r)?!!r.capture:!!r,n=Kt(n),t&&t[At]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=Ct(o=t.a[e],n,r,i))&&(xt(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=Bt(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Ct(e,n,r,i)),(n=-1<t?e[t]:null)&&qt(n))}function qt(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[At])Dt(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Ft(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Bt(e))?(Dt(n,t),0==n.b&&(n.src=null,e[Pt]=null)):xt(t)}}}function Ft(t){return t in Lt?Lt[t]:Lt[t]="on"+t}function zt(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&qt(t),n.call(r,e)}function Gt(t,e){if(t.Y)return!0;if(!It){if(!e)t:{e=["window","event"];for(var n=k,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return zt(t,e=new Tt(e,this))}return zt(t,new Tt(e,this))}function Bt(t){return(t=t[Pt])instanceof kt?t:null}var Ht="__closure_events_fn_"+(1e9*Math.random()>>>0);function Kt(t){return"function"==typeof t?t:(t[Ht]||(t[Ht]=function(e){return t.handleEvent(e)}),t[Ht])}function Jt(){G.call(this),this.c=new kt(this),this.J=this,this.C=null}function Wt(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Et(e,t);else if(e instanceof Et)e.target=e.target||t;else{var i=e;it(e=new Et(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var u=e.a=n[o];i=Xt(u,r,!0,e)&&i}if(i=Xt(u=e.a=t,r,!0,e)&&i,i=Xt(u,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Xt(u=e.a=n[o],r,!1,e)&&i}function Xt(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var u=e[o];if(u&&!u.Y&&u.capture==n){var s=u.listener,a=u.ca||u.src;u.Z&&Dt(t.c,u),i=!1!==s.call(a,r)&&i}}return i&&!r.defaultPrevented}z(Jt,G),Jt.prototype[At]=!0,(S=Jt.prototype).addEventListener=function(t,e,n,r){Rt(this,t,e,n,r)},S.removeEventListener=function(t,e,n,r){Mt(this,t,e,n,r)},S.G=function(){if(Jt.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)xt(n[r]);delete e.a[t],e.b--}}this.C=null},S.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},S.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Yt=k.JSON.stringify;function Qt(){this.b=this.a=null}var $t,Zt=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new ee},function(t){t.reset()});function te(){var t=oe,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function ee(){this.next=this.b=this.a=null}function ne(t){k.setTimeout(function(){throw t},0)}function re(t,e){$t||function(){var t=k.Promise.resolve(void 0);$t=function(){t.then(ue)}}(),ie||($t(),ie=!0),oe.add(t,e)}Qt.prototype.add=function(t,e){var n=Zt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},ee.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},ee.prototype.reset=function(){this.next=this.b=this.a=null};var ie=!1,oe=new Qt;function ue(){for(var t;t=te();){try{t.a.call(t.b)}catch(n){ne(n)}var e=Zt;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}ie=!1}function se(t,e){Jt.call(this),this.b=t||1,this.a=e||k,this.f=M(this.Za,this),this.g=F()}function ae(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function ce(t,e,n){if("function"==typeof t)n&&(t=M(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=M(t.handleEvent,t)}return 2147483647<Number(e)?-1:k.setTimeout(t,e||0)}function he(t){t.a=ce(function(){t.a=null,t.c&&(t.c=!1,he(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}z(se,Jt),(S=se.prototype).aa=!1,S.M=null,S.Za=function(){if(this.aa){var t=F()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Wt(this,"tick"),this.aa&&(ae(this),this.start()))}},S.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=F())},S.G=function(){se.X.G.call(this),ae(this),delete this.a};var fe=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}j(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:he(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(k.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(G);function le(t){G.call(this),this.b=t,this.a={}}z(le,G);var pe=[];function de(t,e,n,r){Array.isArray(n)||(n&&(pe[0]=n.toString()),n=pe);for(var i=0;i<n.length;i++){var o=Rt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function ve(t){et(t.a,function(t,e){this.a.hasOwnProperty(e)&&qt(t)},t),t.a={}}function ye(){this.a=!0}function ge(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var u=1;u<i.length;u++)i[u]=""}}}return Yt(n)}catch(s){return e}}(t,n)+(r?" "+r:"")})}le.prototype.G=function(){le.X.G.call(this),ve(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ye.prototype.info=function(){};var be={},me=null;function we(){return me=me||new Jt}function Ie(t){Et.call(this,be.Fa,t)}function Oe(t){var e=we();Wt(e,new Ie(e,t))}function _e(t,e){Et.call(this,be.STAT_EVENT,t),this.stat=e}function Ee(t){var e=we();Wt(e,new _e(e,t))}function Te(t){Et.call(this,be.Ga,t)}function je(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return k.setTimeout(function(){t()},e)}be.Fa="serverreachability",z(Ie,Et),be.STAT_EVENT="statevent",z(_e,Et),be.Ga="timingevent",z(Te,Et);var Ae={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Se={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Ne(){}function xe(){}Ne.prototype.a=null;var ke,De={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Ce(){Et.call(this,"d")}function Pe(){Et.call(this,"c")}function Le(){}function Re(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new le(this),this.P=Ve,this.R=new se(t=ft?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}z(Ce,Et),z(Pe,Et),z(Le,Ne),ke=new Le;var Ve=45e3,Ue={},Me={};function qe(t,e,n){t.H=1,t.i=cn(nn(e)),t.j=n,t.I=!0,Fe(t,null)}function Fe(t,e){t.u=F(),Be(t),t.l=nn(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),On(n.b,"t",r),t.D=0,t.a=yr(t.g,t.g.C?e:null),0<t.O&&(t.F=new fe(M(t.Ca,t,t.a),t.O)),de(t.J,t.a,"readystatechange",t.Xa),e=t.B?nt(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Oe(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var u="",s=o.split("&"),a=0;a<s.length;a++){var c=s[a].split("=");if(1<c.length){var h=c[0];c=c[1];var f=h.split("_");u=2<=f.length&&"type"==f[1]?u+(h+"=")+c+"&":u+(h+"=redacted&")}}else u=null;else u=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+u})}(t.c,t.m,t.l,t.f,t.S,t.j)}function ze(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Ge(t,n);if(i==Me){4==e&&(t.h=4,Ee(14),r=!1),ge(t.c,t.f,null,"[Incomplete Response]");break}if(i==Ue){t.h=4,Ee(15),ge(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}ge(t.c,t.f,i,null),Xe(t,i)}4==e&&0==n.length&&(t.h=1,Ee(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),ar(e),e.F=!0,Ee(11))):(ge(t.c,t.f,n,"[Invalid Chunked Response]"),We(t),Je(t))}function Ge(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Me:(n=Number(e.substring(n,r)),isNaN(n)?Ue:(r+=1)+n>e.length?Me:(e=e.substr(r,n),t.D=r+n,e))}function Be(t){t.T=F()+t.P,He(t,t.P)}function He(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=je(M(t.Va,t),e)}function Ke(t){t.o&&(k.clearTimeout(t.o),t.o=null)}function Je(t){0==t.g.v||t.A||fr(t.g,t)}function We(t){Ke(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,ae(t.R),ve(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Xe(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Nn(n.b,t)))if(n.I=t.N,!t.C&&Nn(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(np){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;hr(n),Zn(n)}sr(n),Ee(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=je(M(n.Sa,n),6e3));if(1>=Sn(n.b)&&n.ea){try{n.ea()}catch(np){}n.ea=void 0}}else pr(n,11)}else if((t.C||n.a==t)&&hr(n),!W(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var u=i[4];null!=u&&(n.pa=u,n.c.info("SVER="+n.pa));var s=i[5];if(null!=s&&"number"==typeof s&&0<s){var a=1.5*s;n.D=a,n.c.info("backChannelRequestTimeoutMs_="+a)}a=n;var c=t.a;if(c){var h=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var f=a.b;!f.a&&(Q(h,"spdy")||Q(h,"quic")||Q(h,"h2"))&&(f.f=f.g,f.a=new Set,f.b&&(xn(f,f.b),f.b=null))}if(a.A){var l=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;l&&(a.na=l,an(a.B,a.A,l))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=F()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((a=n).la=vr(a,a.C?a.ga:null,a.fa),p.C){kn(a.b,p);var d=p,v=a.D;v&&d.setTimeout(v),d.o&&(Ke(d),Be(d)),a.a=p}else ur(a);0<n.g.length&&nr(n)}else"stop"!=i[0]&&"close"!=i[0]||pr(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?pr(n,7):$n(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Oe(4)}catch(np){}}function Ye(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(C(t)||"string"==typeof t)H(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(C(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(C(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Qe(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Qe)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function $e(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Ze(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Ze(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Ze(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(S=Re.prototype).setTimeout=function(t){this.P=t},S.Xa=function(t){t=t.target;var e=this.F;e&&3==Wn(t)?e.f():this.Ca(t)},S.Ca=function(t){try{if(t==this.a)t:{var e=Wn(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!ft&&!this.a.$())){this.A||4!=e||7==n||Oe(8==n||0>=r?3:2),Ke(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,u){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+u})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var u,s=this.a;if((u=s.a?s.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(u)){var a=u;break e}}a=null}if(!a){this.b=!1,this.h=3,Ee(12),We(this),Je(this);break t}ge(this.c,this.f,a,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Xe(this,a)}this.I?(ze(this,e,o),ft&&this.b&&3==e&&(de(this.J,this.R,"tick",this.Wa),this.R.start())):(ge(this.c,this.f,o,null),Xe(this,o)),4==e&&We(this),this.b&&!this.A&&(4==e?fr(this.g,this):(this.b=!1,Be(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Ee(12)):(this.h=0,Ee(13)),We(this),Je(this)}}}catch(c){}},S.Wa=function(){if(this.a){var t=Wn(this.a),e=this.a.$();this.D<e.length&&(Ke(this),ze(this,t,e),this.b&&4!=t&&Be(this))}},S.cancel=function(){this.A=!0,We(this)},S.Va=function(){this.o=null;var t=F();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(Oe(3),Ee(17)),We(this),this.h=2,Je(this)):He(this,this.T-t)},(S=Qe.prototype).K=function(){$e(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},S.L=function(){return $e(this),this.a.concat()},S.get=function(t,e){return Ze(this.b,t)?this.b[t]:e},S.set=function(t,e){Ze(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},S.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var tn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function en(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof en){this.a=void 0!==e?e:t.a,rn(this,t.f),this.j=t.j,on(this,t.c),un(this,t.h),this.g=t.g,e=t.b;var n=new bn;n.c=e.c,e.a&&(n.a=new Qe(e.a),n.b=e.b),sn(this,n),this.i=t.i}else t&&(n=String(t).match(tn))?(this.a=!!e,rn(this,n[1]||"",!0),this.j=hn(n[2]||""),on(this,n[3]||"",!0),un(this,n[4]),this.g=hn(n[5]||"",!0),sn(this,n[6]||"",!0),this.i=hn(n[7]||"")):(this.a=!!e,this.b=new bn(null,this.a))}function nn(t){return new en(t)}function rn(t,e,n){t.f=n?hn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function on(t,e,n){t.c=n?hn(e,!0):e}function un(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function sn(t,e,n){e instanceof bn?(t.b=e,function(t,e){e&&!t.f&&(mn(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(wn(this,e),On(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=fn(e,yn)),t.b=new bn(e,t.a))}function an(t,e,n){t.b.set(e,n)}function cn(t){return an(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^F()).toString(36)),t}function hn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function fn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,ln),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ln(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}en.prototype.toString=function(){var t=[],e=this.f;e&&t.push(fn(e,pn,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(fn(e,pn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(fn(n,"/"==n.charAt(0)?vn:dn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",fn(n,gn)),t.join("")};var pn=/[#\/\?@]/g,dn=/[#\?:]/g,vn=/[#\?]/g,yn=/[#\?@]/g,gn=/#/g;function bn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function mn(t){t.a||(t.a=new Qe,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function wn(t,e){mn(t),e=_n(t,e),Ze(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Ze((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&$e(t)))}function In(t,e){return mn(t),e=_n(t,e),Ze(t.a.b,e)}function On(t,e,n){wn(t,e),0<n.length&&(t.c=null,t.a.set(_n(t,e),J(n)),t.b+=n.length)}function _n(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(S=bn.prototype).add=function(t,e){mn(this),this.c=null,t=_n(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},S.forEach=function(t,e){mn(this),this.a.forEach(function(n,r){H(n,function(n){t.call(e,n,r,this)},this)},this)},S.L=function(){mn(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},S.K=function(t){mn(this);var e=[];if("string"==typeof t)In(this,t)&&(e=K(e,this.a.get(_n(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=K(e,t[n])}return e},S.set=function(t,e){return mn(this),this.c=null,In(this,t=_n(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},S.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},S.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var u=i;""!==r[o]&&(u+="="+encodeURIComponent(String(r[o]))),t.push(u)}}return this.c=t.join("&")};var En=function(t,e){this.b=t,this.a=e};function Tn(t){this.g=t||jn,t=k.PerformanceNavigationTiming?0<(t=k.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(k.ia&&k.ia.ya&&k.ia.ya()&&k.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var jn=10;function An(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Sn(t){return t.b?1:t.a?t.a.size:0}function Nn(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function xn(t,e){t.a?t.a.add(e):t.b=e}function kn(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Dn(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=A(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return J(t.c)}function Cn(){}function Pn(){this.a=new Cn}function Ln(t,e,n){var r=n||"";try{Ye(t,function(t,n){var i=t;P(t)&&(i=Yt(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(Gp){throw e.push(r+"type="+encodeURIComponent("_badmap")),Gp}}function Rn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}Tn.prototype.cancel=function(){var t,e;if(this.c=Dn(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=A(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Cn.prototype.stringify=function(t){return k.JSON.stringify(t,void 0)},Cn.prototype.parse=function(t){return k.JSON.parse(t,void 0)};var Vn=k.JSON.parse;function Un(t){Jt.call(this),this.headers=new Qe,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Mn,this.D=this.F=!1}z(Un,Jt);var Mn="",qn=/^https?$/i,Fn=["POST","PUT"];function zn(t){return"content-type"==t.toLowerCase()}function Gn(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Bn(t),Kn(t)}function Bn(t){t.u||(t.u=!0,Wt(t,"complete"),Wt(t,"error"))}function Hn(t){if(t.b&&void 0!==x&&(!t.s[1]||4!=Wn(t)||2!=t.W()))if(t.l&&4==Wn(t))ce(t.za,0,t);else if(Wt(t,"readystatechange"),4==Wn(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(tn)[1]||null;if(!o&&k.self&&k.self.location){var u=k.self.location.protocol;o=u.substr(0,u.length-1)}i=!qn.test(o?o.toLowerCase():"")}e=i}if(e)Wt(t,"complete"),Wt(t,"success");else{t.h=6;try{var s=2<Wn(t)?t.a.statusText:""}catch(n){s=""}t.f=s+" ["+t.W()+"]",Bn(t)}}finally{Kn(t)}}}function Kn(t,e){if(t.a){Jn(t);var n=t.a,r=t.s[0]?D:null;t.a=null,t.s=null,e||Wt(t,"ready");try{n.onreadystatechange=r}catch(Gp){}}}function Jn(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(k.clearTimeout(t.m),t.m=null)}function Wn(t){return t.a?t.a.readyState:0}function Xn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return et(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):an(t,e,n))}function Yn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Qn(t){this.pa=0,this.g=[],this.c=new ye,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Yn("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Yn("baseRetryDelayMs",5e3,t),this.Ra=Yn("retryDelaySeedMs",1e4,t),this.Ma=Yn("forwardChannelMaxRetries",2,t),this.ma=Yn("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Tn(t&&t.concurrentRequestLimit),this.ka=new Pn,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function $n(t){if(tr(t),3==t.v){var e=t.R++,n=nn(t.B);an(n,"SID",t.J),an(n,"RID",e),an(n,"TYPE","terminate"),ir(t,n),(e=new Re(t,t.c,e,void 0)).H=2,e.i=cn(nn(n)),n=!1,k.navigator&&k.navigator.sendBeacon&&(n=k.navigator.sendBeacon(e.i.toString(),"")),!n&&k.Image&&((new Image).src=e.i,n=!0),n||(e.a=yr(e.g,null),e.a.ba(e.i)),e.u=F(),Be(e)}dr(t)}function Zn(t){t.a&&(ar(t),t.a.cancel(),t.a=null)}function tr(t){Zn(t),t.j&&(k.clearTimeout(t.j),t.j=null),hr(t),t.b.cancel(),t.h&&("number"==typeof t.h&&k.clearTimeout(t.h),t.h=null)}function er(t,e){t.g.push(new En(t.Oa++,e)),3==t.v&&nr(t)}function nr(t){An(t.b)||t.h||(t.h=!0,re(t.Ba,t),t.u=0)}function rr(t,e){var n;n=e?e.f:t.R++;var r=nn(t.B);an(r,"SID",t.J),an(r,"RID",n),an(r,"AID",t.P),ir(t,r),t.i&&t.l&&Xn(r,t.i,t.l),n=new Re(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=or(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),xn(t.b,n),qe(n,r,e)}function ir(t,e){t.f&&Ye({},function(t,n){an(e,n,t)})}function or(t,e,n){n=Math.min(t.g.length,n);var r=t.f?M(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var u=["count="+n];-1==o?0<n?u.push("ofs="+(o=i[0].b)):o=0:u.push("ofs="+o);for(var s=!0,a=0;a<n;a++){var c=i[a].b,h=i[a].a;if(0>(c-=o))o=Math.max(0,i[a].b-100),s=!1;else try{Ln(h,u,"req"+c+"_")}catch($r){r&&r(h)}}if(s){r=u.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function ur(t){t.a||t.j||(t.T=1,re(t.Aa,t),t.o=0)}function sr(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=je(M(t.Aa,t),lr(t,t.o)),t.o++,0))}function ar(t){null!=t.s&&(k.clearTimeout(t.s),t.s=null)}function cr(t){t.a=new Re(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=nn(t.la);an(e,"RID","rpc"),an(e,"SID",t.J),an(e,"CI",t.H?"0":"1"),an(e,"AID",t.P),ir(t,e),an(e,"TYPE","xmlhttp"),t.i&&t.l&&Xn(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=cn(nn(e)),n.j=null,n.I=!0,Fe(n,t)}function hr(t){null!=t.m&&(k.clearTimeout(t.m),t.m=null)}function fr(t,e){var n=null;if(t.a==e){hr(t),ar(t),t.a=null;var r=2}else{if(!Nn(t.b,e))return;n=e.s,kn(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=F()-e.u;var i=t.u;Wt(r=we(),new Te(r,n,e,i)),nr(t)}else ur(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Sn(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=je(M(t.Ba,t,e),lr(t,t.u)),t.u++,0)))}(t,e)||2==r&&sr(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:pr(t,5);break;case 4:pr(t,10);break;case 3:pr(t,6);break;default:pr(t,2)}}function lr(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function pr(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=M(t.Ya,t);n||(n=new en("//www.google.com/images/cleardot.gif"),k.location&&"http"==k.location.protocol||rn(n,"https"),cn(n)),function(t,e){var n=new ye;if(k.Image){var r=new Image;r.onload=q(Rn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=q(Rn,n,r,"TestLoadImage: error",!1,e),r.onabort=q(Rn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=q(Rn,n,r,"TestLoadImage: timeout",!1,e),k.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Ee(2);t.v=0,t.f&&t.f.ra(e),dr(t),tr(t)}function dr(t){t.v=0,t.I=-1,t.f&&(0==Dn(t.b).length&&0==t.g.length||(t.b.c.length=0,J(t.g),t.g.length=0),t.f.qa())}function vr(t,e,n){var r=function(t){return t instanceof en?nn(t):new en(t,void 0)}(n);if(""!=r.c)e&&on(r,e+"."+r.c),un(r,r.h);else{var i=k.location;r=function(t,e,n,r){var i=new en(null,void 0);return t&&rn(i,t),e&&on(i,e),n&&un(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&et(t.V,function(t,e){an(r,e,t)}),n=t.na,(e=t.A)&&n&&an(r,e,n),an(r,"VER",t.ha),ir(t,r),r}function yr(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Un(t.Na)).F=t.C,e}function gr(){}function br(){if(ct&&!(10<=Number(wt)))throw Error("Environmental error: no available transport.")}function mr(t,e){Jt.call(this),this.a=new Qn(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!W(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!W(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Or(this)}function wr(t){Ce.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Ir(){Pe.call(this),this.status=1}function Or(t){this.a=t}(S=Un.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:ke),this.a.onreadystatechange=M(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void Gn(this,o)}t=n||"";var i=new Qe(this.headers);r&&Ye(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=zn,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=k.FormData&&t instanceof k.FormData,!(0<=B(Fn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Jn(this),0<this.o&&((this.D=function(t){return ct&&mt(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=M(this.xa,this)):this.m=ce(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){Gn(this,o)}},S.xa=function(){void 0!==x&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Wt(this,"timeout"),this.abort(8))},S.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Wt(this,"complete"),Wt(this,"abort"),Kn(this))},S.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Kn(this,!0)),Un.X.G.call(this)},S.za=function(){this.j||(this.A||this.l||this.g?Hn(this):this.Ua())},S.Ua=function(){Hn(this)},S.W=function(){try{return 2<Wn(this)?this.a.status:-1}catch(st){return-1}},S.$=function(){try{return this.a?this.a.responseText:""}catch(st){return""}},S.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Vn(e)}},S.ua=function(){return this.h},S.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(S=Qn.prototype).ha=8,S.v=1,S.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Re(this,this.c,t,void 0),r=this.l;if(this.O&&(r?it(r=nt(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=or(this,n,e),an(i=nn(this.B),"RID",t),an(i,"CVER",22),this.A&&an(i,"X-HTTP-Session-Id",this.A),ir(this,i),this.i&&r&&Xn(i,this.i,r),xn(this.b,n),this.Ia&&an(i,"TYPE","init"),this.da?(an(i,"$req",e),an(i,"SID","null"),n.U=!0,qe(n,i,null)):qe(n,i,e),this.v=2}}else 3==this.v&&(t?rr(this,t):0==this.g.length||An(this.b)||rr(this))},S.Aa=function(){if(this.j=null,cr(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=je(M(this.Ta,this),t)}},S.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Ee(10),Zn(this),cr(this))},S.Sa=function(){null!=this.m&&(this.m=null,Zn(this),sr(this),Ee(19))},S.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Ee(2)):(this.c.info("Failed to ping google.com"),Ee(1))},(S=gr.prototype).ta=function(){},S.sa=function(){},S.ra=function(){},S.qa=function(){},S.Ja=function(){},br.prototype.a=function(t,e){return new mr(t,e)},z(mr,Jt),mr.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Ee(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=vr(t,null,t.fa),nr(t)},mr.prototype.close=function(){$n(this.a)},mr.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,er(this.a,e)}else this.l?((e={}).__data__=Yt(t),er(this.a,e)):er(this.a,t)},mr.prototype.G=function(){this.a.f=null,delete this.f,$n(this.a),delete this.a,mr.X.G.call(this)},z(wr,Ce),z(Ir,Pe),z(Or,gr),Or.prototype.ta=function(){Wt(this.a,"a")},Or.prototype.sa=function(t){Wt(this.a,new wr(t))},Or.prototype.ra=function(t){Wt(this.a,new Ir(t))},Or.prototype.qa=function(){Wt(this.a,"b")},br.prototype.createWebChannel=br.prototype.a,mr.prototype.send=mr.prototype.h,mr.prototype.open=mr.prototype.g,mr.prototype.close=mr.prototype.close,Ae.NO_ERROR=0,Ae.TIMEOUT=8,Ae.HTTP_ERROR=6,Se.COMPLETE="complete",xe.EventType=De,De.OPEN="a",De.CLOSE="b",De.ERROR="c",De.MESSAGE="d",Jt.prototype.listen=Jt.prototype.va,Un.prototype.listenOnce=Un.prototype.wa,Un.prototype.getLastError=Un.prototype.Qa,Un.prototype.getLastErrorCode=Un.prototype.ua,Un.prototype.getStatus=Un.prototype.W,Un.prototype.getResponseJson=Un.prototype.Pa,Un.prototype.getResponseText=Un.prototype.$,Un.prototype.send=Un.prototype.ba;var _r=Ae,Er=Se,Tr=be,jr=xe,Ar=Un,Sr=u("30Go"),Nr=new E.b("@firebase/firestore");function xr(){return Nr.logLevel}function kr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Nr.logLevel<=E.a.DEBUG){var r=e.map(Pr);Nr.debug.apply(Nr,Object(Sr.g)(["Firestore (8.2.2): "+t],r))}}function Dr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Nr.logLevel<=E.a.ERROR){var r=e.map(Pr);Nr.error.apply(Nr,Object(Sr.g)(["Firestore (8.2.2): "+t],r))}}function Cr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Nr.logLevel<=E.a.WARN){var r=e.map(Pr);Nr.warn.apply(Nr,Object(Sr.g)(["Firestore (8.2.2): "+t],r))}}function Pr(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(Gp){return t}}function Lr(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.2.2) INTERNAL ASSERTION FAILED: "+t;throw Dr(e),new Error(e)}function Rr(t,e){t||Lr()}function Vr(t,e){return t}function Ur(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Mr=function(){function t(){}return t.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Ur(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function qr(t,e){return t<e?-1:t>e?1:0}function Fr(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function zr(t){return t+"\0"}var Gr=function(){function t(t){this.i=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.i)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.i)},t.prototype.o=function(){return 2*this.i.length},t.prototype.u=function(t){return qr(this.i,t.i)},t.prototype.isEqual=function(t){return this.i===t.i},t}();Gr.h=new Gr("");var Br={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Hr=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(Sr.c)(e,t),e}(Error),Kr=function(){function t(t){this.l=t}return t.fromBase64String=function(e){try{return new t(Gr.fromBase64String(e))}catch(e){throw new Hr(Br.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Gr.fromUint8Array(e))},t.prototype.toBase64=function(){return this.l.toBase64()},t.prototype.toUint8Array=function(){return this.l.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.l.isEqual(t.l)},t}(),Jr=function(t){this._=t};function Wr(){if("undefined"==typeof Uint8Array)throw new Hr(Br.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Xr(){if("undefined"==typeof atob)throw new Hr(Br.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Yr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Sr.c)(e,t),e.fromBase64String=function(t){return Xr(),new e(Kr.fromBase64String(t))},e.fromUint8Array=function(t){return Wr(),new e(Kr.fromUint8Array(t))},e.prototype.toBase64=function(){return Xr(),this._.toBase64()},e.prototype.toUint8Array=function(){return Wr(),this._.toUint8Array()},e.prototype.isEqual=function(t){return this._.isEqual(t._)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(Jr),Qr=function(t,e,n,r,i,o){this.T=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.I=o},$r=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"m",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Zr=function(){function t(t){this.uid=t}return t.prototype.A=function(){return null!=this.uid},t.prototype.R=function(){return this.A()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();Zr.UNAUTHENTICATED=new Zr(null),Zr.P=new Zr("google-credentials-uid"),Zr.g=new Zr("first-party-uid");var ti=function(t,e){this.user=e,this.type="OAuth",this.V={},this.V.Authorization="Bearer "+t},ei=function(){function t(){this.p=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.v=function(){},t.prototype.S=function(t){this.p=t,t(Zr.UNAUTHENTICATED)},t.prototype.D=function(){this.p=null},t}(),ni=function(){function t(t){var e=this;this.C=null,this.currentUser=Zr.UNAUTHENTICATED,this.N=!1,this.O=0,this.p=null,this.forceRefresh=!1,this.C=function(){e.O++,e.currentUser=e.F(),e.N=!0,e.p&&e.p(e.currentUser)},this.O=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.C):(this.C(null),t.get().then(function(t){e.auth=t,e.C&&e.auth.addAuthTokenListener(e.C)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.O,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.O!==e?(kr("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Rr("string"==typeof n.accessToken),new ti(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.v=function(){this.forceRefresh=!0},t.prototype.S=function(t){this.p=t,this.N&&t(this.currentUser)},t.prototype.D=function(){this.auth&&this.auth.removeAuthTokenListener(this.C),this.C=null,this.p=null},t.prototype.F=function(){var t=this.auth&&this.auth.getUid();return Rr(null===t||"string"==typeof t),new Zr(t)},t}(),ri=function(){function t(t,e){this.k=t,this.M=e,this.type="FirstParty",this.user=Zr.g}return Object.defineProperty(t.prototype,"V",{get:function(){var t={"X-Goog-AuthUser":this.M},e=this.k.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),ii=function(){function t(t,e){this.k=t,this.M=e}return t.prototype.getToken=function(){return Promise.resolve(new ri(this.k,this.M))},t.prototype.S=function(t){t(Zr.g)},t.prototype.D=function(){},t.prototype.v=function(){},t}(),oi=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.L=function(t){return n.$(t)},this.B=function(t){return e.q(t)})}return t.prototype.$=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.B&&this.B(t),t},t}();oi.U=-1;var ui=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Hr(Br.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Hr(Br.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Hr(Br.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Hr(Br.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.K=function(t){return this.seconds===t.seconds?qr(this.nanoseconds,t.nanoseconds):qr(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),si=function(){function t(t){this.timestamp=t}return t.j=function(e){return new t(e)},t.min=function(){return new t(new ui(0,0))},t.prototype.u=function(t){return this.timestamp.K(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.W=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.G=function(){return this.timestamp},t}(),ai=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Lr(),void 0===n?n=t.length-e:n>t.length-e&&Lr(),this.segments=t,this.offset=e,this.H=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.H},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.J(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.Y(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.X=function(t){return this.Y(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.Z=function(){return this.Y(this.segments,this.offset,this.length-1)},t.prototype.tt=function(){return this.segments[this.offset]},t.prototype.et=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.nt=function(){return 0===this.length},t.prototype.st=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.it=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.rt=function(){return this.segments.slice(this.offset,this.limit())},t.J=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),ci=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Sr.c)(e,t),e.prototype.Y=function(t,n,r){return new e(t,n,r)},e.prototype.ot=function(){return this.rt().join("/")},e.prototype.toString=function(){return this.ot()},e.ct=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var u=o[i];if(u.indexOf("//")>=0)throw new Hr(Br.INVALID_ARGUMENT,"Invalid segment ("+u+"). Paths must not contain // in them.");r.push.apply(r,u.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.at=function(){return new e([])},e}(ai),hi=/^[_a-zA-Z][_a-zA-Z0-9]*$/,fi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Sr.c)(e,t),e.prototype.Y=function(t,n,r){return new e(t,n,r)},e.ut=function(t){return hi.test(t)},e.prototype.ot=function(){return this.rt().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.ut(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.ot()},e.prototype.ht=function(){return 1===this.length&&"__name__"===this.get(0)},e.lt=function(){return new e(["__name__"])},e._t=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Hr(Br.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},u=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new Hr(Br.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[i+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new Hr(Br.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=a,i+=2}else"`"===s?(u=!u,i++):"."!==s||u?(r+=s,i++):(o(),i++)}if(o(),u)throw new Hr(Br.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.at=function(){return new e([])},e}(ai),li=function(){function t(t){this.path=t}return t.ft=function(e){return new t(ci.ct(e))},t.dt=function(e){return new t(ci.ct(e).X(5))},t.prototype.wt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===ci.J(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.J=function(t,e){return ci.J(t.path,e.path)},t.Et=function(t){return t.length%2==0},t.Tt=function(e){return new t(new ci(e.slice()))},t}();function pi(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function di(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function vi(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var yi=function(){function t(t){this.fields=t,t.sort(fi.J)}return t.prototype.It=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].st(t))return!0;return!1},t.prototype.isEqual=function(t){return Fr(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),gi=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bi(t){if(Rr(!!t),"string"==typeof t){var e=0,n=gi.exec(t);if(Rr(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:mi(t.seconds),nanos:mi(t.nanos)}}function mi(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function wi(t){return"string"==typeof t?Gr.fromBase64String(t):Gr.fromUint8Array(t)}function Ii(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Oi(t){var e=t.mapValue.fields.__previous_value__;return Ii(e)?Oi(e):e}function _i(t){var e=bi(t.mapValue.fields.__local_write_time__.timestampValue);return new ui(e.seconds,e.nanos)}function Ei(t){return null==t}function Ti(t){return 0===t&&1/t==-1/0}function ji(t){return"number"==typeof t&&Number.isInteger(t)&&!Ti(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function Ai(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ii(t)?4:10:Lr()}function Si(t,e){var n=Ai(t);if(n!==Ai(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return _i(t).isEqual(_i(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=bi(t.timestampValue),r=bi(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return wi(t.bytesValue).isEqual(wi(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return mi(t.geoPointValue.latitude)===mi(e.geoPointValue.latitude)&&mi(t.geoPointValue.longitude)===mi(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return mi(t.integerValue)===mi(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=mi(t.doubleValue),r=mi(e.doubleValue);return n===r?Ti(n)===Ti(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Fr(t.arrayValue.values||[],e.arrayValue.values||[],Si);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(pi(n)!==pi(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Si(n[i],r[i])))return!1;return!0}(t,e);default:return Lr()}}function Ni(t,e){return void 0!==(t.values||[]).find(function(t){return Si(t,e)})}function xi(t,e){var n=Ai(t),r=Ai(e);if(n!==r)return qr(n,r);switch(n){case 0:return 0;case 1:return qr(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=mi(t.integerValue||t.doubleValue),r=mi(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return ki(t.timestampValue,e.timestampValue);case 4:return ki(_i(t),_i(e));case 5:return qr(t.stringValue,e.stringValue);case 6:return function(t,e){var n=wi(t),r=wi(e);return n.u(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=qr(n[i],r[i]);if(0!==o)return o}return qr(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=qr(mi(t.latitude),mi(e.latitude));return 0!==n?n:qr(mi(t.longitude),mi(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=xi(n[i],r[i]);if(o)return o}return qr(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var u=0;u<r.length&&u<o.length;++u){var s=qr(r[u],o[u]);if(0!==s)return s;var a=xi(n[r[u]],i[o[u]]);if(0!==a)return a}return qr(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Lr()}}function ki(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return qr(t,e);var n=bi(t),r=bi(e),i=qr(n.seconds,r.seconds);return 0!==i?i:qr(n.nanos,r.nanos)}function Di(t){return Ci(t)}function Ci(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=bi(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?wi(t.bytesValue).toBase64():"referenceValue"in t?li.dt(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Ci(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Ci(t.fields[o])}return e+"}"}(t.mapValue):Lr();var e}function Pi(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.ot()}}function Li(t){return!!t&&"integerValue"in t}function Ri(t){return!!t&&"arrayValue"in t}function Vi(t){return!!t&&"nullValue"in t}function Ui(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Mi(t){return!!t&&"mapValue"in t}var qi=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.nt())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Mi(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.et()])||null},t.prototype.isEqual=function(t){return Si(this.proto,t.proto)},t}(),Fi=function(){function t(t){void 0===t&&(t=qi.empty()),this.At=t,this.Rt=new Map}return t.prototype.set=function(t,e){return this.Pt(t,e),this},t.prototype.delete=function(t){return this.Pt(t,null),this},t.prototype.Pt=function(t,e){for(var n=this.Rt,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Ai(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.et(),e)},t.prototype.yt=function(){var t=this.gt(fi.at(),this.Rt);return null!=t?new qi(t):this.At},t.prototype.gt=function(t,e){var n=this,r=!1,i=this.At.field(t),o=Mi(i)?Object.assign({},i.mapValue.fields):{};return e.forEach(function(e,i){if(e instanceof Map){var u=n.gt(t.child(i),e);null!=u&&(o[i]=u,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)}),r?{mapValue:{fields:o}}:null},t}();function zi(t){var e=[];return di(t.fields||{},function(t,n){var r=new fi([t]);if(Mi(n)){var i=zi(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,u=i;o<u.length;o++)e.push(r.child(u[o]))}else e.push(r)}),new yi(e)}var Gi=function(t,e){this.key=t,this.version=e},Bi=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).Vt=r,o.bt=!!i.bt,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Object(Sr.c)(e,t),e.prototype.field=function(t){return this.Vt.field(t)},e.prototype.data=function(){return this.Vt},e.prototype.vt=function(){return this.Vt.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.bt===t.bt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.Vt.isEqual(t.Vt)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.Vt.toString()+", {hasLocalMutations: "+this.bt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.bt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(Gi),Hi=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Object(Sr.c)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Gi),Ki=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Sr.c)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Gi),Ji=function(t,e,n,r,i,o,u){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===u&&(u=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=u,this.St=null};function Wi(t,e,n,r,i,o,u){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===u&&(u=null),new Ji(t,e,n,r,i,o,u)}function Xi(t){var e=Vr(t);if(null===e.St){var n=e.path.ot();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.ot()+t.op.toString()+Di(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.ot()+t.dir}(t)}).join(","),Ei(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=ao(e.startAt)),e.endAt&&(n+="|ub:",n+=ao(e.endAt)),e.St=n}return e.St}function Yi(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!ho(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!Si(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!lo(t.startAt,e.startAt)&&lo(t.endAt,e.endAt)}function Qi(t){return li.Et(t.path)&&null===t.collectionGroup&&0===t.filters.length}var $i=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(Sr.c)(e,t),e.create=function(t,n,r){return t.ht()?"in"===n||"not-in"===n?this.Dt(t,n,r):new Zi(t,n,r):"array-contains"===n?new ro(t,r):"in"===n?new io(t,r):"not-in"===n?new oo(t,r):"array-contains-any"===n?new uo(t,r):new e(t,n,r)},e.Dt=function(t,e,n){return"in"===e?new to(t,n):new eo(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.Ct(xi(e,this.value)):null!==e&&Ai(this.value)===Ai(e)&&this.Ct(xi(e,this.value))},e.prototype.Ct=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Lr()}},e.prototype.xt=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Zi=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=li.dt(r.referenceValue),i}return Object(Sr.c)(e,t),e.prototype.matches=function(t){var e=li.J(t.key,this.key);return this.Ct(e)},e}($i),to=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=no(0,n),r}return Object(Sr.c)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}($i),eo=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=no(0,n),r}return Object(Sr.c)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}($i);function no(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return li.dt(t.referenceValue)})}var ro=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(Sr.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return Ri(e)&&Ni(e.arrayValue,this.value)},e}($i),io=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(Sr.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Ni(this.value.arrayValue,e)},e}($i),oo=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(Sr.c)(e,t),e.prototype.matches=function(t){if(Ni(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!Ni(this.value.arrayValue,e)},e}($i),uo=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(Sr.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!Ri(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return Ni(e.value.arrayValue,t)})},e}($i),so=function(t,e){this.position=t,this.before=e};function ao(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return Di(t)}).join(",")}var co=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function ho(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function fo(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],u=t.position[i];if(r=o.field.ht()?li.J(li.dt(u.referenceValue),n.key):xi(u,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function lo(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Si(t.position[n],e.position[n]))return!1;return!0}var po=function(t,e,n,r,i,o,u,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===u&&(u=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.Nt=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=u,this.endAt=s,this.Ot=null,this.Ft=null};function vo(t,e,n,r,i,o,u,s){return new po(t,e,n,r,i,o,u,s)}function yo(t){return new po(t)}function go(t){return!Ei(t.limit)&&"F"===t.limitType}function bo(t){return!Ei(t.limit)&&"L"===t.limitType}function mo(t){return t.Nt.length>0?t.Nt[0].field:null}function wo(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.xt())return r.field}return null}function Io(t){return null!==t.collectionGroup}function Oo(t){var e=Vr(t);if(null===e.Ot){e.Ot=[];var n=wo(e),r=mo(e);if(null!==n&&null===r)n.ht()||e.Ot.push(new co(n)),e.Ot.push(new co(fi.lt(),"asc"));else{for(var i=!1,o=0,u=e.Nt;o<u.length;o++){var s=u[o];e.Ot.push(s),s.field.ht()&&(i=!0)}if(!i){var a=e.Nt.length>0?e.Nt[e.Nt.length-1].dir:"asc";e.Ot.push(new co(fi.lt(),a))}}}return e.Ot}function _o(t){var e=Vr(t);if(!e.Ft)if("F"===e.limitType)e.Ft=Wi(e.path,e.collectionGroup,Oo(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Oo(e);r<i.length;r++){var o=i[r];n.push(new co(o.field,"desc"===o.dir?"asc":"desc"))}var u=e.endAt?new so(e.endAt.position,!e.endAt.before):null,s=e.startAt?new so(e.startAt.position,!e.startAt.before):null;e.Ft=Wi(e.path,e.collectionGroup,n,e.filters,e.limit,u,s)}return e.Ft}function Eo(t,e,n){return new po(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function To(t,e){return Yi(_o(t),_o(e))&&t.limitType===e.limitType}function jo(t){return Xi(_o(t))+"|lt:"+t.limitType}function Ao(t){return"Query(target="+function(t){var e=t.path.ot();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.ot()+" "+e.op+" "+Di(e.value);var e}).join(", ")+"]"),Ei(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.ot()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+ao(t.startAt)),t.endAt&&(e+=", endAt: "+ao(t.endAt)),"Target("+e+")"}(_o(t))+"; limitType="+t.limitType+")"}function So(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.wt(t.collectionGroup)&&t.path.st(n):li.Et(t.path)?t.path.isEqual(n):t.path.it(n)}(t,e)&&function(t,e){for(var n=0,r=t.Nt;n<r.length;n++){var i=r[n];if(!i.field.ht()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!fo(t.startAt,Oo(t),e)||t.endAt&&fo(t.endAt,Oo(t),e))}(t,e)}function No(t){return function(e,n){for(var r=!1,i=0,o=Oo(t);i<o.length;i++){var u=o[i],s=xo(u,e,n);if(0!==s)return s;r=r||u.field.ht()}return 0}}function xo(t,e,n){var r=t.field.ht()?li.J(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?xi(r,i):Lr()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Lr()}}var ko=function(){function t(t,e,n,r,i,o,u){void 0===i&&(i=si.min()),void 0===o&&(o=si.min()),void 0===u&&(u=Gr.h),this.target=t,this.targetId=e,this.kt=n,this.sequenceNumber=r,this.Mt=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return t.prototype.Lt=function(e){return new t(this.target,this.targetId,this.kt,e,this.Mt,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.$t=function(e,n){return new t(this.target,this.targetId,this.kt,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Bt=function(e){return new t(this.target,this.targetId,this.kt,this.sequenceNumber,this.Mt,e,this.resumeToken)},t}();function Do(t,e){if(t.qt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ti(e)?"-0":e}}function Co(t){return{integerValue:""+t}}function Po(t,e){return ji(e)?Co(e):Do(t,e)}var Lo=function(){this.Ut=void 0};function Ro(t,e,n){return t instanceof Mo?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof qo?Fo(t,e):t instanceof zo?Go(t,e):function(t,e){var n=Uo(t,e),r=Ho(n)+Ho(t.Qt);return Li(n)&&Li(t.Qt)?Co(r):Do(t.Kt,r)}(t,e)}function Vo(t,e,n){return t instanceof qo?Fo(t,e):t instanceof zo?Go(t,e):n}function Uo(t,e){return t instanceof Bo?Li(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Mo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Sr.c)(e,t),e}(Lo),qo=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Sr.c)(e,t),e}(Lo);function Fo(t,e){for(var n=Ko(e),r=function(t){n.some(function(e){return Si(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var zo=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Sr.c)(e,t),e}(Lo);function Go(t,e){for(var n=Ko(e),r=function(t){n=n.filter(function(e){return!Si(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Bo=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Kt=e,r.Qt=n,r}return Object(Sr.c)(e,t),e}(Lo);function Ho(t){return mi(t.integerValue||t.doubleValue)}function Ko(t){return Ri(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Jo=function(t,e){this.field=t,this.transform=e},Wo=function(t,e){this.version=t,this.transformResults=e},Xo=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.jt=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"Wt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Yo(t,e){return void 0!==t.updateTime?e instanceof Bi&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof Bi}var Qo=function(){};function $o(t,e,n){return t instanceof ru?function(t,e,n){var r=t.value;if(n.transformResults){var i=uu(t.fieldTransforms,e,n.transformResults);r=au(t.fieldTransforms,r,i)}return new Bi(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof iu?function(t,e,n){if(!Yo(t.Gt,e))return new Ki(t.key,n.version);var r=ou(t,e,n.transformResults?uu(t.fieldTransforms,e,n.transformResults):[]);return new Bi(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new Hi(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function Zo(t,e,n,r){return t instanceof ru?function(t,e,n,r){if(!Yo(t.Gt,e))return e;var i=t.value,o=su(t.fieldTransforms,n,e);i=au(t.fieldTransforms,i,o);var u=nu(e);return new Bi(t.key,u,i,{bt:!0})}(t,e,r):t instanceof iu?function(t,e,n,r){if(!Yo(t.Gt,e))return e;var i=nu(e),o=ou(t,e,su(t.fieldTransforms,n,e));return new Bi(t.key,i,o,{bt:!0})}(t,e,r):function(t,e){return Yo(t.Gt,e)?new Hi(t.key,si.min()):e}(t,e)}function tu(t,e){return function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],u=e instanceof Bi?e.field(o.field):void 0,s=Uo(o.transform,u||null);null!=s&&(n=null==n?(new Fi).set(o.field,s):n.set(o.field,s))}return n?n.yt():null}(t.fieldTransforms,e)}function eu(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Gt.isEqual(e.Gt)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Fr(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof qo&&e instanceof qo||t instanceof zo&&e instanceof zo?Fr(t.elements,e.elements,Si):t instanceof Bo&&e instanceof Bo?Si(t.Qt,e.Qt):t instanceof Mo&&e instanceof Mo}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.zt.isEqual(e.zt))}function nu(t){return t instanceof Bi?t.version:si.min()}var ru=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.Gt=r,o.fieldTransforms=i,o.type=0,o}return Object(Sr.c)(e,t),e}(Qo),iu=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var u=this;return(u=t.call(this)||this).key=e,u.data=n,u.zt=r,u.Gt=i,u.fieldTransforms=o,u.type=1,u}return Object(Sr.c)(e,t),e}(Qo);function ou(t,e,n){var r;return r=function(t,e){var n=new Fi(e);return t.zt.fields.forEach(function(e){if(!e.nt()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}}),n.yt()}(t,r=e instanceof Bi?e.data():qi.empty()),au(t.fieldTransforms,r,n)}function uu(t,e,n){var r=[];Rr(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],u=o.transform,s=null;e instanceof Bi&&(s=e.field(o.field)),r.push(Vo(u,s,n[i]))}return r}function su(t,e,n,r){for(var i=[],o=0,u=t;o<u.length;o++){var s=u[o],a=s.transform,c=null;n instanceof Bi&&(c=n.field(s.field)),i.push(Ro(a,c,e))}return i}function au(t,e,n){for(var r=new Fi(e),i=0;i<t.length;i++)r.set(t[i].field,n[i]);return r.yt()}var cu,hu,fu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Gt=n,r.type=2,r.fieldTransforms=[],r}return Object(Sr.c)(e,t),e}(Qo),lu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Gt=n,r.type=3,r.fieldTransforms=[],r}return Object(Sr.c)(e,t),e}(Qo),pu=function(t){this.count=t};function du(t){switch(t){case Br.OK:return Lr();case Br.CANCELLED:case Br.UNKNOWN:case Br.DEADLINE_EXCEEDED:case Br.RESOURCE_EXHAUSTED:case Br.INTERNAL:case Br.UNAVAILABLE:case Br.UNAUTHENTICATED:return!1;case Br.INVALID_ARGUMENT:case Br.NOT_FOUND:case Br.ALREADY_EXISTS:case Br.PERMISSION_DENIED:case Br.FAILED_PRECONDITION:case Br.ABORTED:case Br.OUT_OF_RANGE:case Br.UNIMPLEMENTED:case Br.DATA_LOSS:return!0;default:return Lr()}}function vu(t){if(void 0===t)return Dr("GRPC error has no .code"),Br.UNKNOWN;switch(t){case cu.OK:return Br.OK;case cu.CANCELLED:return Br.CANCELLED;case cu.UNKNOWN:return Br.UNKNOWN;case cu.DEADLINE_EXCEEDED:return Br.DEADLINE_EXCEEDED;case cu.RESOURCE_EXHAUSTED:return Br.RESOURCE_EXHAUSTED;case cu.INTERNAL:return Br.INTERNAL;case cu.UNAVAILABLE:return Br.UNAVAILABLE;case cu.UNAUTHENTICATED:return Br.UNAUTHENTICATED;case cu.INVALID_ARGUMENT:return Br.INVALID_ARGUMENT;case cu.NOT_FOUND:return Br.NOT_FOUND;case cu.ALREADY_EXISTS:return Br.ALREADY_EXISTS;case cu.PERMISSION_DENIED:return Br.PERMISSION_DENIED;case cu.FAILED_PRECONDITION:return Br.FAILED_PRECONDITION;case cu.ABORTED:return Br.ABORTED;case cu.OUT_OF_RANGE:return Br.OUT_OF_RANGE;case cu.UNIMPLEMENTED:return Br.UNIMPLEMENTED;case cu.DATA_LOSS:return Br.DATA_LOSS;default:return Lr()}}(hu=cu||(cu={}))[hu.OK=0]="OK",hu[hu.CANCELLED=1]="CANCELLED",hu[hu.UNKNOWN=2]="UNKNOWN",hu[hu.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",hu[hu.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",hu[hu.NOT_FOUND=5]="NOT_FOUND",hu[hu.ALREADY_EXISTS=6]="ALREADY_EXISTS",hu[hu.PERMISSION_DENIED=7]="PERMISSION_DENIED",hu[hu.UNAUTHENTICATED=16]="UNAUTHENTICATED",hu[hu.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",hu[hu.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",hu[hu.ABORTED=10]="ABORTED",hu[hu.OUT_OF_RANGE=11]="OUT_OF_RANGE",hu[hu.UNIMPLEMENTED=12]="UNIMPLEMENTED",hu[hu.INTERNAL=13]="INTERNAL",hu[hu.UNAVAILABLE=14]="UNAVAILABLE",hu[hu.DATA_LOSS=15]="DATA_LOSS";var yu=function(){function t(t,e){this.J=t,this.root=e||bu.EMPTY}return t.prototype.Ht=function(e,n){return new t(this.J,this.root.Ht(e,n,this.J).copy(null,null,bu.Jt,null,null))},t.prototype.remove=function(e){return new t(this.J,this.root.remove(e,this.J).copy(null,null,bu.Jt,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.nt();){var n=this.J(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.nt();){var r=this.J(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.nt=function(){return this.root.nt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.Yt=function(){return this.root.Yt()},t.prototype.Xt=function(){return this.root.Xt()},t.prototype.Zt=function(t){return this.root.Zt(t)},t.prototype.forEach=function(t){this.Zt(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.Zt(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.te=function(t){return this.root.te(t)},t.prototype.ee=function(){return new gu(this.root,null,this.J,!1)},t.prototype.ne=function(t){return new gu(this.root,t,this.J,!1)},t.prototype.se=function(){return new gu(this.root,null,this.J,!0)},t.prototype.ie=function(t){return new gu(this.root,t,this.J,!0)},t}(),gu=function(){function t(t,e,n,r){this.re=r,this.oe=[];for(var i=1;!t.nt();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.re?t.left:t.right;else{if(0===i){this.oe.push(t);break}this.oe.push(t),t=this.re?t.right:t.left}}return t.prototype.ce=function(){var t=this.oe.pop(),e={key:t.key,value:t.value};if(this.re)for(t=t.left;!t.nt();)this.oe.push(t),t=t.right;else for(t=t.right;!t.nt();)this.oe.push(t),t=t.left;return e},t.prototype.ae=function(){return this.oe.length>0},t.prototype.ue=function(){if(0===this.oe.length)return null;var t=this.oe[this.oe.length-1];return{key:t.key,value:t.value}},t}(),bu=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.nt=function(){return!1},t.prototype.Zt=function(t){return this.left.Zt(t)||t(this.key,this.value)||this.right.Zt(t)},t.prototype.te=function(t){return this.right.te(t)||t(this.key,this.value)||this.left.te(t)},t.prototype.min=function(){return this.left.nt()?this:this.left.min()},t.prototype.Yt=function(){return this.min().key},t.prototype.Xt=function(){return this.right.nt()?this.key:this.right.Xt()},t.prototype.Ht=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.Ht(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.Ht(t,e,n))).he()},t.prototype.le=function(){if(this.left.nt())return t.EMPTY;var e=this;return e.left._e()||e.left.left._e()||(e=e.fe()),(e=e.copy(null,null,null,e.left.le(),null)).he()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.nt()||i.left._e()||i.left.left._e()||(i=i.fe()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left._e()&&(i=i.de()),i.right.nt()||i.right._e()||i.right.left._e()||(i=i.we()),0===n(e,i.key)){if(i.right.nt())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.le())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.he()},t.prototype._e=function(){return this.color},t.prototype.he=function(){var t=this;return t.right._e()&&!t.left._e()&&(t=t.Ee()),t.left._e()&&t.left.left._e()&&(t=t.de()),t.left._e()&&t.right._e()&&(t=t.Te()),t},t.prototype.fe=function(){var t=this.Te();return t.right.left._e()&&(t=(t=(t=t.copy(null,null,null,null,t.right.de())).Ee()).Te()),t},t.prototype.we=function(){var t=this.Te();return t.left.left._e()&&(t=(t=t.de()).Te()),t},t.prototype.Ee=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.de=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Te=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Ie=function(){var t=this.me();return Math.pow(2,t)<=this.size+1},t.prototype.me=function(){if(this._e()&&this.left._e())throw Lr();if(this.right._e())throw Lr();var t=this.left.me();if(t!==this.right.me())throw Lr();return t+(this._e()?0:1)},t}();bu.EMPTY=null,bu.RED=!0,bu.Jt=!1,bu.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Lr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Lr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Lr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Lr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Lr()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.Ht=function(t,e,n){return new bu(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.nt=function(){return!0},t.prototype.Zt=function(t){return!1},t.prototype.te=function(t){return!1},t.prototype.Yt=function(){return null},t.prototype.Xt=function(){return null},t.prototype._e=function(){return!1},t.prototype.Ie=function(){return!0},t.prototype.me=function(){return 0},t}());var mu=function(){function t(t){this.J=t,this.data=new yu(this.J)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.Yt()},t.prototype.last=function(){return this.data.Xt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Zt(function(e,n){return t(e),!1})},t.prototype.Ae=function(t,e){for(var n=this.data.ne(t[0]);n.ae();){var r=n.ce();if(this.J(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Re=function(t,e){var n;for(n=void 0!==e?this.data.ne(e):this.data.ee();n.ae();)if(!t(n.ce().key))return},t.prototype.Pe=function(t){var e=this.data.ne(t);return e.ae()?e.ce().key:null},t.prototype.ee=function(){return new wu(this.data.ee())},t.prototype.ne=function(t){return new wu(this.data.ne(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).Ht(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.nt=function(){return this.data.nt()},t.prototype.ye=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.ee(),r=e.data.ee();n.ae();){var i=n.ce().key,o=r.ce().key;if(0!==this.J(i,o))return!1}return!0},t.prototype.rt=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.J);return n.data=e,n},t}(),wu=function(){function t(t){this.ge=t}return t.prototype.ce=function(){return this.ge.ce().key},t.prototype.ae=function(){return this.ge.ae()},t}(),Iu=new yu(li.J);function Ou(){return Iu}function _u(){return Ou()}var Eu=new yu(li.J);function Tu(){return Eu}var ju=new yu(li.J);function Au(){return ju}var Su=new mu(li.J);function Nu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Su,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var xu=new mu(qr);function ku(){return xu}var Du=function(){function t(t){this.J=t?function(e,n){return t(e,n)||li.J(e.key,n.key)}:function(t,e){return li.J(t.key,e.key)},this.Ve=Tu(),this.pe=new yu(this.J)}return t.be=function(e){return new t(e.J)},t.prototype.has=function(t){return null!=this.Ve.get(t)},t.prototype.get=function(t){return this.Ve.get(t)},t.prototype.first=function(){return this.pe.Yt()},t.prototype.last=function(){return this.pe.Xt()},t.prototype.nt=function(){return this.pe.nt()},t.prototype.indexOf=function(t){var e=this.Ve.get(t);return e?this.pe.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.pe.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.pe.Zt(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Ve.Ht(t.key,t),e.pe.Ht(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Ve.remove(t),this.pe.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.pe.ee(),r=e.pe.ee();n.ae();){var i=n.ce().key,o=r.ce().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.J=this.J,r.Ve=e,r.pe=n,r},t}(),Cu=function(){function t(){this.ve=new yu(li.J)}return t.prototype.track=function(t){var e=t.doc.key,n=this.ve.get(e);n?0!==t.type&&3===n.type?this.ve=this.ve.Ht(e,t):3===t.type&&1!==n.type?this.ve=this.ve.Ht(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.ve=this.ve.Ht(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.ve=this.ve.Ht(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.ve=this.ve.remove(e):1===t.type&&2===n.type?this.ve=this.ve.Ht(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.ve=this.ve.Ht(e,{type:2,doc:t.doc}):Lr():this.ve=this.ve.Ht(e,t)},t.prototype.Se=function(){var t=[];return this.ve.Zt(function(e,n){t.push(n)}),t},t}(),Pu=function(){function t(t,e,n,r,i,o,u,s){this.query=t,this.docs=e,this.De=n,this.docChanges=r,this.Ce=i,this.fromCache=o,this.xe=u,this.Ne=s}return t.Oe=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,Du.be(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Ce.nt()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.xe===t.xe&&this.Ce.isEqual(t.Ce)&&To(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.De.isEqual(t.De)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Lu=function(){function t(t,e,n,r,i){this.Mt=t,this.Fe=e,this.ke=n,this.Me=r,this.Le=i}return t.$e=function(e,n){var r=new Map;return r.set(e,Ru.Be(e,n)),new t(si.min(),r,ku(),Ou(),Nu())},t}(),Ru=function(){function t(t,e,n,r,i){this.resumeToken=t,this.qe=e,this.Ue=n,this.Qe=r,this.Ke=i}return t.Be=function(e,n){return new t(Gr.h,n,Nu(),Nu(),Nu())},t}(),Vu=function(t,e,n,r){this.je=t,this.removedTargetIds=e,this.key=n,this.We=r},Uu=function(t,e){this.targetId=t,this.Ge=e},Mu=function(t,e,n,r){void 0===n&&(n=Gr.h),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},qu=function(){function t(){this.ze=0,this.He=Gu(),this.Je=Gr.h,this.Ye=!1,this.Xe=!0}return Object.defineProperty(t.prototype,"qe",{get:function(){return this.Ye},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.Je},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ze",{get:function(){return 0!==this.ze},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tn",{get:function(){return this.Xe},enumerable:!1,configurable:!0}),t.prototype.en=function(t){t.o()>0&&(this.Xe=!0,this.Je=t)},t.prototype.nn=function(){var t=Nu(),e=Nu(),n=Nu();return this.He.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Lr()}}),new Ru(this.Je,this.Ye,t,e,n)},t.prototype.sn=function(){this.Xe=!1,this.He=Gu()},t.prototype.rn=function(t,e){this.Xe=!0,this.He=this.He.Ht(t,e)},t.prototype.on=function(t){this.Xe=!0,this.He=this.He.remove(t)},t.prototype.cn=function(){this.ze+=1},t.prototype.an=function(){this.ze-=1},t.prototype.un=function(){this.Xe=!0,this.Ye=!0},t}(),Fu=function(){function t(t){this.hn=t,this.ln=new Map,this._n=Ou(),this.fn=zu(),this.dn=new mu(qr)}return t.prototype.wn=function(t){for(var e=0,n=t.je;e<n.length;e++){var r=n[e];t.We instanceof Bi?this.En(r,t.We):t.We instanceof Hi&&this.Tn(r,t.key,t.We)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.Tn(r=o[i],t.key,t.We)},t.prototype.In=function(t){var e=this;this.mn(t,function(n){var r=e.An(n);switch(t.state){case 0:e.Rn(n)&&r.en(t.resumeToken);break;case 1:r.an(),r.Ze||r.sn(),r.en(t.resumeToken);break;case 2:r.an(),r.Ze||e.removeTarget(n);break;case 3:e.Rn(n)&&(r.un(),r.en(t.resumeToken));break;case 4:e.Rn(n)&&(e.Pn(n),r.en(t.resumeToken));break;default:Lr()}})},t.prototype.mn=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.ln.forEach(function(t,r){n.Rn(r)&&e(r)})},t.prototype.yn=function(t){var e=t.targetId,n=t.Ge.count,r=this.gn(e);if(r){var i=r.target;if(Qi(i))if(0===n){var o=new li(i.path);this.Tn(e,o,new Hi(o,si.min()))}else Rr(1===n);else this.Vn(e)!==n&&(this.Pn(e),this.dn=this.dn.add(e))}},t.prototype.pn=function(t){var e=this,n=new Map;this.ln.forEach(function(r,i){var o=e.gn(i);if(o){if(r.qe&&Qi(o.target)){var u=new li(o.target.path);null!==e._n.get(u)||e.bn(i,u)||e.Tn(i,u,new Hi(u,t))}r.tn&&(n.set(i,r.nn()),r.sn())}});var r=Nu();this.fn.forEach(function(t,n){var i=!0;n.Re(function(t){var n=e.gn(t);return!n||2===n.kt||(i=!1,!1)}),i&&(r=r.add(t))});var i=new Lu(t,n,this.dn,this._n,r);return this._n=Ou(),this.fn=zu(),this.dn=new mu(qr),i},t.prototype.En=function(t,e){if(this.Rn(t)){var n=this.bn(t,e.key)?2:0;this.An(t).rn(e.key,n),this._n=this._n.Ht(e.key,e),this.fn=this.fn.Ht(e.key,this.vn(e.key).add(t))}},t.prototype.Tn=function(t,e,n){if(this.Rn(t)){var r=this.An(t);this.bn(t,e)?r.rn(e,1):r.on(e),this.fn=this.fn.Ht(e,this.vn(e).delete(t)),n&&(this._n=this._n.Ht(e,n))}},t.prototype.removeTarget=function(t){this.ln.delete(t)},t.prototype.Vn=function(t){var e=this.An(t).nn();return this.hn.Sn(t).size+e.Ue.size-e.Ke.size},t.prototype.cn=function(t){this.An(t).cn()},t.prototype.An=function(t){var e=this.ln.get(t);return e||(e=new qu,this.ln.set(t,e)),e},t.prototype.vn=function(t){var e=this.fn.get(t);return e||(e=new mu(qr),this.fn=this.fn.Ht(t,e)),e},t.prototype.Rn=function(t){var e=null!==this.gn(t);return e||kr("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.gn=function(t){var e=this.ln.get(t);return e&&e.Ze?null:this.hn.Dn(t)},t.prototype.Pn=function(t){var e=this;this.ln.set(t,new qu),this.hn.Sn(t).forEach(function(n){e.Tn(t,n,null)})},t.prototype.bn=function(t,e){return this.hn.Sn(t).has(e)},t}();function zu(){return new yu(li.J)}function Gu(){return new yu(li.J)}var Bu={asc:"ASCENDING",desc:"DESCENDING"},Hu={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ku=function(t,e){this.T=t,this.qt=e};function Ju(t,e){return t.qt?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Wu(t,e){return t.qt?e.toBase64():e.toUint8Array()}function Xu(t,e){return Ju(t,e.G())}function Yu(t){return Rr(!!t),si.j(function(t){var e=bi(t);return new ui(e.seconds,e.nanos)}(t))}function Qu(t,e){return function(t){return new ci(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).ot()}function $u(t){var e=ci.ct(t);return Rr(Os(e)),e}function Zu(t,e){return Qu(t.T,e.path)}function ts(t,e){var n=$u(e);if(n.get(1)!==t.T.projectId)throw new Hr(Br.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.T.projectId);if(n.get(3)!==t.T.database)throw new Hr(Br.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.T.database);return new li(is(n))}function es(t,e){return Qu(t.T,e)}function ns(t){var e=$u(t);return 4===e.length?ci.at():is(e)}function rs(t){return new ci(["projects",t.T.projectId,"databases",t.T.database]).ot()}function is(t){return Rr(t.length>4&&"documents"===t.get(4)),t.X(5)}function os(t,e,n){return{name:Zu(t,e),fields:n.proto.mapValue.fields}}function us(t,e,n){var r=ts(t,e.name),i=Yu(e.updateTime),o=new qi({mapValue:{fields:e.fields}});return new Bi(r,i,o,{hasCommittedMutations:!!n})}function ss(t,e){var n;if(e instanceof ru)n={update:os(t,e.key,e.value)};else if(e instanceof fu)n={delete:Zu(t,e.key)};else if(e instanceof iu)n={update:os(t,e.key,e.data),updateMask:Is(e.zt)};else{if(!(e instanceof lu))return Lr();n={verify:Zu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof Mo)return{fieldPath:e.field.ot(),setToServerValue:"REQUEST_TIME"};if(n instanceof qo)return{fieldPath:e.field.ot(),appendMissingElements:{values:n.elements}};if(n instanceof zo)return{fieldPath:e.field.ot(),removeAllFromArray:{values:n.elements}};if(n instanceof Bo)return{fieldPath:e.field.ot(),increment:n.Qt};throw Lr()}(0,t)})),e.Gt.Wt||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Xu(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Lr()}(t,e.Gt)),n}function as(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Xo.updateTime(Yu(t.updateTime)):void 0!==t.exists?Xo.exists(t.exists):Xo.jt()}(e.currentDocument):Xo.jt(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(Rr("REQUEST_TIME"===e.setToServerValue),n=new Mo):"appendMissingElements"in e?n=new qo(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new zo(e.removeAllFromArray.values||[]):"increment"in e?n=new Bo(t,e.increment):Lr();var r=fi._t(e.fieldPath);return new Jo(r,n)}(t,e)}):[];if(e.update){var i=ts(t,e.update.name),o=new qi({mapValue:{fields:e.update.fields}});if(e.updateMask){var u=function(t){return new yi((t.fieldPaths||[]).map(function(t){return fi._t(t)}))}(e.updateMask);return new iu(i,o,u,n,r)}return new ru(i,o,n,r)}if(e.delete){var s=ts(t,e.delete);return new fu(s,n)}if(e.verify){var a=ts(t,e.verify);return new lu(a,n)}return Lr()}function cs(t,e){return{documents:[es(t,e.path)]}}function hs(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=es(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=es(t,r.Z()),n.structuredQuery.from=[{collectionId:r.et()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(Ui(t.value))return{unaryFilter:{field:gs(t.field),op:"IS_NAN"}};if(Vi(t.value))return{unaryFilter:{field:gs(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Ui(t.value))return{unaryFilter:{field:gs(t.field),op:"IS_NOT_NAN"}};if(Vi(t.value))return{unaryFilter:{field:gs(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gs(t.field),op:ys(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:gs(t.field),direction:vs(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var u=function(t,e){return t.qt||Ei(e)?e:{value:e}}(t,e.limit);return null!==u&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=ps(e.startAt)),e.endAt&&(n.structuredQuery.endAt=ps(e.endAt)),n}function fs(t){var e=ns(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Rr(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var u=[];n.where&&(u=ls(n.where));var s=[];n.orderBy&&(s=n.orderBy.map(function(t){return function(t){return new co(bs(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var a=null;n.limit&&(a=function(t){var e;return Ei(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=ds(n.startAt));var h=null;return n.endAt&&(h=ds(n.endAt)),vo(e,i,s,u,a,"F",c,h)}function ls(t){return t?void 0!==t.unaryFilter?[ws(t)]:void 0!==t.fieldFilter?[ms(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return ls(t)}).reduce(function(t,e){return t.concat(e)}):Lr():[]}function ps(t){return{before:t.before,values:t.position}}function ds(t){return new so(t.values||[],!!t.before)}function vs(t){return Bu[t]}function ys(t){return Hu[t]}function gs(t){return{fieldPath:t.ot()}}function bs(t){return fi._t(t.fieldPath)}function ms(t){return $i.create(bs(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Lr()}}(t.fieldFilter.op),t.fieldFilter.value)}function ws(t){switch(t.unaryFilter.op){case"IS_NAN":var e=bs(t.unaryFilter.field);return $i.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=bs(t.unaryFilter.field);return $i.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=bs(t.unaryFilter.field);return $i.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=bs(t.unaryFilter.field);return $i.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Lr()}}function Is(t){var e=[];return t.fields.forEach(function(t){return e.push(t.ot())}),{fieldPaths:e}}function Os(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var _s=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},Es=function(){function t(t){var e=this;this.Cn=null,this.xn=null,this.result=void 0,this.error=void 0,this.Nn=!1,this.On=!1,t(function(t){e.Nn=!0,e.result=t,e.Cn&&e.Cn(t)},function(t){e.Nn=!0,e.error=t,e.xn&&e.xn(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.On&&Lr(),this.On=!0,this.Nn?this.error?this.Fn(n,this.error):this.kn(e,this.result):new t(function(t,i){r.Cn=function(n){r.kn(e,n).next(t,i)},r.xn=function(e){r.Fn(n,e).next(t,i)}})},t.prototype.Mn=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.Ln=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.kn=function(e,n){return e?this.Ln(function(){return e(n)}):t.resolve(n)},t.prototype.Fn=function(e,n){return e?this.Ln(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.$n=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.Bn=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.$n(r)},t}(),Ts=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.qn=new _s,this.transaction.oncomplete=function(){n.qn.resolve()},this.transaction.onabort=function(){e.error?n.qn.reject(new Ss(t,e.error)):n.qn.resolve()},this.transaction.onerror=function(e){var r=Cs(e.target.error);n.qn.reject(new Ss(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Ss(n,e)}},Object.defineProperty(t.prototype,"Un",{get:function(){return this.qn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.qn.reject(t),this.aborted||(kr("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new xs(e)},t}(),js=function(){function t(e,n,r){this.name=e,this.version=n,this.Qn=r,12.2===t.Kn(Object(T.g)())&&Dr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return kr("SimpleDb","Removing database:",t),ks(window.indexedDB.deleteDatabase(t)).Mn()},t.jn=function(){if("undefined"==typeof indexedDB)return!1;if(t.Wn())return!0;var e=Object(T.g)(),n=t.Kn(e),r=0<n&&n<10,i=t.Gn(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Wn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.zn)},t.Hn=function(t,e){return t.store(e)},t.Kn=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Gn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Jn=function(t){return Object(Sr.b)(this,void 0,void 0,function(){var e,n=this;return Object(Sr.d)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(kr("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Ss(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Hr(Br.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Ss(t,n))},i.onupgradeneeded=function(t){kr("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.Qn.Yn(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){kr("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Xn&&(this.db.onversionchange=function(t){return n.Xn(t)}),this.db)]}})})},t.prototype.Zn=function(t){this.Xn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(Sr.b)(this,void 0,void 0,function(){var i,o,u,s,a;return Object(Sr.d)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,u=function(){var e,u,a,c,h;return Object(Sr.d)(this,function(f){switch(f.label){case 0:++o,f.label=1;case 1:return f.trys.push([1,4,,5]),[4,s.Jn(t)];case 2:return s.db=f.sent(),e=Ts.open(s.db,t,i?"readonly":"readwrite",n),u=r(e).catch(function(t){return e.abort(t),Es.reject(t)}).Mn(),a={},u.catch(function(){}),[4,e.Un];case 3:return[2,(a.value=(f.sent(),u),a)];case 4:return kr("SimpleDb","Transaction failed with error:",(c=f.sent()).message,"Retrying:",h="FirebaseError"!==c.name&&o<3),s.close(),h?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},s=this,c.label=1;case 1:return[5,u()];case 2:if("object"==typeof(a=c.sent()))return[2,a.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),As=function(){function t(t){this.ts=t,this.es=!1,this.ns=null}return Object.defineProperty(t.prototype,"Nn",{get:function(){return this.es},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ss",{get:function(){return this.ns},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.ts=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.es=!0},t.prototype.rs=function(t){this.ns=t},t.prototype.delete=function(){return ks(this.ts.delete())},t}(),Ss=function(t){function e(e,n){var r=this;return(r=t.call(this,Br.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(Sr.c)(e,t),e}(Hr);function Ns(t){return"IndexedDbTransactionError"===t.name}var xs=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(kr("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(kr("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),ks(n)},t.prototype.add=function(t){return kr("SimpleDb","ADD",this.store.name,t,t),ks(this.store.add(t))},t.prototype.get=function(t){var e=this;return ks(this.store.get(t)).next(function(n){return void 0===n&&(n=null),kr("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return kr("SimpleDb","DELETE",this.store.name,t),ks(this.store.delete(t))},t.prototype.count=function(){return kr("SimpleDb","COUNT",this.store.name),ks(this.store.count())},t.prototype.os=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.cs(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.us=function(t,e){kr("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.hs=!1;var r=this.cursor(n);return this.cs(r,function(t,e,n){return n.delete()})},t.prototype.ls=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.cs(r,e)},t.prototype._s=function(t){var e=this.cursor({});return new Es(function(n,r){e.onerror=function(t){var e=Cs(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.cs=function(t,e){var n=[];return new Es(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new As(i),u=e(i.primaryKey,i.value,o);if(u instanceof Es){var s=u.catch(function(t){return o.done(),Es.reject(t)});n.push(s)}o.Nn?r():null===o.ss?i.continue():i.continue(o.ss)}else r()}}).next(function(){return Es.$n(n)})},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.hs?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function ks(t){return new Es(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Cs(t.target.error);n(e)}})}var Ds=!1;function Cs(t){var e=js.Kn(Object(T.g)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Hr("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Ds||(Ds=!0,setTimeout(function(){throw r},0)),r}}return t}var Ps=function(){function t(t,e,n,r,i){this.fs=t,this.ds=e,this.ws=n,this.op=r,this.Es=i,this.Ts=new _s,this.then=this.Ts.promise.then.bind(this.Ts.promise),this.Ts.promise.catch(function(t){})}return t.Is=function(e,n,r,i,o){var u=new t(e,n,Date.now()+r,i,o);return u.start(r),u},t.prototype.start=function(t){var e=this;this.As=setTimeout(function(){return e.Rs()},t)},t.prototype.Ps=function(){return this.Rs()},t.prototype.cancel=function(t){null!==this.As&&(this.clearTimeout(),this.Ts.reject(new Hr(Br.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.Rs=function(){var t=this;this.fs.ys(function(){return null!==t.As?(t.clearTimeout(),t.op().then(function(e){return t.Ts.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.As&&(this.Es(this),clearTimeout(this.As),this.As=null)},t}();function Ls(t,e){if(Dr("AsyncQueue",e+": "+t),Ns(t))return new Hr(Br.UNAVAILABLE,e+": "+t);throw t}var Rs="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Vs=function(){function t(){this.gs=[]}return t.prototype.Vs=function(t){this.gs.push(t)},t.prototype.ps=function(){this.gs.forEach(function(t){return t()})},t}();function Us(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=qs(e)),e=Ms(t.get(n),e);return qs(e)}function Ms(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function qs(t){return t+"\x01\x01"}function Fs(t){var e=t.length;if(Rr(e>=2),2===e)return Rr("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),ci.at();for(var n=e-2,r=[],i="",o=0;o<e;){var u=t.indexOf("\x01",o);switch((u<0||u>n)&&Lr(),t.charAt(u+1)){case"\x01":var s=t.substring(o,u),a=void 0;0===i.length?a=s:(a=i+=s,i=""),r.push(a);break;case"\x10":i+=t.substring(o,u),i+="\0";break;case"\x11":i+=t.substring(o,u+1);break;default:Lr()}o=u+2}return new ci(r)}var zs=function(t,e){this.seconds=t,this.nanoseconds=e},Gs=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Gs.store="owner",Gs.key="owner";var Bs=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Bs.store="mutationQueues",Bs.keyPath="userId";var Hs=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Hs.store="mutations",Hs.keyPath="batchId",Hs.userMutationsIndex="userMutationsIndex",Hs.userMutationsKeyPath=["userId","batchId"];var Ks=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Us(e)]},t.key=function(t,e,n){return[t,Us(e),n]},t}();Ks.store="documentMutations",Ks.PLACEHOLDER=new Ks;var Js=function(t,e){this.path=t,this.readTime=e},Ws=function(t,e){this.path=t,this.version=e},Xs=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Xs.store="remoteDocuments",Xs.readTimeIndex="readTimeIndex",Xs.readTimeIndexPath="readTime",Xs.collectionReadTimeIndex="collectionReadTimeIndex",Xs.collectionReadTimeIndexPath=["parentPath","readTime"];var Ys=function(t){this.byteSize=t};Ys.store="remoteDocumentGlobal",Ys.key="remoteDocumentGlobalKey";var Qs=function(t,e,n,r,i,o,u){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=u};Qs.store="targets",Qs.keyPath="targetId",Qs.queryTargetsIndexName="queryTargetsIndex",Qs.queryTargetsKeyPath=["canonicalId","targetId"];var $s=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};$s.store="targetDocuments",$s.keyPath=["targetId","path"],$s.documentTargetsIndex="documentTargetsIndex",$s.documentTargetsKeyPath=["path","targetId"];var Zs=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Zs.key="targetGlobalKey",Zs.store="targetGlobal";var ta=function(t,e){this.collectionId=t,this.parent=e};ta.store="collectionParents",ta.keyPath=["collectionId","parent"];var ea=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};ea.store="clientMetadata",ea.keyPath="clientId";var na=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};na.store="bundles",na.keyPath="bundleId";var ra=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};ra.store="namedQueries",ra.keyPath="name";var ia=Object(Sr.g)(Object(Sr.g)(Object(Sr.g)(Object(Sr.g)([Bs.store,Hs.store,Ks.store,Xs.store,Qs.store,Gs.store,Zs.store,$s.store],[ea.store]),[Ys.store]),[ta.store]),[na.store,ra.store]),oa=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).bs=e,r.vs=n,r}return Object(Sr.c)(e,t),e}(Vs);function ua(t,e){var n=Vr(t);return js.Hn(n.bs,e)}var sa=function(){function t(t,e,n,r){this.batchId=t,this.Ss=e,this.baseMutations=n,this.mutations=r}return t.prototype.Ds=function(t,e,n){for(var r=n.Cs,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=$o(o,e,r[i]))}return e},t.prototype.xs=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(u=r[n]).key.isEqual(t)&&(e=Zo(u,e,0,this.Ss));for(var i=0,o=this.mutations;i<o.length;i++){var u;(u=o[i]).key.isEqual(t)&&(e=Zo(u,e,0,this.Ss))}return e},t.prototype.Ns=function(t){var e=this,n=t;return this.mutations.forEach(function(r){var i=e.xs(r.key,t.get(r.key));i&&(n=n.Ht(r.key,i))}),n},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Nu())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Fr(this.mutations,t.mutations,function(t,e){return eu(t,e)})&&Fr(this.baseMutations,t.baseMutations,function(t,e){return eu(t,e)})},t}(),aa=function(){function t(t,e,n,r){this.batch=t,this.Os=e,this.Cs=n,this.Fs=r}return t.from=function(e,n,r){Rr(e.mutations.length===r.length);for(var i=Au(),o=e.mutations,u=0;u<o.length;u++)i=i.Ht(o[u].key,r[u].version);return new t(e,n,r,i)},t}(),ca=function(t){this.ks=t};function ha(t,e){if(e.document)return us(t.ks,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=li.Tt(e.noDocument.path),r=va(e.noDocument.readTime);return new Hi(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=li.Tt(e.unknownDocument.path);return r=va(e.unknownDocument.version),new Ki(i,r)}return Lr()}function fa(t,e,n){var r=la(n),i=e.key.path.Z().rt();if(e instanceof Bi){var o=function(t,e){return{name:Zu(t,e.key),fields:e.vt().mapValue.fields,updateTime:Ju(t,e.version.G())}}(t.ks,e),u=e.hasCommittedMutations;return new Xs(null,null,o,u,r,i)}if(e instanceof Hi){var s=e.key.path.rt(),a=da(e.version);return u=e.hasCommittedMutations,new Xs(null,new Js(s,a),null,u,r,i)}if(e instanceof Ki){var c=e.key.path.rt(),h=da(e.version);return new Xs(new Ws(c,h),null,null,!0,r,i)}return Lr()}function la(t){var e=t.G();return[e.seconds,e.nanoseconds]}function pa(t){var e=new ui(t[0],t[1]);return si.j(e)}function da(t){var e=t.G();return new zs(e.seconds,e.nanoseconds)}function va(t){var e=new ui(t.seconds,t.nanoseconds);return si.j(e)}function ya(t,e){for(var n=(e.baseMutations||[]).map(function(e){return as(t.ks,e)}),r=e.mutations.length-1;r>=0;--r){var i=e.mutations[r];void 0!==(null==i?void 0:i.transform)&&(e.mutations[r-1].updateTransforms=i.transform.fieldTransforms,e.mutations.splice(r,1),--r)}var o=e.mutations.map(function(e){return as(t.ks,e)}),u=ui.fromMillis(e.localWriteTimeMs);return new sa(e.batchId,u,n,o)}function ga(t){var e,n,r=va(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?va(t.lastLimboFreeSnapshotVersion):si.min();return void 0!==t.query.documents?(Rr(1===(n=t.query).documents.length),e=_o(yo(ns(n.documents[0])))):e=function(t){return _o(fs(t))}(t.query),new ko(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Gr.fromBase64String(t.resumeToken))}function ba(t,e){var n,r=da(e.Mt),i=da(e.lastLimboFreeSnapshotVersion);n=Qi(e.target)?cs(t.ks,e.target):hs(t.ks,e.target);var o=e.resumeToken.toBase64();return new Qs(e.targetId,Xi(e.target),r,o,e.sequenceNumber,i,n)}function ma(t){var e=fs({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Eo(e,e.limit,"L"):e}var wa=function(){function t(){}return t.prototype.Ms=function(t,e){return Ia(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:va(e.createTime),version:e.version};var e})},t.prototype.Ls=function(t,e){return Ia(t).put({bundleId:(n=e).id,createTime:da(Yu(n.createTime)),version:n.version});var n},t.prototype.$s=function(t,e){return Oa(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:ma(e.bundledQuery),readTime:va(e.readTime)};var e})},t.prototype.Bs=function(t,e){return Oa(t).put(function(t){return{name:t.name,readTime:da(Yu(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Ia(t){return ua(t,na.store)}function Oa(t){return ua(t,ra.store)}var _a=function(){function t(){this.qs=new Ea}return t.prototype.Us=function(t,e){return this.qs.add(e),Es.resolve()},t.prototype.Qs=function(t,e){return Es.resolve(this.qs.getEntries(e))},t}(),Ea=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.et(),n=t.Z(),r=this.index[e]||new mu(ci.J),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.et(),n=t.Z(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new mu(ci.J)).rt()},t}(),Ta=function(){function t(){this.Ks=new Ea}return t.prototype.Us=function(t,e){var n=this;if(!this.Ks.has(e)){var r=e.et(),i=e.Z();t.Vs(function(){n.Ks.add(e)});var o={collectionId:r,parent:Us(i)};return ja(t).put(o)}return Es.resolve()},t.prototype.Qs=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[zr(e),""],!1,!0);return ja(t).os(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Fs(o.parent))}return n})},t}();function ja(t){return ua(t,ta.store)}var Aa={js:!1,Ws:0,Gs:0,zs:0},Sa=function(){function t(t,e,n){this.Hs=t,this.Js=e,this.Ys=n}return t.Xs=function(e){return new t(e,t.Zs,t.ti)},t}();function Na(t){return Object(Sr.b)(this,void 0,void 0,function(){return Object(Sr.d)(this,function(e){if(t.code!==Br.FAILED_PRECONDITION||t.message!==Rs)throw t;return kr("LocalStore","Unexpectedly lost primary lease"),[2]})})}Sa.Zs=10,Sa.ti=1e3,Sa.ei=new Sa(41943040,Sa.Zs,Sa.ti),Sa.ni=new Sa(-1,0,0);var xa=function(){function t(t,e){this.si=t,this.ii=e,this.ri={}}return t.prototype.get=function(t){var e=this.si(t),n=this.ri[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],u=o[1];if(this.ii(o[0],t))return u}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.si(t),r=this.ri[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.ii(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.ri[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.si(t),n=this.ri[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.ii(n[r][0],t))return 1===n.length?delete this.ri[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){di(this.ri,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.nt=function(){return vi(this.ri)},t}(),ka=function(){function t(){this.oi=new xa(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.ci=!1}return t.prototype.ai=function(t){var e=this.oi.get(t);return e?e.readTime:si.min()},t.prototype.ui=function(t,e){this.hi(),this.oi.set(t.key,{li:t,readTime:e})},t.prototype._i=function(t,e){void 0===e&&(e=null),this.hi(),this.oi.set(t,{li:null,readTime:e})},t.prototype.fi=function(t,e){this.hi();var n=this.oi.get(e);return void 0!==n?Es.resolve(n.li):this.di(t,e)},t.prototype.getEntries=function(t,e){return this.wi(t,e)},t.prototype.apply=function(t){return this.hi(),this.ci=!0,this.Ei(t)},t.prototype.hi=function(){},t}();function Da(t,e,n){var r=t.store(Hs.store),i=t.store(Ks.store),o=[],u=IDBKeyRange.only(n.batchId),s=0,a=r.ls({range:u},function(t,e,n){return s++,n.delete()});o.push(a.next(function(){Rr(1===s)}));for(var c=[],h=0,f=n.mutations;h<f.length;h++){var l=f[h],p=Ks.key(e,l.key.path,n.batchId);o.push(i.delete(p)),c.push(l.key)}return Es.$n(o).next(function(){return c})}function Ca(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Lr();e=t.noDocument}return JSON.stringify(e).length}var Pa=function(){function t(t,e,n,r){this.userId=t,this.Kt=e,this.Ti=n,this.Ii=r,this.mi={}}return t.Ai=function(e,n,r,i){return Rr(""!==e.uid),new t(e.A()?e.uid:"",n,r,i)},t.prototype.Ri=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ra(t).ls({index:Hs.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.Pi=function(t,e,n,r){var i=this,o=Va(t),u=Ra(t);return u.add({}).next(function(s){Rr("number"==typeof s);for(var a=new sa(s,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return ss(t.ks,e)}),i=n.mutations.map(function(e){return ss(t.ks,e)});return new Hs(e,n.batchId,n.Ss.toMillis(),r,i)}(i.Kt,i.userId,a),h=[],f=new mu(function(t,e){return qr(t.ot(),e.ot())}),l=0,p=r;l<p.length;l++){var d=p[l],v=Ks.key(i.userId,d.key.path,s);f=f.add(d.key.path.Z()),h.push(u.put(c)),h.push(o.put(v,Ks.PLACEHOLDER))}return f.forEach(function(e){h.push(i.Ti.Us(t,e))}),t.Vs(function(){i.mi[s]=a.keys()}),Es.$n(h).next(function(){return a})})},t.prototype.yi=function(t,e){var n=this;return Ra(t).get(e).next(function(t){return t?(Rr(t.userId===n.userId),ya(n.Kt,t)):null})},t.prototype.gi=function(t,e){var n=this;return this.mi[e]?Es.resolve(this.mi[e]):this.yi(t,e).next(function(t){if(t){var r=t.keys();return n.mi[e]=r,r}return null})},t.prototype.Vi=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Ra(t).ls({index:Hs.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(Rr(e.batchId>=r),o=ya(n.Kt,e)),i.done()}).next(function(){return o})},t.prototype.pi=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Ra(t).ls({index:Hs.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.bi=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ra(t).os(Hs.userMutationsIndex,n).next(function(t){return t.map(function(t){return ya(e.Kt,t)})})},t.prototype.vi=function(t,e){var n=this,r=Ks.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Va(t).ls({range:i},function(r,i,u){var s=r[0],a=r[2],c=Fs(r[1]);if(s===n.userId&&e.path.isEqual(c))return Ra(t).get(a).next(function(t){if(!t)throw Lr();Rr(t.userId===n.userId),o.push(ya(n.Kt,t))});u.done()}).next(function(){return o})},t.prototype.Si=function(t,e){var n=this,r=new mu(qr),i=[];return e.forEach(function(e){var o=Ks.prefixForPath(n.userId,e.path),u=IDBKeyRange.lowerBound(o),s=Va(t).ls({range:u},function(t,i,o){var u=t[0],s=t[2],a=Fs(t[1]);u===n.userId&&e.path.isEqual(a)?r=r.add(s):o.done()});i.push(s)}),Es.$n(i).next(function(){return n.Di(t,r)})},t.prototype.Ci=function(t,e){var n=this,r=e.path,i=r.length+1,o=Ks.prefixForPath(this.userId,r),u=IDBKeyRange.lowerBound(o),s=new mu(qr);return Va(t).ls({range:u},function(t,e,o){var u=t[0],a=t[2],c=Fs(t[1]);u===n.userId&&r.st(c)?c.length===i&&(s=s.add(a)):o.done()}).next(function(){return n.Di(t,s)})},t.prototype.Di=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(Ra(t).get(e).next(function(t){if(null===t)throw Lr();Rr(t.userId===n.userId),r.push(ya(n.Kt,t))}))}),Es.$n(i).next(function(){return r})},t.prototype.xi=function(t,e){var n=this;return Da(t.bs,this.userId,e).next(function(r){return t.Vs(function(){n.Ni(e.batchId)}),Es.forEach(r,function(e){return n.Ii.Oi(t,e)})})},t.prototype.Ni=function(t){delete this.mi[t]},t.prototype.Fi=function(t){var e=this;return this.Ri(t).next(function(n){if(!n)return Es.resolve();var r=IDBKeyRange.lowerBound(Ks.prefixForUser(e.userId)),i=[];return Va(t).ls({range:r},function(t,n,r){if(t[0]===e.userId){var o=Fs(t[1]);i.push(o)}else r.done()}).next(function(){Rr(0===i.length)})})},t.prototype.ki=function(t,e){return La(t,this.userId,e)},t.prototype.Mi=function(t){var e=this;return Ua(t).get(this.userId).next(function(t){return t||new Bs(e.userId,-1,"")})},t}();function La(t,e,n){var r=Ks.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),u=!1;return Va(t).ls({range:o,hs:!0},function(t,n,r){t[0]===e&&t[1]===i&&(u=!0),r.done()}).next(function(){return u})}function Ra(t){return ua(t,Hs.store)}function Va(t){return ua(t,Ks.store)}function Ua(t){return ua(t,Bs.store)}var Ma=function(){function t(t){this.Li=t}return t.prototype.next=function(){return this.Li+=2,this.Li},t.$i=function(){return new t(0)},t.Bi=function(){return new t(-1)},t}(),qa=function(){function t(t,e){this.Ii=t,this.Kt=e}return t.prototype.qi=function(t){var e=this;return this.Ui(t).next(function(n){var r=new Ma(n.highestTargetId);return n.highestTargetId=r.next(),e.Qi(t,n).next(function(){return n.highestTargetId})})},t.prototype.Ki=function(t){return this.Ui(t).next(function(t){return si.j(new ui(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.ji=function(t){return this.Ui(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.Wi=function(t,e,n){var r=this;return this.Ui(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.G()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Qi(t,i)})},t.prototype.Gi=function(t,e){var n=this;return this.zi(t,e).next(function(){return n.Ui(t).next(function(r){return r.targetCount+=1,n.Hi(e,r),n.Qi(t,r)})})},t.prototype.Ji=function(t,e){return this.zi(t,e)},t.prototype.Yi=function(t,e){var n=this;return this.Xi(t,e.targetId).next(function(){return Fa(t).delete(e.targetId)}).next(function(){return n.Ui(t)}).next(function(e){return Rr(e.targetCount>0),e.targetCount-=1,n.Qi(t,e)})},t.prototype.Zi=function(t,e,n){var r=this,i=0,o=[];return Fa(t).ls(function(u,s){var a=ga(s);a.sequenceNumber<=e&&null===n.get(a.targetId)&&(i++,o.push(r.Yi(t,a)))}).next(function(){return Es.$n(o)}).next(function(){return i})},t.prototype.mn=function(t,e){return Fa(t).ls(function(t,n){var r=ga(n);e(r)})},t.prototype.Ui=function(t){return za(t).get(Zs.key).next(function(t){return Rr(null!==t),t})},t.prototype.Qi=function(t,e){return za(t).put(Zs.key,e)},t.prototype.zi=function(t,e){return Fa(t).put(ba(this.Kt,e))},t.prototype.Hi=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.tr=function(t){return this.Ui(t).next(function(t){return t.targetCount})},t.prototype.er=function(t,e){var n=Xi(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Fa(t).ls({range:r,index:Qs.queryTargetsIndexName},function(t,n,r){var o=ga(n);Yi(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.nr=function(t,e,n){var r=this,i=[],o=Ga(t);return e.forEach(function(e){var u=Us(e.path);i.push(o.put(new $s(n,u))),i.push(r.Ii.sr(t,n,e))}),Es.$n(i)},t.prototype.ir=function(t,e,n){var r=this,i=Ga(t);return Es.forEach(e,function(e){var o=Us(e.path);return Es.$n([i.delete([n,o]),r.Ii.rr(t,n,e)])})},t.prototype.Xi=function(t,e){var n=Ga(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.cr=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Ga(t),i=Nu();return r.ls({range:n,hs:!0},function(t,e,n){var r=Fs(t[1]),o=new li(r);i=i.add(o)}).next(function(){return i})},t.prototype.ki=function(t,e){var n=Us(e.path),r=IDBKeyRange.bound([n],[zr(n)],!1,!0),i=0;return Ga(t).ls({index:$s.documentTargetsIndex,hs:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.Dn=function(t,e){return Fa(t).get(e).next(function(t){return t?ga(t):null})},t}();function Fa(t){return ua(t,Qs.store)}function za(t){return ua(t,Zs.store)}function Ga(t){return ua(t,$s.store)}function Ba(t,e){var n=t[1],r=e[1],i=qr(t[0],e[0]);return 0===i?qr(n,r):i}var Ha=function(){function t(t){this.ar=t,this.buffer=new mu(Ba),this.ur=0}return t.prototype.hr=function(){return++this.ur},t.prototype.lr=function(t){var e=[t,this.hr()];if(this.buffer.size<this.ar)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Ba(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Ka=function(){function t(t,e){this._r=t,this.fs=e,this.dr=!1,this.wr=null}return t.prototype.start=function(t){-1!==this._r.params.Hs&&this.Er(t)},t.prototype.stop=function(){this.wr&&(this.wr.cancel(),this.wr=null)},Object.defineProperty(t.prototype,"Tr",{get:function(){return null!==this.wr},enumerable:!1,configurable:!0}),t.prototype.Er=function(t){var e=this,n=this.dr?3e5:6e4;kr("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.wr=this.fs.Ir("lru_garbage_collection",n,function(){return Object(Sr.b)(e,void 0,void 0,function(){var e;return Object(Sr.d)(this,function(n){switch(n.label){case 0:this.wr=null,this.dr=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.mr(this._r)];case 2:return n.sent(),[3,7];case 3:return Ns(e=n.sent())?(kr("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Na(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.Er(t)];case 8:return n.sent(),[2]}})})})},t}(),Ja=function(){function t(t,e){this.Ar=t,this.params=e}return t.prototype.Rr=function(t,e){return this.Ar.Pr(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.yr=function(t,e){var n=this;if(0===e)return Es.resolve(oi.U);var r=new Ha(e);return this.Ar.mn(t,function(t){return r.lr(t.sequenceNumber)}).next(function(){return n.Ar.gr(t,function(t){return r.lr(t)})}).next(function(){return r.maxValue})},t.prototype.Zi=function(t,e,n){return this.Ar.Zi(t,e,n)},t.prototype.Vr=function(t,e){return this.Ar.Vr(t,e)},t.prototype.pr=function(t,e){var n=this;return-1===this.params.Hs?(kr("LruGarbageCollector","Garbage collection skipped; disabled"),Es.resolve(Aa)):this.br(t).next(function(r){return r<n.params.Hs?(kr("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.Hs),Aa):n.vr(t,e)})},t.prototype.br=function(t){return this.Ar.br(t)},t.prototype.vr=function(t,e){var n,r,i,o,u,s,a,c=this,h=Date.now();return this.Rr(t,this.params.Js).next(function(e){return e>c.params.Ys?(kr("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.Ys+" from "+e),r=c.params.Ys):r=e,o=Date.now(),c.yr(t,r)}).next(function(r){return n=r,u=Date.now(),c.Zi(t,n,e)}).next(function(e){return i=e,s=Date.now(),c.Vr(t,n)}).next(function(t){return a=Date.now(),xr()<=E.a.DEBUG&&kr("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(u-o)+"ms\n\tRemoved "+i+" targets in "+(s-u)+"ms\n\tRemoved "+t+" documents in "+(a-s)+"ms\nTotal Duration: "+(a-h)+"ms"),Es.resolve({js:!0,Ws:r,Gs:i,zs:t})})},t}(),Wa=function(){function t(t,e){this.db=t,this._r=function(t,e){return new Ja(t,e)}(this,e)}return t.prototype.Pr=function(t){var e=this.Sr(t);return this.db.Dr().tr(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.Sr=function(t){var e=0;return this.gr(t,function(t){e++}).next(function(){return e})},t.prototype.mn=function(t,e){return this.db.Dr().mn(t,e)},t.prototype.gr=function(t,e){return this.Cr(t,function(t,n){return e(n)})},t.prototype.sr=function(t,e,n){return Xa(t,n)},t.prototype.rr=function(t,e,n){return Xa(t,n)},t.prototype.Zi=function(t,e,n){return this.db.Dr().Zi(t,e,n)},t.prototype.Oi=function(t,e){return Xa(t,e)},t.prototype.Nr=function(t,e){return function(t,e){var n=!1;return Ua(t)._s(function(r){return La(t,r,e).next(function(t){return t&&(n=!0),Es.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.Vr=function(t,e){var n=this,r=this.db.Fr().Or(),i=[],o=0;return this.Cr(t,function(u,s){if(s<=e){var a=n.Nr(t,u).next(function(e){if(!e)return o++,r.fi(t,u).next(function(){return r._i(u),Ga(t).delete([0,Us(u.path)])})});i.push(a)}}).next(function(){return Es.$n(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.Lt(t.vs);return this.db.Dr().Ji(t,n)},t.prototype.kr=function(t,e){return Xa(t,e)},t.prototype.Cr=function(t,e){var n,r=Ga(t),i=oi.U;return r.ls({index:$s.documentTargetsIndex},function(t,r){var o=r.path,u=r.sequenceNumber;0===t[0]?(i!==oi.U&&e(new li(Fs(n)),i),i=u,n=o):i=oi.U}).next(function(){i!==oi.U&&e(new li(Fs(n)),i)})},t.prototype.br=function(t){return this.db.Fr().Mr(t)},t}();function Xa(t,e){return Ga(t).put(function(t,e){return new $s(0,Us(t.path),e)}(e,t.vs))}var Ya=function(){function t(t,e){this.Kt=t,this.Ti=e}return t.prototype.ui=function(t,e,n){return Za(t).put(tc(e),n)},t.prototype._i=function(t,e){var n=Za(t),r=tc(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.Lr(t,r)})},t.prototype.fi=function(t,e){var n=this;return Za(t).get(tc(e)).next(function(t){return n.$r(t)})},t.prototype.Br=function(t,e){var n=this;return Za(t).get(tc(e)).next(function(t){var e=n.$r(t);return e?{li:e,size:Ca(t)}:null})},t.prototype.getEntries=function(t,e){var n=this,r=_u();return this.qr(t,e,function(t,e){var i=n.$r(e);r=r.Ht(t,i)}).next(function(){return r})},t.prototype.Ur=function(t,e){var n=this,r=_u(),i=new yu(li.J);return this.qr(t,e,function(t,e){var o=n.$r(e);o?(r=r.Ht(t,o),i=i.Ht(t,Ca(e))):(r=r.Ht(t,null),i=i.Ht(t,0))}).next(function(){return{Qr:r,Kr:i}})},t.prototype.qr=function(t,e,n){if(e.nt())return Es.resolve();var r=IDBKeyRange.bound(e.first().path.rt(),e.last().path.rt()),i=e.ee(),o=i.ce();return Za(t).ls({range:r},function(t,e,r){for(var u=li.Tt(t);o&&li.J(o,u)<0;)n(o,null),o=i.ce();o&&o.isEqual(u)&&(n(o,e),o=i.ae()?i.ce():null),o?r.rs(o.path.rt()):r.done()}).next(function(){for(;o;)n(o,null),o=i.ae()?i.ce():null})},t.prototype.jr=function(t,e,n){var r=this,i=Tu(),o=e.path.length+1,u={};if(n.isEqual(si.min())){var s=e.path.rt();u.range=IDBKeyRange.lowerBound(s)}else{var a=e.path.rt(),c=la(n);u.range=IDBKeyRange.lowerBound([a,c],!0),u.index=Xs.collectionReadTimeIndex}return Za(t).ls(u,function(t,n,u){if(t.length===o){var s=ha(r.Kt,n);e.path.st(s.key.path)?s instanceof Bi&&So(e,s)&&(i=i.Ht(s.key,s)):u.done()}}).next(function(){return i})},t.prototype.Or=function(t){return new Qa(this,!!t&&t.Wr)},t.prototype.Mr=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return $a(t).get(Ys.key).next(function(t){return Rr(!!t),t})},t.prototype.Lr=function(t,e){return $a(t).put(Ys.key,e)},t.prototype.$r=function(t){if(t){var e=ha(this.Kt,t);return e instanceof Hi&&e.version.isEqual(si.min())?null:e}return null},t}(),Qa=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Gr=e,r.Wr=n,r.zr=new xa(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(Sr.c)(e,t),e.prototype.Ei=function(t){var e=this,n=[],r=0,i=new mu(function(t,e){return qr(t.ot(),e.ot())});return this.oi.forEach(function(o,u){var s=e.zr.get(o);if(u.li){var a=fa(e.Gr.Kt,u.li,e.ai(o));i=i.add(o.path.Z());var c=Ca(a);r+=c-s,n.push(e.Gr.ui(t,o,a))}else if(r-=s,e.Wr){var h=fa(e.Gr.Kt,new Hi(o,si.min()),e.ai(o));n.push(e.Gr.ui(t,o,h))}else n.push(e.Gr._i(t,o))}),i.forEach(function(r){n.push(e.Gr.Ti.Us(t,r))}),n.push(this.Gr.updateMetadata(t,r)),Es.$n(n)},e.prototype.di=function(t,e){var n=this;return this.Gr.Br(t,e).next(function(t){return null===t?(n.zr.set(e,0),null):(n.zr.set(e,t.size),t.li)})},e.prototype.wi=function(t,e){var n=this;return this.Gr.Ur(t,e).next(function(t){var e=t.Qr;return t.Kr.forEach(function(t,e){n.zr.set(t,e)}),e})},e}(ka);function $a(t){return ua(t,Ys.store)}function Za(t){return ua(t,Xs.store)}function tc(t){return t.path.rt()}var ec=function(){function t(t){this.Kt=t}return t.prototype.Yn=function(t,e,n,r){var i=this;Rr(n<r&&n>=0&&r<=11);var o=new Ts("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Gs.store)}(t),function(t){t.createObjectStore(Bs.store,{keyPath:Bs.keyPath}),t.createObjectStore(Hs.store,{keyPath:Hs.keyPath,autoIncrement:!0}).createIndex(Hs.userMutationsIndex,Hs.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Ks.store)}(t),nc(t),function(t){t.createObjectStore(Xs.store)}(t));var u=Es.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore($s.store),t.deleteObjectStore(Qs.store),t.deleteObjectStore(Zs.store)}(t),nc(t)),u=u.next(function(){return function(t){var e=t.store(Zs.store),n=new Zs(0,0,si.min().G(),0);return e.put(Zs.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(u=u.next(function(){return function(t,e){return e.store(Hs.store).os().next(function(n){t.deleteObjectStore(Hs.store),t.createObjectStore(Hs.store,{keyPath:Hs.keyPath,autoIncrement:!0}).createIndex(Hs.userMutationsIndex,Hs.userMutationsKeyPath,{unique:!0});var r=e.store(Hs.store),i=n.map(function(t){return r.put(t)});return Es.$n(i)})}(t,o)})),u=u.next(function(){!function(t){t.createObjectStore(ea.store,{keyPath:ea.keyPath})}(t)})),n<5&&r>=5&&(u=u.next(function(){return i.Hr(o)})),n<6&&r>=6&&(u=u.next(function(){return function(t){t.createObjectStore(Ys.store)}(t),i.Jr(o)})),n<7&&r>=7&&(u=u.next(function(){return i.Yr(o)})),n<8&&r>=8&&(u=u.next(function(){return i.Xr(t,o)})),n<9&&r>=9&&(u=u.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Xs.store);e.createIndex(Xs.readTimeIndex,Xs.readTimeIndexPath,{unique:!1}),e.createIndex(Xs.collectionReadTimeIndex,Xs.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(u=u.next(function(){return i.Zr(o)})),n<11&&r>=11&&(u=u.next(function(){!function(t){t.createObjectStore(na.store,{keyPath:na.keyPath})}(t),function(t){t.createObjectStore(ra.store,{keyPath:ra.keyPath})}(t)})),u},t.prototype.Jr=function(t){var e=0;return t.store(Xs.store).ls(function(t,n){e+=Ca(n)}).next(function(){var n=new Ys(e);return t.store(Ys.store).put(Ys.key,n)})},t.prototype.Hr=function(t){var e=this,n=t.store(Bs.store),r=t.store(Hs.store);return n.os().next(function(n){return Es.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.os(Hs.userMutationsIndex,i).next(function(r){return Es.forEach(r,function(r){Rr(r.userId===n.userId);var i=ya(e.Kt,r);return Da(t,n.userId,i).next(function(){})})})})})},t.prototype.Yr=function(t){var e=t.store($s.store),n=t.store(Xs.store);return t.store(Zs.store).get(Zs.key).next(function(t){var r=[];return n.ls(function(n,i){var o=new ci(n),u=function(t){return[0,Us(t)]}(o);r.push(e.get(u).next(function(n){return n?Es.resolve():function(n){return e.put(new $s(0,Us(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return Es.$n(r)})})},t.prototype.Xr=function(t,e){t.createObjectStore(ta.store,{keyPath:ta.keyPath});var n=e.store(ta.store),r=new Ea,i=function(t){if(r.add(t)){var e=t.et(),i=t.Z();return n.put({collectionId:e,parent:Us(i)})}};return e.store(Xs.store).ls({hs:!0},function(t,e){var n=new ci(t);return i(n.Z())}).next(function(){return e.store(Ks.store).ls({hs:!0},function(t,e){var n=Fs(t[1]);return i(n.Z())})})},t.prototype.Zr=function(t){var e=this,n=t.store(Qs.store);return n.ls(function(t,r){var i=ga(r),o=ba(e.Kt,i);return n.put(o)})},t}();function nc(t){t.createObjectStore($s.store,{keyPath:$s.keyPath}).createIndex($s.documentTargetsIndex,$s.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Qs.store,{keyPath:Qs.keyPath}).createIndex(Qs.queryTargetsIndexName,Qs.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Zs.store)}var rc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ic=function(){function t(e,n,r,i,o,u,s,a,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.eo=o,this.window=u,this.document=s,this.no=c,this.so=h,this.io=null,this.ro=!1,this.isPrimary=!1,this.networkEnabled=!0,this.oo=null,this.inForeground=!1,this.co=null,this.ao=null,this.uo=Number.NEGATIVE_INFINITY,this.ho=function(t){return Promise.resolve()},!t.jn())throw new Hr(Br.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Ii=new Wa(this,i),this.lo=n+"main",this.Kt=new ca(a),this._o=new js(this.lo,11,new ec(this.Kt)),this.fo=new qa(this.Ii,this.Kt),this.Ti=new Ta,this.wo=function(t,e){return new Ya(t,e)}(this.Kt,this.Ti),this.Eo=new wa,this.window&&this.window.localStorage?this.To=this.window.localStorage:(this.To=null,!1===h&&Dr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.Io().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Hr(Br.FAILED_PRECONDITION,rc);return t.mo(),t.Ao(),t.Ro(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.fo.ji(e)})}).then(function(e){t.io=new oi(e,t.no)}).then(function(){t.ro=!0}).catch(function(e){return t._o&&t._o.close(),Promise.reject(e)})},t.prototype.Po=function(t){var e=this;return this.ho=function(n){return Object(Sr.b)(e,void 0,void 0,function(){return Object(Sr.d)(this,function(e){return this.Tr?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.yo=function(t){var e=this;this._o.Zn(function(n){return Object(Sr.b)(e,void 0,void 0,function(){return Object(Sr.d)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.Vo=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.eo.ys(function(){return Object(Sr.b)(e,void 0,void 0,function(){return Object(Sr.d)(this,function(t){switch(t.label){case 0:return this.Tr?[4,this.Io()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.Io=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return uc(e).put(new ea(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.po(e).next(function(e){e||(t.isPrimary=!1,t.eo.bo(function(){return t.ho(!1)}))})}).next(function(){return t.vo(e)}).next(function(n){return t.isPrimary&&!n?t.So(e).next(function(){return!1}):!!n&&t.Do(e).next(function(){return!0})})}).catch(function(e){if(Ns(e))return kr("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return kr("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.eo.bo(function(){return t.ho(e)}),t.isPrimary=e})},t.prototype.po=function(t){var e=this;return oc(t).get(Gs.key).next(function(t){return Es.resolve(e.Co(t))})},t.prototype.xo=function(t){return uc(t).delete(this.clientId)},t.prototype.No=function(){return Object(Sr.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(Sr.d)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.Oo(this.uo,18e5)?[3,2]:(this.uo=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=ua(t,ea.store);return e.os().next(function(t){var n=r.Fo(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return Es.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.To)for(e=0,n=t;e<n.length;e++)this.To.removeItem(this.ko(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.Ro=function(){var t=this;this.ao=this.eo.Ir("client_metadata_refresh",4e3,function(){return t.Io().then(function(){return t.No()}).then(function(){return t.Ro()})})},t.prototype.Co=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.vo=function(t){var e=this;return this.so?Es.resolve(!0):oc(t).get(Gs.key).next(function(n){if(null!==n&&e.Oo(n.leaseTimestampMs,5e3)&&!e.Mo(n.ownerId)){if(e.Co(n)&&e.networkEnabled)return!0;if(!e.Co(n)){if(!n.allowTabSynchronization)throw new Hr(Br.FAILED_PRECONDITION,rc);return!1}}return!(!e.networkEnabled||!e.inForeground)||uc(t).os().next(function(t){return void 0===e.Fo(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&kr("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.Lo=function(){return Object(Sr.b)(this,void 0,void 0,function(){var t=this;return Object(Sr.d)(this,function(e){switch(e.label){case 0:return this.ro=!1,this.$o(),this.ao&&(this.ao.cancel(),this.ao=null),this.Bo(),this.qo(),[4,this._o.runTransaction("shutdown","readwrite",[Gs.store,ea.store],function(e){var n=new oa(e,oi.U);return t.So(n).next(function(){return t.xo(n)})})];case 1:return e.sent(),this._o.close(),this.Uo(),[2]}})})},t.prototype.Fo=function(t,e){var n=this;return t.filter(function(t){return n.Oo(t.updateTimeMs,e)&&!n.Mo(t.clientId)})},t.prototype.Qo=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return uc(e).os().next(function(e){return t.Fo(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"Tr",{get:function(){return this.ro},enumerable:!1,configurable:!0}),t.prototype.Ko=function(t){return Pa.Ai(t,this.Kt,this.Ti,this.Ii)},t.prototype.Dr=function(){return this.fo},t.prototype.Fr=function(){return this.wo},t.prototype.jo=function(){return this.Ti},t.prototype.Wo=function(){return this.Eo},t.prototype.runTransaction=function(t,e,n){var r,i=this;return kr("IndexedDbPersistence","Starting transaction:",t),this._o.runTransaction(t,"readonly"===e?"readonly":"readwrite",ia,function(o){return r=new oa(o,i.io?i.io.next():oi.U),"readwrite-primary"===e?i.po(r).next(function(t){return!!t||i.vo(r)}).next(function(e){if(!e)throw Dr("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.eo.bo(function(){return i.ho(!1)}),new Hr(Br.FAILED_PRECONDITION,Rs);return n(r)}).next(function(t){return i.Do(r).next(function(){return t})}):i.Go(r).next(function(){return n(r)})}).then(function(t){return r.ps(),t})},t.prototype.Go=function(t){var e=this;return oc(t).get(Gs.key).next(function(t){if(null!==t&&e.Oo(t.leaseTimestampMs,5e3)&&!e.Mo(t.ownerId)&&!e.Co(t)&&!(e.so||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Hr(Br.FAILED_PRECONDITION,rc)})},t.prototype.Do=function(t){var e=new Gs(this.clientId,this.allowTabSynchronization,Date.now());return oc(t).put(Gs.key,e)},t.jn=function(){return js.jn()},t.prototype.So=function(t){var e=this,n=oc(t);return n.get(Gs.key).next(function(t){return e.Co(t)?(kr("IndexedDbPersistence","Releasing primary lease."),n.delete(Gs.key)):Es.resolve()})},t.prototype.Oo=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Dr("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.mo=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.co=function(){t.eo.ys(function(){return t.inForeground="visible"===t.document.visibilityState,t.Io()})},this.document.addEventListener("visibilitychange",this.co),this.inForeground="visible"===this.document.visibilityState)},t.prototype.Bo=function(){this.co&&(this.document.removeEventListener("visibilitychange",this.co),this.co=null)},t.prototype.Ao=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.oo=function(){e.$o(),e.eo.ys(function(){return e.Lo()})},this.window.addEventListener("unload",this.oo))},t.prototype.qo=function(){this.oo&&(this.window.removeEventListener("unload",this.oo),this.oo=null)},t.prototype.Mo=function(t){var e;try{var n=null!==(null===(e=this.To)||void 0===e?void 0:e.getItem(this.ko(t)));return kr("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Dr("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.$o=function(){if(this.To)try{this.To.setItem(this.ko(this.clientId),String(Date.now()))}catch(t){Dr("Failed to set zombie client id.",t)}},t.prototype.Uo=function(){if(this.To)try{this.To.removeItem(this.ko(this.clientId))}catch(t){}},t.prototype.ko=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function oc(t){return ua(t,Gs.store)}function uc(t){return ua(t,ea.store)}function sc(t,e){var n=t.projectId;return t.m||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var ac=function(t,e){this.progress=t,this.zo=e},cc=function(){function t(t,e,n){this.wo=t,this.Ho=e,this.Ti=n}return t.prototype.Jo=function(t,e){var n=this;return this.Ho.vi(t,e).next(function(r){return n.Yo(t,e,r)})},t.prototype.Yo=function(t,e,n){return this.wo.fi(t,e).next(function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].xs(e,t);return t})},t.prototype.Xo=function(t,e,n){var r=_u();return e.forEach(function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].xs(t,e);r=r.Ht(t,e)}),r},t.prototype.Zo=function(t,e){var n=this;return this.wo.getEntries(t,e).next(function(e){return n.tc(t,e)})},t.prototype.tc=function(t,e){var n=this;return this.Ho.Si(t,e).next(function(r){var i=n.Xo(t,e,r),o=Ou();return i.forEach(function(t,e){e||(e=new Hi(t,si.min())),o=o.Ht(t,e)}),o})},t.prototype.jr=function(t,e,n){return function(t){return li.Et(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.ec(t,e.path):Io(e)?this.nc(t,e,n):this.sc(t,e,n)},t.prototype.ec=function(t,e){return this.Jo(t,new li(e)).next(function(t){var e=Tu();return t instanceof Bi&&(e=e.Ht(t.key,t)),e})},t.prototype.nc=function(t,e,n){var r=this,i=e.collectionGroup,o=Tu();return this.Ti.Qs(t,i).next(function(u){return Es.forEach(u,function(u){var s=function(t,e){return new po(e,null,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,u.child(i));return r.sc(t,s,n).next(function(t){t.forEach(function(t,e){o=o.Ht(t,e)})})}).next(function(){return o})})},t.prototype.sc=function(t,e,n){var r,i,o=this;return this.wo.jr(t,e,n).next(function(n){return r=n,o.Ho.Ci(t,e)}).next(function(e){return o.ic(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],u=0,s=o.mutations;u<s.length;u++){var a=s[u],c=a.key,h=Zo(a,r.get(c),0,o.Ss);r=h instanceof Bi?r.Ht(c,h):r.remove(c)}})}).next(function(){return r.forEach(function(t,n){So(e,n)||(r=r.remove(t))}),r})},t.prototype.ic=function(t,e,n){for(var r=Nu(),i=0,o=e;i<o.length;i++)for(var u=0,s=o[i].mutations;u<s.length;u++){var a=s[u];a instanceof iu&&null===n.get(a.key)&&(r=r.add(a.key))}var c=n;return this.wo.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof Bi&&(c=c.Ht(t,e))}),c})},t}(),hc=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.rc=n,this.oc=r}return t.cc=function(e,n){for(var r=Nu(),i=Nu(),o=0,u=n.docChanges;o<u.length;o++){var s=u[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),fc=function(){function t(){}return t.prototype.ac=function(t){this.uc=t},t.prototype.jr=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.Nt.length||1===t.Nt.length&&t.Nt[0].field.ht())}(e)||n.isEqual(si.min())?this.hc(t,e):this.uc.Zo(t,r).next(function(o){var u=i.lc(e,o);return(go(e)||bo(e))&&i._c(e.limitType,u,r,n)?i.hc(t,e):(xr()<=E.a.DEBUG&&kr("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Ao(e)),i.uc.jr(t,e,n).next(function(t){return u.forEach(function(e){t=t.Ht(e.key,e)}),t}))})},t.prototype.lc=function(t,e){var n=new mu(No(t));return e.forEach(function(e,r){r instanceof Bi&&So(t,r)&&(n=n.add(r))}),n},t.prototype._c=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.u(r)>0)},t.prototype.hc=function(t,e){return xr()<=E.a.DEBUG&&kr("QueryEngine","Using full collection scan to execute query:",Ao(e)),this.uc.jr(t,e,si.min())},t}(),lc=function(){function t(t,e,n,r){this.persistence=t,this.fc=e,this.Kt=r,this.dc=new yu(qr),this.wc=new xa(function(t){return Xi(t)},Yi),this.Ec=si.min(),this.Ho=t.Ko(n),this.Tc=t.Fr(),this.fo=t.Dr(),this.Ic=new cc(this.Tc,this.Ho,this.persistence.jo()),this.Eo=t.Wo(),this.fc.ac(this.Ic)}return t.prototype.mr=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.pr(n,e.dc)})},t}();function pc(t,e,n,r){return new lc(t,e,n,r)}function dc(t,e){return Object(Sr.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Sr.d)(this,function(u){switch(u.label){case 0:return n=Vr(t),r=n.Ho,i=n.Ic,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n.Ho.bi(t).next(function(u){return o=u,r=n.persistence.Ko(e),i=new cc(n.Tc,r,n.persistence.jo()),r.bi(t)}).next(function(e){for(var n=[],r=[],u=Nu(),s=0,a=o;s<a.length;s++){var c=a[s];n.push(c.batchId);for(var h=0,f=c.mutations;h<f.length;h++)u=u.add(f[h].key)}for(var l=0,p=e;l<p.length;l++){var d=p[l];r.push(d.batchId);for(var v=0,y=d.mutations;v<y.length;v++)u=u.add(y[v].key)}return i.Zo(t,u).next(function(t){return{mc:t,Ac:n,Rc:r}})})})];case 1:return o=u.sent(),[2,(n.Ho=r,n.Ic=i,n.fc.ac(n.Ic),o)]}})})}function vc(t,e){var n=Vr(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.Tc.Or({Wr:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),u=Es.resolve();return o.forEach(function(t){u=u.next(function(){return r.fi(e,t)}).next(function(e){var o=e,u=n.Fs.get(t);Rr(null!==u),(!o||o.version.u(u)<0)&&(o=i.Ds(t,o,n))&&r.ui(o,n.Os)})}),u.next(function(){return t.Ho.xi(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n.Ho.Fi(t)}).next(function(){return n.Ic.Zo(t,r)})})}function yc(t){var e=Vr(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.fo.Ki(t)})}function gc(t,e){var n=Vr(t),r=e.Mt,i=n.dc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.Tc.Or({Wr:!0});i=n.dc;var u=[];e.Fe.forEach(function(e,o){var s=i.get(o);if(s){u.push(n.fo.ir(t,e.Ke,o).next(function(){return n.fo.nr(t,e.Ue,o)}));var a=e.resumeToken;if(a.o()>0){var c=s.$t(a,r).Lt(t.vs);i=i.Ht(o,c),function(t,e,n){return Rr(e.resumeToken.o()>0),0===t.resumeToken.o()||e.Mt.W()-t.Mt.W()>=3e8||n.Ue.size+n.Qe.size+n.Ke.size>0}(s,c,e)&&u.push(n.fo.Ji(t,c))}}});var s=Ou();if(e.Me.forEach(function(r,i){e.Le.has(r)&&u.push(n.persistence.Ii.kr(t,r))}),u.push(bc(t,o,e.Me,r,void 0).next(function(t){s=t})),!r.isEqual(si.min())){var a=n.fo.Ki(t).next(function(e){return n.fo.Wi(t,t.vs,r)});u.push(a)}return Es.$n(u).next(function(){return o.apply(t)}).next(function(){return n.Ic.tc(t,s)})}).then(function(t){return n.dc=i,t})}function bc(t,e,n,r,i){var o=Nu();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=Ou();return n.forEach(function(n,u){var s=t.get(n),a=(null==i?void 0:i.get(n))||r;u instanceof Hi&&u.version.isEqual(si.min())?(e._i(n,a),o=o.Ht(n,u)):null==s||u.version.u(s.version)>0||0===u.version.u(s.version)&&s.hasPendingWrites?(e.ui(u,a),o=o.Ht(n,u)):kr("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",u.version)}),o})}function mc(t,e){var n=Vr(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n.Ho.Vi(t,e)})}function wc(t,e){var n=Vr(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.fo.er(t,e).next(function(i){return i?Es.resolve(r=i):n.fo.qi(t).next(function(i){return r=new ko(e,i,0,t.vs),n.fo.Gi(t,r).next(function(){return r})})})}).then(function(t){var r=n.dc.get(t.targetId);return(null===r||t.Mt.u(r.Mt)>0)&&(n.dc=n.dc.Ht(t.targetId,t),n.wc.set(e,t.targetId)),t})}function Ic(t,e,n){return Object(Sr.b)(this,void 0,void 0,function(){var r,i,o,u;return Object(Sr.d)(this,function(s){switch(s.label){case 0:r=Vr(t),i=r.dc.get(e),o=n?"readwrite":"readwrite-primary",s.label=1;case 1:return s.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.Ii.removeTarget(t,i)})];case 2:s.sent(),s.label=3;case 3:return[3,5];case 4:if(!Ns(u=s.sent()))throw u;return kr("LocalStore","Failed to update sequence numbers for target "+e+": "+u),[3,5];case 5:return r.dc=r.dc.remove(e),r.wc.delete(i.target),[2]}})})}function Oc(t,e,n){var r=Vr(t),i=si.min(),o=Nu();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=Vr(t),i=r.wc.get(n);return void 0!==i?Es.resolve(r.dc.get(i)):r.fo.er(e,n)}(r,t,_o(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.fo.cr(t,e.targetId).next(function(t){o=t})}).next(function(){return r.fc.jr(t,e,n?i:si.min(),n?o:Nu())}).next(function(t){return{documents:t,Pc:o}})})}function _c(t,e){var n=Vr(t),r=Vr(n.fo),i=n.dc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.Dn(t,e).next(function(t){return t?t.target:null})})}function Ec(t){var e=Vr(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=Vr(t),i=Ou(),o=la(n),u=Za(e),s=IDBKeyRange.lowerBound(o,!0);return u.ls({index:Xs.readTimeIndex,range:s},function(t,e){var n=ha(r.Kt,e);i=i.Ht(n.key,n),o=e.readTime}).next(function(){return{zo:i,readTime:pa(o)}})}(e.Tc,t,e.Ec)}).then(function(t){var n=t.zo;return e.Ec=t.readTime,n})}function Tc(t){return Object(Sr.b)(this,void 0,void 0,function(){var e;return Object(Sr.d)(this,function(n){return[2,(e=Vr(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=Za(t),n=si.min();return e.ls({index:Xs.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=pa(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.Ec=t})]})})}function jc(t,e,n,r){return Object(Sr.b)(this,void 0,void 0,function(){var i,o,u,s,a,c,h,f,l,p;return Object(Sr.d)(this,function(d){switch(d.label){case 0:for(i=Vr(t),o=Nu(),u=Ou(),s=Au(),a=0,c=n;a<c.length;a++)f=e.yc((h=c[a]).metadata.name),h.document&&(o=o.add(f)),u=u.Ht(f,e.gc(h)),s=s.Ht(f,e.Vc(h.metadata.readTime));return l=i.Tc.Or({Wr:!0}),[4,wc(i,function(t){return _o(yo(ci.ct("__bundle__/docs/"+t)))}(r))];case 1:return p=d.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return bc(t,l,u,si.min(),s).next(function(e){return l.apply(t),e}).next(function(e){return i.fo.Xi(t,p.targetId).next(function(){return i.fo.nr(t,o,p.targetId)}).next(function(){return i.Ic.tc(t,e)})})})]}})})}function Ac(t,e,n){return void 0===n&&(n=Nu()),Object(Sr.b)(this,void 0,void 0,function(){var r,i;return Object(Sr.d)(this,function(o){switch(o.label){case 0:return[4,wc(t,_o(ma(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Vr(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=Yu(e.readTime);if(r.Mt.u(o)>=0)return i.Eo.Bs(t,e);var u=r.$t(Gr.h,o);return i.dc=i.dc.Ht(u.targetId,u),i.fo.Ji(t,u).next(function(){return i.fo.Xi(t,r.targetId)}).next(function(){return i.fo.nr(t,n,r.targetId)}).next(function(){return i.Eo.Bs(t,e)})})]}})})}var Sc=function(){function t(t){this.Kt=t,this.bc=new Map,this.vc=new Map}return t.prototype.Ms=function(t,e){return Es.resolve(this.bc.get(e))},t.prototype.Ls=function(t,e){var n;return this.bc.set(e.id,{id:(n=e).id,version:n.version,createTime:Yu(n.createTime)}),Es.resolve()},t.prototype.$s=function(t,e){return Es.resolve(this.vc.get(e))},t.prototype.Bs=function(t,e){return this.vc.set(e.name,function(t){return{name:t.name,query:ma(t.bundledQuery),readTime:Yu(t.readTime)}}(e)),Es.resolve()},t}(),Nc=function(){function t(){this.Sc=new mu(xc.Dc),this.Cc=new mu(xc.xc)}return t.prototype.nt=function(){return this.Sc.nt()},t.prototype.sr=function(t,e){var n=new xc(t,e);this.Sc=this.Sc.add(n),this.Cc=this.Cc.add(n)},t.prototype.Nc=function(t,e){var n=this;t.forEach(function(t){return n.sr(t,e)})},t.prototype.rr=function(t,e){this.Oc(new xc(t,e))},t.prototype.Fc=function(t,e){var n=this;t.forEach(function(t){return n.rr(t,e)})},t.prototype.kc=function(t){var e=this,n=new li(new ci([])),r=new xc(n,t),i=new xc(n,t+1),o=[];return this.Cc.Ae([r,i],function(t){e.Oc(t),o.push(t.key)}),o},t.prototype.Mc=function(){var t=this;this.Sc.forEach(function(e){return t.Oc(e)})},t.prototype.Oc=function(t){this.Sc=this.Sc.delete(t),this.Cc=this.Cc.delete(t)},t.prototype.Lc=function(t){var e=new li(new ci([])),n=new xc(e,t),r=new xc(e,t+1),i=Nu();return this.Cc.Ae([n,r],function(t){i=i.add(t.key)}),i},t.prototype.ki=function(t){var e=new xc(t,0),n=this.Sc.Pe(e);return null!==n&&t.isEqual(n.key)},t}(),xc=function(){function t(t,e){this.key=t,this.$c=e}return t.Dc=function(t,e){return li.J(t.key,e.key)||qr(t.$c,e.$c)},t.xc=function(t,e){return qr(t.$c,e.$c)||li.J(t.key,e.key)},t}(),kc=function(){function t(t,e){this.Ti=t,this.Ii=e,this.Ho=[],this.Bc=1,this.qc=new mu(xc.Dc)}return t.prototype.Ri=function(t){return Es.resolve(0===this.Ho.length)},t.prototype.Pi=function(t,e,n,r){var i=this.Bc;this.Bc++;var o=new sa(i,e,n,r);this.Ho.push(o);for(var u=0,s=r;u<s.length;u++){var a=s[u];this.qc=this.qc.add(new xc(a.key,i)),this.Ti.Us(t,a.key.path.Z())}return Es.resolve(o)},t.prototype.yi=function(t,e){return Es.resolve(this.Uc(e))},t.prototype.Vi=function(t,e){var n=this.Qc(e+1),r=n<0?0:n;return Es.resolve(this.Ho.length>r?this.Ho[r]:null)},t.prototype.pi=function(){return Es.resolve(0===this.Ho.length?-1:this.Bc-1)},t.prototype.bi=function(t){return Es.resolve(this.Ho.slice())},t.prototype.vi=function(t,e){var n=this,r=new xc(e,0),i=new xc(e,Number.POSITIVE_INFINITY),o=[];return this.qc.Ae([r,i],function(t){var e=n.Uc(t.$c);o.push(e)}),Es.resolve(o)},t.prototype.Si=function(t,e){var n=this,r=new mu(qr);return e.forEach(function(t){var e=new xc(t,0),i=new xc(t,Number.POSITIVE_INFINITY);n.qc.Ae([e,i],function(t){r=r.add(t.$c)})}),Es.resolve(this.Kc(r))},t.prototype.Ci=function(t,e){var n=e.path,r=n.length+1,i=n;li.Et(i)||(i=i.child(""));var o=new xc(new li(i),0),u=new mu(qr);return this.qc.Re(function(t){var e=t.key.path;return!!n.st(e)&&(e.length===r&&(u=u.add(t.$c)),!0)},o),Es.resolve(this.Kc(u))},t.prototype.Kc=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.Uc(t);null!==r&&n.push(r)}),n},t.prototype.xi=function(t,e){var n=this;Rr(0===this.jc(e.batchId,"removed")),this.Ho.shift();var r=this.qc;return Es.forEach(e.mutations,function(i){var o=new xc(i.key,e.batchId);return r=r.delete(o),n.Ii.Oi(t,i.key)}).next(function(){n.qc=r})},t.prototype.Ni=function(t){},t.prototype.ki=function(t,e){var n=new xc(e,0),r=this.qc.Pe(n);return Es.resolve(e.isEqual(r&&r.key))},t.prototype.Fi=function(t){return Es.resolve()},t.prototype.jc=function(t,e){return this.Qc(t)},t.prototype.Qc=function(t){return 0===this.Ho.length?0:t-this.Ho[0].batchId},t.prototype.Uc=function(t){var e=this.Qc(t);return e<0||e>=this.Ho.length?null:this.Ho[e]},t}(),Dc=function(){function t(t,e){this.Ti=t,this.Wc=e,this.docs=new yu(li.J),this.size=0}return t.prototype.ui=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,u=this.Wc(e);return this.docs=this.docs.Ht(r,{li:e,size:u,readTime:n}),this.size+=u-o,this.Ti.Us(t,r.path.Z())},t.prototype._i=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.fi=function(t,e){var n=this.docs.get(e);return Es.resolve(n?n.li:null)},t.prototype.getEntries=function(t,e){var n=this,r=_u();return e.forEach(function(t){var e=n.docs.get(t);r=r.Ht(t,e?e.li:null)}),Es.resolve(r)},t.prototype.jr=function(t,e,n){for(var r=Tu(),i=new li(e.path.child("")),o=this.docs.ne(i);o.ae();){var u=o.ce(),s=u.value,a=s.li,c=s.readTime;if(!e.path.st(u.key.path))break;c.u(n)<=0||a instanceof Bi&&So(e,a)&&(r=r.Ht(a.key,a))}return Es.resolve(r)},t.prototype.Gc=function(t,e){return Es.forEach(this.docs,function(t){return e(t)})},t.prototype.Or=function(t){return new Cc(this)},t.prototype.Mr=function(t){return Es.resolve(this.size)},t}(),Cc=function(t){function e(e){var n=this;return(n=t.call(this)||this).Gr=e,n}return Object(Sr.c)(e,t),e.prototype.Ei=function(t){var e=this,n=[];return this.oi.forEach(function(r,i){i&&i.li?n.push(e.Gr.ui(t,i.li,e.ai(r))):e.Gr._i(r)}),Es.$n(n)},e.prototype.di=function(t,e){return this.Gr.fi(t,e)},e.prototype.wi=function(t,e){return this.Gr.getEntries(t,e)},e}(ka),Pc=function(){function t(t){this.persistence=t,this.zc=new xa(function(t){return Xi(t)},Yi),this.lastRemoteSnapshotVersion=si.min(),this.highestTargetId=0,this.Hc=0,this.Jc=new Nc,this.targetCount=0,this.Yc=Ma.$i()}return t.prototype.mn=function(t,e){return this.zc.forEach(function(t,n){return e(n)}),Es.resolve()},t.prototype.Ki=function(t){return Es.resolve(this.lastRemoteSnapshotVersion)},t.prototype.ji=function(t){return Es.resolve(this.Hc)},t.prototype.qi=function(t){return this.highestTargetId=this.Yc.next(),Es.resolve(this.highestTargetId)},t.prototype.Wi=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Hc&&(this.Hc=e),Es.resolve()},t.prototype.zi=function(t){this.zc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Yc=new Ma(e),this.highestTargetId=e),t.sequenceNumber>this.Hc&&(this.Hc=t.sequenceNumber)},t.prototype.Gi=function(t,e){return this.zi(e),this.targetCount+=1,Es.resolve()},t.prototype.Ji=function(t,e){return this.zi(e),Es.resolve()},t.prototype.Yi=function(t,e){return this.zc.delete(e.target),this.Jc.kc(e.targetId),this.targetCount-=1,Es.resolve()},t.prototype.Zi=function(t,e,n){var r=this,i=0,o=[];return this.zc.forEach(function(u,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.zc.delete(u),o.push(r.Xi(t,s.targetId)),i++)}),Es.$n(o).next(function(){return i})},t.prototype.tr=function(t){return Es.resolve(this.targetCount)},t.prototype.er=function(t,e){var n=this.zc.get(e)||null;return Es.resolve(n)},t.prototype.nr=function(t,e,n){return this.Jc.Nc(e,n),Es.resolve()},t.prototype.ir=function(t,e,n){this.Jc.Fc(e,n);var r=this.persistence.Ii,i=[];return r&&e.forEach(function(e){i.push(r.Oi(t,e))}),Es.$n(i)},t.prototype.Xi=function(t,e){return this.Jc.kc(e),Es.resolve()},t.prototype.cr=function(t,e){var n=this.Jc.Lc(e);return Es.resolve(n)},t.prototype.ki=function(t,e){return Es.resolve(this.Jc.ki(e))},t}(),Lc=function(){function t(t,e){var n=this;this.Xc={},this.io=new oi(0),this.ro=!1,this.ro=!0,this.Ii=t(this),this.fo=new Pc(this),this.Ti=new _a,this.wo=function(t,e){return new Dc(t,function(t){return n.Ii.Zc(t)})}(this.Ti),this.Kt=new ca(e),this.Eo=new Sc(this.Kt)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.Lo=function(){return this.ro=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Tr",{get:function(){return this.ro},enumerable:!1,configurable:!0}),t.prototype.yo=function(){},t.prototype.Vo=function(){},t.prototype.jo=function(){return this.Ti},t.prototype.Ko=function(t){var e=this.Xc[t.R()];return e||(e=new kc(this.Ti,this.Ii),this.Xc[t.R()]=e),e},t.prototype.Dr=function(){return this.fo},t.prototype.Fr=function(){return this.wo},t.prototype.Wo=function(){return this.Eo},t.prototype.runTransaction=function(t,e,n){var r=this;kr("MemoryPersistence","Starting transaction:",t);var i=new Rc(this.io.next());return this.Ii.ta(),n(i).next(function(t){return r.Ii.ea(i).next(function(){return t})}).Mn().then(function(t){return i.ps(),t})},t.prototype.na=function(t,e){return Es.Bn(Object.values(this.Xc).map(function(n){return function(){return n.ki(t,e)}}))},t}(),Rc=function(t){function e(e){var n=this;return(n=t.call(this)||this).vs=e,n}return Object(Sr.c)(e,t),e}(Vs),Vc=function(){function t(t){this.persistence=t,this.sa=new Nc,this.ia=null}return t.ra=function(e){return new t(e)},Object.defineProperty(t.prototype,"oa",{get:function(){if(this.ia)return this.ia;throw Lr()},enumerable:!1,configurable:!0}),t.prototype.sr=function(t,e,n){return this.sa.sr(n,e),this.oa.delete(n.toString()),Es.resolve()},t.prototype.rr=function(t,e,n){return this.sa.rr(n,e),this.oa.add(n.toString()),Es.resolve()},t.prototype.Oi=function(t,e){return this.oa.add(e.toString()),Es.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.sa.kc(e.targetId).forEach(function(t){return n.oa.add(t.toString())});var r=this.persistence.Dr();return r.cr(t,e.targetId).next(function(t){t.forEach(function(t){return n.oa.add(t.toString())})}).next(function(){return r.Yi(t,e)})},t.prototype.ta=function(){this.ia=new Set},t.prototype.ea=function(t){var e=this,n=this.persistence.Fr().Or();return Es.forEach(this.oa,function(r){var i=li.ft(r);return e.ca(t,i).next(function(t){t||n._i(i)})}).next(function(){return e.ia=null,n.apply(t)})},t.prototype.kr=function(t,e){var n=this;return this.ca(t,e).next(function(t){t?n.oa.delete(e.toString()):n.oa.add(e.toString())})},t.prototype.Zc=function(t){return 0},t.prototype.ca=function(t,e){var n=this;return Es.Bn([function(){return Es.resolve(n.sa.ki(e))},function(){return n.persistence.Dr().ki(t,e)},function(){return n.persistence.na(t,e)}])},t}();function Uc(t,e){return"firestore_clients_"+t+"_"+e}function Mc(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.A()&&(r+="_"+e.uid),r}function qc(t,e){return"firestore_targets_"+t+"_"+e}var Fc=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.aa=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),u=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(u=new Hr(i.error.code,i.error.message)),o?new t(e,n,i.state,u):(Dr("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.ua=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),zc=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.aa=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new Hr(r.error.code,r.error.message)),i?new t(e,r.state,o):(Dr("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.ua=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Gc=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.aa=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=ku(),u=0;i&&u<r.activeTargetIds.length;++u)i=ji(r.activeTargetIds[u]),o=o.add(r.activeTargetIds[u]);return i?new t(e,o):(Dr("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Bc=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.aa=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Dr("SharedClientState","Failed to parse online state: "+e),null)},t}(),Hc=function(){function t(){this.activeTargetIds=ku()}return t.prototype.ha=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.la=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.ua=function(){var t={activeTargetIds:this.activeTargetIds.rt(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Kc=function(){function t(t,e,n,r,i){this.window=t,this.eo=e,this.persistenceKey=n,this._a=r,this.fa=null,this.da=null,this.L=null,this.wa=this.Ea.bind(this),this.Ta=new yu(qr),this.Tr=!1,this.Ia=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ma=Uc(this.persistenceKey,this._a),this.Aa=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Ta=this.Ta.Ht(this._a,new Hc),this.Ra=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Pa=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.ya=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.ga=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Va=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.wa)}return t.jn=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(Sr.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,u,s,a,c,h=this;return Object(Sr.d)(this,function(f){switch(f.label){case 0:return[4,this.fa.Qo()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this._a&&(i=this.getItem(Uc(this.persistenceKey,r)))&&(o=Gc.aa(r,i))&&(this.Ta=this.Ta.Ht(o.clientId,o));for(this.pa(),(u=this.storage.getItem(this.ga))&&(s=this.ba(u))&&this.va(s),a=0,c=this.Ia;a<c.length;a++)this.Ea(c[a]);return this.Ia=[],this.window.addEventListener("unload",function(){return h.Lo()}),this.Tr=!0,[2]}})})},t.prototype.q=function(t){this.setItem(this.Aa,JSON.stringify(t))},t.prototype.Sa=function(){return this.Da(this.Ta)},t.prototype.Ca=function(t){var e=!1;return this.Ta.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.xa=function(t){this.Na(t,"pending")},t.prototype.Oa=function(t,e,n){this.Na(t,e,n),this.Fa(t)},t.prototype.ka=function(t){var e="not-current";if(this.Ca(t)){var n=this.storage.getItem(qc(this.persistenceKey,t));if(n){var r=zc.aa(t,n);r&&(e=r.state)}}return this.Ma.ha(t),this.pa(),e},t.prototype.La=function(t){this.Ma.la(t),this.pa()},t.prototype.$a=function(t){return this.Ma.activeTargetIds.has(t)},t.prototype.Ba=function(t){this.removeItem(qc(this.persistenceKey,t))},t.prototype.qa=function(t,e,n){this.Ua(t,e,n)},t.prototype.Qa=function(t,e,n){var r=this;e.forEach(function(t){r.Fa(t)}),this.currentUser=t,n.forEach(function(t){r.xa(t)})},t.prototype.Ka=function(t){this.ja(t)},t.prototype.Wa=function(){this.Ga()},t.prototype.Lo=function(){this.Tr&&(this.window.removeEventListener("storage",this.wa),this.removeItem(this.ma),this.Tr=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return kr("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){kr("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){kr("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Ea=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(kr("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ma)return void Dr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.eo.bo(function(){return Object(Sr.b)(e,void 0,void 0,function(){var t,e,r,i,o,u;return Object(Sr.d)(this,function(s){if(this.Tr){if(null!==n.key)if(this.Ra.test(n.key)){if(null==n.newValue)return t=this.za(n.key),[2,this.Ha(t,null)];if(e=this.Ja(n.key,n.newValue))return[2,this.Ha(e.clientId,e)]}else if(this.Pa.test(n.key)){if(null!==n.newValue&&(r=this.Ya(n.key,n.newValue)))return[2,this.Xa(r)]}else if(this.ya.test(n.key)){if(null!==n.newValue&&(i=this.Za(n.key,n.newValue)))return[2,this.tu(i)]}else if(n.key===this.ga){if(null!==n.newValue&&(o=this.ba(n.newValue)))return[2,this.va(o)]}else if(n.key===this.Aa)(u=function(t){var e=oi.U;if(null!=t)try{var n=JSON.parse(t);Rr("number"==typeof n),e=n}catch(t){Dr("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==oi.U&&this.L(u);else if(n.key===this.Va)return[2,this.fa.eu()]}else this.Ia.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Ma",{get:function(){return this.Ta.get(this._a)},enumerable:!1,configurable:!0}),t.prototype.pa=function(){this.setItem(this.ma,this.Ma.ua())},t.prototype.Na=function(t,e,n){var r=new Fc(this.currentUser,t,e,n),i=Mc(this.persistenceKey,this.currentUser,t);this.setItem(i,r.ua())},t.prototype.Fa=function(t){var e=Mc(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.ja=function(t){this.storage.setItem(this.ga,JSON.stringify({clientId:this._a,onlineState:t}))},t.prototype.Ua=function(t,e,n){var r=qc(this.persistenceKey,t),i=new zc(t,e,n);this.setItem(r,i.ua())},t.prototype.Ga=function(){this.setItem(this.Va,"value-not-used")},t.prototype.za=function(t){var e=this.Ra.exec(t);return e?e[1]:null},t.prototype.Ja=function(t,e){var n=this.za(t);return Gc.aa(n,e)},t.prototype.Ya=function(t,e){var n=this.Pa.exec(t),r=Number(n[1]);return Fc.aa(new Zr(void 0!==n[2]?n[2]:null),r,e)},t.prototype.Za=function(t,e){var n=this.ya.exec(t),r=Number(n[1]);return zc.aa(r,e)},t.prototype.ba=function(t){return Bc.aa(t)},t.prototype.Xa=function(t){return Object(Sr.b)(this,void 0,void 0,function(){return Object(Sr.d)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.fa.nu(t.batchId,t.state,t.error)]:(kr("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.tu=function(t){return this.fa.su(t.targetId,t.state,t.error)},t.prototype.Ha=function(t,e){var n=this,r=e?this.Ta.Ht(t,e):this.Ta.remove(t),i=this.Da(this.Ta),o=this.Da(r),u=[],s=[];return o.forEach(function(t){i.has(t)||u.push(t)}),i.forEach(function(t){o.has(t)||s.push(t)}),this.fa.iu(u,s).then(function(){n.Ta=r})},t.prototype.va=function(t){this.Ta.get(t.clientId)&&this.da(t.onlineState)},t.prototype.Da=function(t){var e=ku();return t.forEach(function(t,n){e=e.ye(n.activeTargetIds)}),e},t}(),Jc=function(){function t(){this.ru=new Hc,this.ou={},this.da=null,this.L=null}return t.prototype.xa=function(t){},t.prototype.Oa=function(t,e,n){},t.prototype.ka=function(t){return this.ru.ha(t),this.ou[t]||"not-current"},t.prototype.qa=function(t,e,n){this.ou[t]=e},t.prototype.La=function(t){this.ru.la(t)},t.prototype.$a=function(t){return this.ru.activeTargetIds.has(t)},t.prototype.Ba=function(t){delete this.ou[t]},t.prototype.Sa=function(){return this.ru.activeTargetIds},t.prototype.Ca=function(t){return this.ru.activeTargetIds.has(t)},t.prototype.start=function(){return this.ru=new Hc,Promise.resolve()},t.prototype.Qa=function(t,e,n){},t.prototype.Ka=function(t){},t.prototype.Lo=function(){},t.prototype.q=function(t){},t.prototype.Wa=function(){},t}(),Wc=function(){function t(){}return t.prototype.cu=function(t){},t.prototype.Lo=function(){},t}(),Xc=function(){function t(){var t=this;this.au=function(){return t.uu()},this.hu=function(){return t.lu()},this._u=[],this.fu()}return t.prototype.cu=function(t){this._u.push(t)},t.prototype.Lo=function(){window.removeEventListener("online",this.au),window.removeEventListener("offline",this.hu)},t.prototype.fu=function(){window.addEventListener("online",this.au),window.addEventListener("offline",this.hu)},t.prototype.uu=function(){kr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this._u;t<e.length;t++)(0,e[t])(0)},t.prototype.lu=function(){kr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this._u;t<e.length;t++)(0,e[t])(1)},t.jn=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Yc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Qc=function(){function t(t){this.du=t.du,this.wu=t.wu}return t.prototype.Eu=function(t){this.Tu=t},t.prototype.Iu=function(t){this.mu=t},t.prototype.onMessage=function(t){this.Au=t},t.prototype.close=function(){this.wu()},t.prototype.send=function(t){this.du(t)},t.prototype.Ru=function(){this.Tu()},t.prototype.Pu=function(t){this.mu(t)},t.prototype.yu=function(t){this.Au(t)},t}(),$c=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.I=e.I,n}return Object(Sr.c)(e,t),e.prototype.Du=function(t,e,n,r){return new Promise(function(i,o){var u=new Ar;u.listenOnce(Er.COMPLETE,function(){try{switch(u.getLastErrorCode()){case _r.NO_ERROR:var e=u.getResponseJson();kr("Connection","XHR received:",JSON.stringify(e)),i(e);break;case _r.TIMEOUT:kr("Connection",'RPC "'+t+'" timed out'),o(new Hr(Br.DEADLINE_EXCEEDED,"Request time out"));break;case _r.HTTP_ERROR:var n=u.getStatus();if(kr("Connection",'RPC "'+t+'" failed with status:',n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson().error;if(r&&r.status&&r.message){var s=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Br).indexOf(e)>=0?e:Br.UNKNOWN}(r.status);o(new Hr(s,r.message))}else o(new Hr(Br.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new Hr(Br.UNAVAILABLE,"Connection failed."));break;default:Lr()}}finally{kr("Connection",'RPC "'+t+'" completed.')}});var s=JSON.stringify(r);u.send(e,"POST",s,n,15)})},e.prototype.xu=function(t,e){var n=[this.Vu,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new br,i=we(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.T.projectId+"/databases/"+this.T.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.I};this.Su(o.initMessageHeaders,e),Object(T.l)()||Object(T.n)()||Object(T.j)()||Object(T.k)()||Object(T.o)()||Object(T.i)()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=n.join("");kr("Connection","Creating WebChannel: "+u,o);var s=r.createWebChannel(u,o),a=!1,c=!1,h=new Qc({du:function(t){c?kr("Connection","Not sending because WebChannel is closed:",t):(a||(kr("Connection","Opening WebChannel transport."),s.open(),a=!0),kr("Connection","WebChannel sending:",t),s.send(t))},wu:function(){return s.close()}}),f=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return f(s,jr.EventType.OPEN,function(){c||kr("Connection","WebChannel transport opened.")}),f(s,jr.EventType.CLOSE,function(){c||(c=!0,kr("Connection","WebChannel transport closed"),h.Pu())}),f(s,jr.EventType.ERROR,function(t){c||(c=!0,Cr("Connection","WebChannel transport errored:",t),h.Pu(new Hr(Br.UNAVAILABLE,"The operation could not be completed")))}),f(s,jr.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];Rr(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){kr("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=cu[t];if(void 0!==e)return vu(e)}(i),u=r.message;void 0===o&&(o=Br.INTERNAL,u="Unknown error status: "+i+" with message "+r.message),c=!0,h.Pu(new Hr(o,u)),s.close()}else kr("Connection","WebChannel received:",n),h.yu(n)}}),f(i,Tr.STAT_EVENT,function(t){10===t.stat?kr("Connection","Detected buffering proxy"):11===t.stat&&kr("Connection","Detected no buffering proxy")}),setTimeout(function(){h.Ru()},0),h},e}(function(){function t(t){this.gu=t,this.T=t.T,this.Vu=(t.ssl?"https":"http")+"://"+t.host,this.pu="projects/"+this.T.projectId+"/databases/"+this.T.database+"/documents"}return t.prototype.bu=function(t,e,n,r){var i=this.vu(t,e);kr("RestConnection","Sending: ",i,n);var o={};return this.Su(o,r),this.Du(t,i,o,n).then(function(t){return kr("RestConnection","Received: ",t),t},function(e){throw Cr("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Cu=function(t,e,n,r){return this.bu(t,e,n,r)},t.prototype.Su=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.2",t["Content-Type"]="text/plain",e)for(var n in e.V)e.V.hasOwnProperty(n)&&(t[n]=e.V[n])},t.prototype.vu=function(t,e){return this.Vu+"/v1/"+e+":"+Yc[t]},t}());function Zc(){return"undefined"!=typeof window?window:null}function th(){return"undefined"!=typeof document?document:null}function eh(t){return new Ku(t,!0)}var nh=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.eo=t,this.ds=e,this.Nu=n,this.Ou=r,this.Fu=i,this.ku=0,this.Mu=null,this.Lu=Date.now(),this.reset()}return t.prototype.reset=function(){this.ku=0},t.prototype.$u=function(){this.ku=this.Fu},t.prototype.Bu=function(t){var e=this;this.cancel();var n=Math.floor(this.ku+this.qu()),r=Math.max(0,Date.now()-this.Lu),i=Math.max(0,n-r);i>0&&kr("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.ku+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Mu=this.eo.Ir(this.ds,i,function(){return e.Lu=Date.now(),t()}),this.ku*=this.Ou,this.ku<this.Nu&&(this.ku=this.Nu),this.ku>this.Fu&&(this.ku=this.Fu)},t.prototype.Uu=function(){null!==this.Mu&&(this.Mu.Ps(),this.Mu=null)},t.prototype.cancel=function(){null!==this.Mu&&(this.Mu.cancel(),this.Mu=null)},t.prototype.qu=function(){return(Math.random()-.5)*this.ku},t}(),rh=function(){function t(t,e,n,r,i,o){this.eo=t,this.Qu=n,this.Ku=r,this.ju=i,this.listener=o,this.state=0,this.Wu=0,this.Gu=null,this.stream=null,this.zu=new nh(t,e)}return t.prototype.Hu=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.Ju=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Yu()},t.prototype.stop=function(){return Object(Sr.b)(this,void 0,void 0,function(){return Object(Sr.d)(this,function(t){switch(t.label){case 0:return this.Hu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.Xu=function(){this.state=0,this.zu.reset()},t.prototype.Zu=function(){var t=this;this.Ju()&&null===this.Gu&&(this.Gu=this.eo.Ir(this.Qu,6e4,function(){return t.th()}))},t.prototype.eh=function(t){this.nh(),this.stream.send(t)},t.prototype.th=function(){return Object(Sr.b)(this,void 0,void 0,function(){return Object(Sr.d)(this,function(t){return this.Ju()?[2,this.close(0)]:[2]})})},t.prototype.nh=function(){this.Gu&&(this.Gu.cancel(),this.Gu=null)},t.prototype.close=function(t,e){return Object(Sr.b)(this,void 0,void 0,function(){return Object(Sr.d)(this,function(n){switch(n.label){case 0:return this.nh(),this.zu.cancel(),this.Wu++,3!==t?this.zu.reset():e&&e.code===Br.RESOURCE_EXHAUSTED?(Dr(e.toString()),Dr("Using maximum backoff delay to prevent overloading the backend."),this.zu.$u()):e&&e.code===Br.UNAUTHENTICATED&&this.ju.v(),null!==this.stream&&(this.sh(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Iu(e)];case 1:return n.sent(),[2]}})})},t.prototype.sh=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.ih(this.Wu),n=this.Wu;this.ju.getToken().then(function(e){t.Wu===n&&t.rh(e)},function(n){e(function(){var e=new Hr(Br.UNKNOWN,"Fetching auth token failed: "+n.message);return t.oh(e)})})},t.prototype.rh=function(t){var e=this,n=this.ih(this.Wu);this.stream=this.ah(t),this.stream.Eu(function(){n(function(){return e.state=2,e.listener.Eu()})}),this.stream.Iu(function(t){n(function(){return e.oh(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.Yu=function(){var t=this;this.state=4,this.zu.Bu(function(){return Object(Sr.b)(t,void 0,void 0,function(){return Object(Sr.d)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.oh=function(t){return kr("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.ih=function(t){var e=this;return function(n){e.eo.ys(function(){return e.Wu===t?n():(kr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),ih=function(t){function e(e,n,r,i,o){var u=this;return(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).Kt=i,u}return Object(Sr.c)(e,t),e.prototype.ah=function(t){return this.Ku.xu("Listen",t)},e.prototype.onMessage=function(t){this.zu.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Lr()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.qt?(Rr(void 0===e||"string"==typeof e),Gr.fromBase64String(e||"")):(Rr(void 0===e||e instanceof Uint8Array),Gr.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),u=(s=e.targetChange.cause)&&function(t){var e=void 0===t.code?Br.UNKNOWN:vu(t.code);return new Hr(e,t.message||"")}(s);n=new Mu(r,i,o,u||null)}else if("documentChange"in e){i=ts(t,(r=e.documentChange).document.name),o=Yu(r.document.updateTime);var s=new qi({mapValue:{fields:r.document.fields}}),a=(u=new Bi(i,o,s,{}),r.targetIds||[]);n=new Vu(a,r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e)i=ts(t,(r=e.documentDelete).document),o=r.readTime?Yu(r.readTime):si.min(),s=new Hi(i,o),n=new Vu([],u=r.removedTargetIds||[],s.key,s);else if("documentRemove"in e)i=ts(t,(r=e.documentRemove).document),n=new Vu([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return Lr();var c=e.filter;i=new pu(r=c.count||0),n=new Uu(o=c.targetId,i)}return n}(this.Kt,t),n=function(t){if(!("targetChange"in t))return si.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?si.min():e.readTime?Yu(e.readTime):si.min()}(t);return this.listener.uh(e,n)},e.prototype.hh=function(t){var e={};e.database=rs(this.Kt),e.addTarget=function(t,e){var n,r=e.target;return(n=Qi(r)?{documents:cs(t,r)}:{query:hs(t,r)}).targetId=e.targetId,e.resumeToken.o()>0?n.resumeToken=Wu(t,e.resumeToken):e.Mt.u(si.min())>0&&(n.readTime=Ju(t,e.Mt.G())),n}(this.Kt,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Lr()}}(0,e.kt);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.eh(e)},e.prototype.lh=function(t){var e={};e.database=rs(this.Kt),e.removeTarget=t,this.eh(e)},e}(rh),oh=function(t){function e(e,n,r,i,o){var u=this;return(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).Kt=i,u._h=!1,u}return Object(Sr.c)(e,t),Object.defineProperty(e.prototype,"fh",{get:function(){return this._h},enumerable:!1,configurable:!0}),e.prototype.start=function(){this._h=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.sh=function(){this._h&&this.dh([])},e.prototype.ah=function(t){return this.Ku.xu("Write",t)},e.prototype.onMessage=function(t){if(Rr(!!t.streamToken),this.lastStreamToken=t.streamToken,this._h){this.zu.reset();var e=function(t,e){return t&&t.length>0?(Rr(void 0!==e),t.map(function(t){return function(t,e){var n=Yu(t.updateTime?t.updateTime:e);n.isEqual(si.min())&&(n=Yu(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new Wo(n,r)}(t,e)})):[]}(t.writeResults,t.commitTime),n=Yu(t.commitTime);return this.listener.wh(n,e)}return Rr(!t.writeResults||0===t.writeResults.length),this._h=!0,this.listener.Eh()},e.prototype.Th=function(){var t={};t.database=rs(this.Kt),this.eh(t)},e.prototype.dh=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return ss(e.Kt,t)})};this.eh(n)},e}(rh),uh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Ku=n,i.Kt=r,i.Ih=!1,i}return Object(Sr.c)(e,t),e.prototype.mh=function(){if(this.Ih)throw new Hr(Br.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.bu=function(t,e,n){var r=this;return this.mh(),this.credentials.getToken().then(function(i){return r.Ku.bu(t,e,n,i)}).catch(function(t){throw t.code===Br.UNAUTHENTICATED&&r.credentials.v(),t})},e.prototype.Cu=function(t,e,n){var r=this;return this.mh(),this.credentials.getToken().then(function(i){return r.Ku.Cu(t,e,n,i)}).catch(function(t){throw t.code===Br.UNAUTHENTICATED&&r.credentials.v(),t})},e.prototype.terminate=function(){this.Ih=!1},e}(function(){}),sh=function(){function t(t,e){this.fs=t,this.da=e,this.state="Unknown",this.Ah=0,this.Rh=null,this.Ph=!0}return t.prototype.yh=function(){var t=this;0===this.Ah&&(this.gh("Unknown"),this.Rh=this.fs.Ir("online_state_timeout",1e4,function(){return t.Rh=null,t.Vh("Backend didn't respond within 10 seconds."),t.gh("Offline"),Promise.resolve()}))},t.prototype.ph=function(t){"Online"===this.state?this.gh("Unknown"):(this.Ah++,this.Ah>=1&&(this.bh(),this.Vh("Connection failed 1 times. Most recent error: "+t.toString()),this.gh("Offline")))},t.prototype.set=function(t){this.bh(),this.Ah=0,"Online"===t&&(this.Ph=!1),this.gh(t)},t.prototype.gh=function(t){t!==this.state&&(this.state=t,this.da(t))},t.prototype.Vh=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Ph?(Dr(e),this.Ph=!1):kr("OnlineStateTracker",e)},t.prototype.bh=function(){null!==this.Rh&&(this.Rh.cancel(),this.Rh=null)},t}(),ah=function(t,e,n,r,i){var o=this;this.Sh=t,this.Dh=e,this.fs=n,this.Ch={},this.xh=[],this.Nh=new Map,this.Oh=new Set,this.Fh=[],this.kh=i,this.kh.cu(function(t){n.ys(function(){return Object(Sr.b)(o,void 0,void 0,function(){return Object(Sr.d)(this,function(t){switch(t.label){case 0:return gh(this)?(kr("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(Sr.b)(this,void 0,void 0,function(){var e;return Object(Sr.d)(this,function(n){switch(n.label){case 0:return(e=Vr(t)).Oh.add(4),[4,hh(e)];case 1:return n.sent(),e.Mh.set("Unknown"),e.Oh.delete(4),[4,ch(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Mh=new sh(n,r)};function ch(t){return Object(Sr.b)(this,void 0,void 0,function(){var e,n;return Object(Sr.d)(this,function(r){switch(r.label){case 0:if(!gh(t))return[3,4];e=0,n=t.Fh,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function hh(t){return Object(Sr.b)(this,void 0,void 0,function(){var e,n;return Object(Sr.d)(this,function(r){switch(r.label){case 0:e=0,n=t.Fh,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function fh(t,e){var n=Vr(t);n.Nh.has(e.targetId)||(n.Nh.set(e.targetId,e),yh(n)?vh(n):Dh(n).Ju()&&ph(n,e))}function lh(t,e){var n=Vr(t),r=Dh(n);n.Nh.delete(e),r.Ju()&&dh(n,e),0===n.Nh.size&&(r.Ju()?r.Zu():gh(n)&&n.Mh.set("Unknown"))}function ph(t,e){t.Lh.cn(e.targetId),Dh(t).hh(e)}function dh(t,e){t.Lh.cn(e),Dh(t).lh(e)}function vh(t){t.Lh=new Fu({Sn:function(e){return t.Ch.Sn(e)},Dn:function(e){return t.Nh.get(e)||null}}),Dh(t).start(),t.Mh.yh()}function yh(t){return gh(t)&&!Dh(t).Hu()&&t.Nh.size>0}function gh(t){return 0===Vr(t).Oh.size}function bh(t){t.Lh=void 0}function mh(t){return Object(Sr.b)(this,void 0,void 0,function(){return Object(Sr.d)(this,function(e){return t.Nh.forEach(function(e,n){ph(t,e)}),[2]})})}function wh(t,e){return Object(Sr.b)(this,void 0,void 0,function(){return Object(Sr.d)(this,function(n){return bh(t),yh(t)?(t.Mh.ph(e),vh(t)):t.Mh.set("Unknown"),[2]})})}function Ih(t,e,n){return Object(Sr.b)(this,void 0,void 0,function(){var r,i,o;return Object(Sr.d)(this,function(u){switch(u.label){case 0:if(t.Mh.set("Online"),!(e instanceof Mu&&2===e.state&&e.cause))return[3,6];u.label=1;case 1:return u.trys.push([1,3,,5]),[4,function(t,e){return Object(Sr.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Sr.d)(this,function(u){switch(u.label){case 0:n=e.cause,r=0,i=e.targetIds,u.label=1;case 1:return r<i.length?t.Nh.has(o=i[r])?[4,t.Ch.$h(o,n)]:[3,3]:[3,5];case 2:u.sent(),t.Nh.delete(o),t.Lh.removeTarget(o),u.label=3;case 3:u.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return u.sent(),[3,5];case 3:return r=u.sent(),kr("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Oh(t,r)];case 4:return u.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Vu?t.Lh.wn(e):e instanceof Uu?t.Lh.yn(e):t.Lh.In(e),n.isEqual(si.min()))return[3,13];u.label=7;case 7:return u.trys.push([7,11,,13]),[4,yc(t.Sh)];case 8:return i=u.sent(),n.u(i)>=0?[4,function(t,e){var n=t.Lh.pn(e);return n.Fe.forEach(function(n,r){if(n.resumeToken.o()>0){var i=t.Nh.get(r);i&&t.Nh.set(r,i.$t(n.resumeToken,e))}}),n.ke.forEach(function(e){var n=t.Nh.get(e);if(n){t.Nh.set(e,n.$t(Gr.h,n.Mt)),dh(t,e);var r=new ko(n.target,e,1,n.sequenceNumber);ph(t,r)}}),t.Ch.Bh(n)}(t,n)]:[3,10];case 9:u.sent(),u.label=10;case 10:return[3,13];case 11:return kr("RemoteStore","Failed to raise snapshot:",o=u.sent()),[4,Oh(t,o)];case 12:return u.sent(),[3,13];case 13:return[2]}})})}function Oh(t,e,n){return Object(Sr.b)(this,void 0,void 0,function(){var r=this;return Object(Sr.d)(this,function(i){switch(i.label){case 0:if(!Ns(e))throw e;return t.Oh.add(1),[4,hh(t)];case 1:return i.sent(),t.Mh.set("Offline"),n||(n=function(){return yc(t.Sh)}),t.fs.bo(function(){return Object(Sr.b)(r,void 0,void 0,function(){return Object(Sr.d)(this,function(e){switch(e.label){case 0:return kr("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Oh.delete(1),[4,ch(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function _h(t,e){return e().catch(function(n){return Oh(t,n,e)})}function Eh(t){return Object(Sr.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(Sr.d)(this,function(u){switch(u.label){case 0:e=Vr(t),n=Ch(e),r=e.xh.length>0?e.xh[e.xh.length-1].batchId:-1,u.label=1;case 1:if(!function(t){return gh(t)&&t.xh.length<10}(e))return[3,7];u.label=2;case 2:return u.trys.push([2,4,,6]),[4,mc(e.Sh,r)];case 3:return null===(i=u.sent())?(0===e.xh.length&&n.Zu(),[3,7]):(r=i.batchId,function(t,e){t.xh.push(e);var n=Ch(t);n.Ju()&&n.fh&&n.dh(e.mutations)}(e,i),[3,6]);case 4:return o=u.sent(),[4,Oh(e,o)];case 5:return u.sent(),[3,6];case 6:return[3,1];case 7:return Th(e)&&jh(e),[2]}})})}function Th(t){return gh(t)&&!Ch(t).Hu()&&t.xh.length>0}function jh(t){Ch(t).start()}function Ah(t){return Object(Sr.b)(this,void 0,void 0,function(){return Object(Sr.d)(this,function(e){return Ch(t).Th(),[2]})})}function Sh(t){return Object(Sr.b)(this,void 0,void 0,function(){var e,n,r;return Object(Sr.d)(this,function(i){for(e=Ch(t),n=0,r=t.xh;n<r.length;n++)e.dh(r[n].mutations);return[2]})})}function Nh(t,e,n){return Object(Sr.b)(this,void 0,void 0,function(){var r,i;return Object(Sr.d)(this,function(o){switch(o.label){case 0:return r=t.xh.shift(),i=aa.from(r,e,n),[4,_h(t,function(){return t.Ch.qh(i)})];case 1:return o.sent(),[4,Eh(t)];case 2:return o.sent(),[2]}})})}function xh(t,e){return Object(Sr.b)(this,void 0,void 0,function(){return Object(Sr.d)(this,function(n){switch(n.label){case 0:return e&&Ch(t).fh?[4,function(t,e){return Object(Sr.b)(this,void 0,void 0,function(){var n,r;return Object(Sr.d)(this,function(i){switch(i.label){case 0:return du(r=e.code)&&r!==Br.ABORTED?(n=t.xh.shift(),Ch(t).Xu(),[4,_h(t,function(){return t.Ch.Uh(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,Eh(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Th(t)&&jh(t),[2]}})})}function kh(t,e){return Object(Sr.b)(this,void 0,void 0,function(){var n;return Object(Sr.d)(this,function(r){switch(r.label){case 0:return n=Vr(t),e?(n.Oh.delete(2),[4,ch(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Oh.add(2),[4,hh(n)]);case 3:r.sent(),n.Mh.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function Dh(t){var e=this;return t.Qh||(t.Qh=function(t,e,n){var r=Vr(t);return r.mh(),new ih(e,r.Ku,r.credentials,r.Kt,n)}(t.Dh,t.fs,{Eu:mh.bind(null,t),Iu:wh.bind(null,t),uh:Ih.bind(null,t)}),t.Fh.push(function(n){return Object(Sr.b)(e,void 0,void 0,function(){return Object(Sr.d)(this,function(e){switch(e.label){case 0:return n?(t.Qh.Xu(),yh(t)?vh(t):t.Mh.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Qh.stop()];case 2:e.sent(),bh(t),e.label=3;case 3:return[2]}})})})),t.Qh}function Ch(t){var e=this;return t.Kh||(t.Kh=function(t,e,n){var r=Vr(t);return r.mh(),new oh(e,r.Ku,r.credentials,r.Kt,n)}(t.Dh,t.fs,{Eu:Ah.bind(null,t),Iu:xh.bind(null,t),Eh:Sh.bind(null,t),wh:Nh.bind(null,t)}),t.Fh.push(function(n){return Object(Sr.b)(e,void 0,void 0,function(){return Object(Sr.d)(this,function(e){switch(e.label){case 0:return n?(t.Kh.Xu(),[4,Eh(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kh.stop()];case 3:e.sent(),t.xh.length>0&&(kr("RemoteStore","Stopping write stream with "+t.xh.length+" pending writes"),t.xh=[]),e.label=4;case 4:return[2]}})})})),t.Kh}var Ph=function(){this.jh=void 0,this.listeners=[]},Lh=function(){this.queries=new xa(function(t){return jo(t)},To),this.onlineState="Unknown",this.Wh=new Set};function Rh(t,e){return Object(Sr.b)(this,void 0,void 0,function(){var n,r,i,o,u,s,a;return Object(Sr.d)(this,function(c){switch(c.label){case 0:if(n=Vr(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new Ph),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),u=o,[4,n.Gh(r)];case 2:return u.jh=c.sent(),[3,4];case 3:return s=c.sent(),a=Ls(s,"Initialization of query '"+Ao(e.query)+"' failed"),[2,void e.onError(a)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zh(n.onlineState),o.jh&&e.Hh(o.jh)&&qh(n),[2]}})})}function Vh(t,e){return Object(Sr.b)(this,void 0,void 0,function(){var n,r,i,o,u;return Object(Sr.d)(this,function(s){return n=Vr(t),i=!1,(o=n.queries.get(r=e.query))&&(u=o.listeners.indexOf(e))>=0&&(o.listeners.splice(u,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.Jh(r))]:[2]})})}function Uh(t,e){for(var n=Vr(t),r=!1,i=0,o=e;i<o.length;i++){var u=o[i],s=n.queries.get(u.query);if(s){for(var a=0,c=s.listeners;a<c.length;a++)c[a].Hh(u)&&(r=!0);s.jh=u}}r&&qh(n)}function Mh(t,e,n){var r=Vr(t),i=r.queries.get(e);if(i)for(var o=0,u=i.listeners;o<u.length;o++)u[o].onError(n);r.queries.delete(e)}function qh(t){t.Wh.forEach(function(t){t.next()})}var Fh=function(){function t(t,e,n){this.query=t,this.Yh=e,this.Xh=!1,this.Zh=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hh=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Pu(t.query,t.docs,t.De,e,t.Ce,t.fromCache,t.xe,!0)}var o=!1;return this.Xh?this.tl(t)&&(this.Yh.next(t),o=!0):this.el(t,this.onlineState)&&(this.nl(t),o=!0),this.Zh=t,o},t.prototype.onError=function(t){this.Yh.error(t)},t.prototype.zh=function(t){this.onlineState=t;var e=!1;return this.Zh&&!this.Xh&&this.el(this.Zh,t)&&(this.nl(this.Zh),e=!0),e},t.prototype.el=function(t,e){return!t.fromCache||!(this.options.sl&&"Offline"!==e||t.docs.nt()&&"Offline"!==e)},t.prototype.tl=function(t){return t.docChanges.length>0||!!(t.xe||this.Zh&&this.Zh.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.nl=function(t){t=Pu.Oe(t.query,t.docs,t.Ce,t.fromCache),this.Xh=!0,this.Yh.next(t)},t}(),zh=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.il=function(){return"metadata"in this.payload},t}(),Gh=function(){function t(t){this.Kt=t}return t.prototype.yc=function(t){return ts(this.Kt,t)},t.prototype.gc=function(t){return t.metadata.exists?us(this.Kt,t.document,!1):new Hi(this.yc(t.metadata.name),this.Vc(t.metadata.readTime))},t.prototype.Vc=function(t){return Yu(t)},t}();!function(){function t(t,e,n){this.rl=t,this.Sh=e,this.Kt=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.ol=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.cl=function(t){for(var e=new Map,n=new Gh(this.Kt),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var u=n.yc(o.metadata.name),s=0,a=o.metadata.queries;s<a.length;s++){var c=a[s],h=(e.get(c)||Nu()).add(u);e.set(c,h)}}return e},t.prototype.complete=function(){return Object(Sr.b)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(Sr.d)(this,function(o){switch(o.label){case 0:return[4,jc(this.Sh,new Gh(this.Kt),this.documents,this.rl.id)];case 1:t=o.sent(),e=this.cl(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,Ac(this.Sh,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new ac(Object.assign({},this.progress),t))]}})})}}();var Bh=function(t){this.key=t},Hh=function(t){this.key=t},Kh=function(){function t(t,e){this.query=t,this.al=e,this.ul=null,this.qe=!1,this.hl=Nu(),this.Ce=Nu(),this.ll=No(t),this._l=new Du(this.ll)}return Object.defineProperty(t.prototype,"fl",{get:function(){return this.al},enumerable:!1,configurable:!0}),t.prototype.dl=function(t,e){var n=this,r=e?e.wl:new Cu,i=e?e._l:this._l,o=e?e.Ce:this.Ce,u=i,s=!1,a=go(this.query)&&i.size===this.query.limit?i.last():null,c=bo(this.query)&&i.size===this.query.limit?i.first():null;if(t.Zt(function(t,e){var h=i.get(t),f=e instanceof Bi?e:null;f&&(f=So(n.query,f)?f:null);var l=!!h&&n.Ce.has(h.key),p=!!f&&(f.bt||n.Ce.has(f.key)&&f.hasCommittedMutations),d=!1;h&&f?h.data().isEqual(f.data())?l!==p&&(r.track({type:3,doc:f}),d=!0):n.El(h,f)||(r.track({type:2,doc:f}),d=!0,(a&&n.ll(f,a)>0||c&&n.ll(f,c)<0)&&(s=!0)):!h&&f?(r.track({type:0,doc:f}),d=!0):h&&!f&&(r.track({type:1,doc:h}),d=!0,(a||c)&&(s=!0)),d&&(f?(u=u.add(f),o=p?o.add(t):o.delete(t)):(u=u.delete(t),o=o.delete(t)))}),go(this.query)||bo(this.query))for(;u.size>this.query.limit;){var h=go(this.query)?u.last():u.first();u=u.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{_l:u,wl:r,_c:s,Ce:o}},t.prototype.El=function(t,e){return t.bt&&e.hasCommittedMutations&&!e.bt},t.prototype.Ei=function(t,e,n){var r=this,i=this._l;this._l=t._l,this.Ce=t.Ce;var o=t.wl.Se();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Lr()}};return n(t)-n(e)}(t.type,e.type)||r.ll(t.doc,e.doc)}),this.Tl(n);var u=e?this.Il():[],s=0===this.hl.size&&this.qe?1:0,a=s!==this.ul;return this.ul=s,0!==o.length||a?{snapshot:new Pu(this.query,t._l,i,o,t.Ce,0===s,a,!1),ml:u}:{ml:u}},t.prototype.zh=function(t){return this.qe&&"Offline"===t?(this.qe=!1,this.Ei({_l:this._l,wl:new Cu,Ce:this.Ce,_c:!1},!1)):{ml:[]}},t.prototype.Al=function(t){return!this.al.has(t)&&!!this._l.has(t)&&!this._l.get(t).bt},t.prototype.Tl=function(t){var e=this;t&&(t.Ue.forEach(function(t){return e.al=e.al.add(t)}),t.Qe.forEach(function(t){}),t.Ke.forEach(function(t){return e.al=e.al.delete(t)}),this.qe=t.qe)},t.prototype.Il=function(){var t=this;if(!this.qe)return[];var e=this.hl;this.hl=Nu(),this._l.forEach(function(e){t.Al(e.key)&&(t.hl=t.hl.add(e.key))});var n=[];return e.forEach(function(e){t.hl.has(e)||n.push(new Hh(e))}),this.hl.forEach(function(t){e.has(t)||n.push(new Bh(t))}),n},t.prototype.Rl=function(t){this.al=t.Pc,this.hl=Nu();var e=this.dl(t.documents);return this.Ei(e,!0)},t.prototype.Pl=function(){return Pu.Oe(this.query,this._l,this.Ce,0===this.ul)},t}(),Jh=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Wh=function(t){this.key=t,this.yl=!1},Xh=function(){function t(t,e,n,r,i,o){this.Sh=t,this.gl=e,this.Vl=n,this.pl=r,this.currentUser=i,this.bl=o,this.vl={},this.Sl=new xa(function(t){return jo(t)},To),this.Dl=new Map,this.Cl=[],this.xl=new yu(li.J),this.Nl=new Map,this.Ol=new Nc,this.Fl={},this.kl=new Map,this.Ml=Ma.Bi(),this.onlineState="Unknown",this.Ll=void 0}return Object.defineProperty(t.prototype,"$l",{get:function(){return!0===this.Ll},enumerable:!1,configurable:!0}),t}();function Yh(t,e){return Object(Sr.b)(this,void 0,void 0,function(){var n,r,i,o,u;return Object(Sr.d)(this,function(s){switch(s.label){case 0:return n=jf(t),(i=n.Sl.get(e))?(n.pl.ka(i.targetId),r=i.view.Pl(),[3,4]):[3,1];case 1:return[4,wc(n.Sh,_o(e))];case 2:return o=s.sent(),u=n.pl.ka(o.targetId),[4,Qh(n,e,o.targetId,"current"===u)];case 3:r=s.sent(),n.$l&&fh(n.gl,o),s.label=4;case 4:return[2,r]}})})}function Qh(t,e,n,r){return Object(Sr.b)(this,void 0,void 0,function(){var i,o,u,s,a,c;return Object(Sr.d)(this,function(h){switch(h.label){case 0:return t.Bl=function(e,n,r){return function(t,e,n,r){return Object(Sr.b)(this,void 0,void 0,function(){var i,o,u;return Object(Sr.d)(this,function(s){switch(s.label){case 0:return(i=e.view.dl(n))._c?[4,Oc(t.Sh,e.query,!1).then(function(t){return e.view.dl(t.documents,i)})]:[3,2];case 1:i=s.sent(),s.label=2;case 2:return o=r&&r.Fe.get(e.targetId),u=e.view.Ei(i,t.$l,o),[2,(ff(t,e.targetId,u.ml),u.snapshot)]}})})}(t,e,n,r)},[4,Oc(t.Sh,e,!0)];case 1:return i=h.sent(),o=new Kh(e,i.Pc),u=o.dl(i.documents),s=Ru.Be(n,r&&"Offline"!==t.onlineState),a=o.Ei(u,t.$l,s),ff(t,n,a.ml),c=new Jh(e,n,o),[2,(t.Sl.set(e,c),t.Dl.has(n)?t.Dl.get(n).push(e):t.Dl.set(n,[e]),a.snapshot)]}})})}function $h(t,e){return Object(Sr.b)(this,void 0,void 0,function(){var n,r,i;return Object(Sr.d)(this,function(o){switch(o.label){case 0:return n=Vr(t),r=n.Sl.get(e),(i=n.Dl.get(r.targetId)).length>1?[2,(n.Dl.set(r.targetId,i.filter(function(t){return!To(t,e)})),void n.Sl.delete(e))]:n.$l?(n.pl.La(r.targetId),n.pl.Ca(r.targetId)?[3,2]:[4,Ic(n.Sh,r.targetId,!1).then(function(){n.pl.Ba(r.targetId),lh(n.gl,r.targetId),cf(n,r.targetId)}).catch(Na)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return cf(n,r.targetId),[4,Ic(n.Sh,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function Zh(t,e,n){return Object(Sr.b)(this,void 0,void 0,function(){var r,i,o,u;return Object(Sr.d)(this,function(s){switch(s.label){case 0:r=Af(t),s.label=1;case 1:return s.trys.push([1,5,,6]),[4,function(t,e){var n,r=Vr(t),i=ui.now(),o=e.reduce(function(t,e){return t.add(e.key)},Nu());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Ic.Zo(t,o).next(function(o){n=o;for(var u=[],s=0,a=e;s<a.length;s++){var c=a[s],h=tu(c,n.get(c.key));null!=h&&u.push(new iu(c.key,h,zi(h.proto.mapValue),Xo.exists(!0)))}return r.Ho.Pi(t,i,u,e)})}).then(function(t){var e=t.Ns(n);return{batchId:t.batchId,oi:e}})}(r.Sh,e)];case 2:return i=s.sent(),r.pl.xa(i.batchId),function(t,e,n){var r=t.Fl[t.currentUser.R()];r||(r=new yu(qr)),r=r.Ht(e,n),t.Fl[t.currentUser.R()]=r}(r,i.batchId,n),[4,df(r,i.oi)];case 3:return s.sent(),[4,Eh(r.gl)];case 4:return s.sent(),[3,6];case 5:return o=s.sent(),u=Ls(o,"Failed to persist write"),n.reject(u),[3,6];case 6:return[2]}})})}function tf(t,e){return Object(Sr.b)(this,void 0,void 0,function(){var n,r;return Object(Sr.d)(this,function(i){switch(i.label){case 0:n=Vr(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,gc(n.Sh,e)];case 2:return r=i.sent(),e.Fe.forEach(function(t,e){var r=n.Nl.get(e);r&&(Rr(t.Ue.size+t.Qe.size+t.Ke.size<=1),t.Ue.size>0?r.yl=!0:t.Qe.size>0?Rr(r.yl):t.Ke.size>0&&(Rr(r.yl),r.yl=!1))}),[4,df(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Na(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function ef(t,e,n){var r=Vr(t);if(r.$l&&0===n||!r.$l&&1===n){var i=[];r.Sl.forEach(function(t,n){var r=n.view.zh(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=Vr(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zh(e)&&(r=!0)}),r&&qh(n)}(r.Vl,e),i.length&&r.vl.uh(i),r.onlineState=e,r.$l&&r.pl.Ka(e)}}function nf(t,e,n){return Object(Sr.b)(this,void 0,void 0,function(){var r,i,o,u,s,a;return Object(Sr.d)(this,function(c){switch(c.label){case 0:return(r=Vr(t)).pl.qa(e,"rejected",n),i=r.Nl.get(e),(o=i&&i.key)?(u=(u=new yu(li.J)).Ht(o,new Hi(o,si.min())),s=Nu().add(o),a=new Lu(si.min(),new Map,new mu(qr),u,s),[4,tf(r,a)]):[3,2];case 1:return c.sent(),r.xl=r.xl.remove(o),r.Nl.delete(e),pf(r),[3,4];case 2:return[4,Ic(r.Sh,e,!1).then(function(){return cf(r,e,n)}).catch(Na)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function rf(t,e){return Object(Sr.b)(this,void 0,void 0,function(){var n,r,i;return Object(Sr.d)(this,function(o){switch(o.label){case 0:n=Vr(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,vc(n.Sh,e)];case 2:return i=o.sent(),af(n,r,null),sf(n,r),n.pl.Oa(r,"acknowledged"),[4,df(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Na(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function of(t,e,n){return Object(Sr.b)(this,void 0,void 0,function(){var r,i;return Object(Sr.d)(this,function(o){switch(o.label){case 0:r=Vr(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Vr(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n.Ho.yi(t,e).next(function(e){return Rr(null!==e),r=e.keys(),n.Ho.xi(t,e)}).next(function(){return n.Ho.Fi(t)}).next(function(){return n.Ic.Zo(t,r)})})}(r.Sh,e)];case 2:return i=o.sent(),af(r,e,n),sf(r,e),r.pl.Oa(e,"rejected",n),[4,df(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Na(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function uf(t,e){return Object(Sr.b)(this,void 0,void 0,function(){var n,r,i,o,u;return Object(Sr.d)(this,function(s){switch(s.label){case 0:gh((n=Vr(t)).gl)||kr("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,function(t){var e=Vr(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.Ho.pi(t)})}(n.Sh)];case 2:return-1===(r=s.sent())?[2,void e.resolve()]:((i=n.kl.get(r)||[]).push(e),n.kl.set(r,i),[3,4]);case 3:return o=s.sent(),u=Ls(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(u),[3,4];case 4:return[2]}})})}function sf(t,e){(t.kl.get(e)||[]).forEach(function(t){t.resolve()}),t.kl.delete(e)}function af(t,e,n){var r=Vr(t),i=r.Fl[r.currentUser.R()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Fl[r.currentUser.R()]=i}}function cf(t,e,n){void 0===n&&(n=null),t.pl.La(e);for(var r=0,i=t.Dl.get(e);r<i.length;r++){var o=i[r];t.Sl.delete(o),n&&t.vl.ql(o,n)}t.Dl.delete(e),t.$l&&t.Ol.kc(e).forEach(function(e){t.Ol.ki(e)||hf(t,e)})}function hf(t,e){var n=t.xl.get(e);null!==n&&(lh(t.gl,n),t.xl=t.xl.remove(e),t.Nl.delete(n),pf(t))}function ff(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Bh?(t.Ol.sr(o.key,e),lf(t,o)):o instanceof Hh?(kr("SyncEngine","Document no longer in limbo: "+o.key),t.Ol.rr(o.key,e),t.Ol.ki(o.key)||hf(t,o.key)):Lr()}}function lf(t,e){var n=e.key;t.xl.get(n)||(kr("SyncEngine","New document in limbo: "+n),t.Cl.push(n),pf(t))}function pf(t){for(;t.Cl.length>0&&t.xl.size<t.bl;){var e=t.Cl.shift(),n=t.Ml.next();t.Nl.set(n,new Wh(e)),t.xl=t.xl.Ht(e,n),fh(t.gl,new ko(_o(yo(e.path)),n,2,oi.U))}}function df(t,e,n){return Object(Sr.b)(this,void 0,void 0,function(){var r,i,o,u;return Object(Sr.d)(this,function(s){switch(s.label){case 0:return r=Vr(t),i=[],o=[],u=[],r.Sl.nt()?[3,3]:(r.Sl.forEach(function(t,s){u.push(r.Bl(s,e,n).then(function(t){if(t){r.$l&&r.pl.qa(s.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=hc.cc(s.targetId,t);o.push(e)}}))}),[4,Promise.all(u)]);case 1:return s.sent(),r.vl.uh(i),[4,function(t,e){return Object(Sr.b)(this,void 0,void 0,function(){var n,r,i,o,u,s,a,c;return Object(Sr.d)(this,function(h){switch(h.label){case 0:n=Vr(t),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return Es.forEach(e,function(e){return Es.forEach(e.rc,function(r){return n.persistence.Ii.sr(t,e.targetId,r)}).next(function(){return Es.forEach(e.oc,function(r){return n.persistence.Ii.rr(t,e.targetId,r)})})})})];case 2:return h.sent(),[3,4];case 3:if(!Ns(r=h.sent()))throw r;return kr("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=(u=o[i]).targetId,u.fromCache||(a=n.dc.get(s),c=a.Bt(a.Mt),n.dc=n.dc.Ht(s,c));return[2]}})})}(r.Sh,o)];case 2:s.sent(),s.label=3;case 3:return[2]}})})}function vf(t,e){return Object(Sr.b)(this,void 0,void 0,function(){var n,r;return Object(Sr.d)(this,function(i){switch(i.label){case 0:return(n=Vr(t)).currentUser.isEqual(e)?[3,3]:(kr("SyncEngine","User change. New user:",e.R()),[4,dc(n.Sh,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.kl.forEach(function(t){t.forEach(function(t){t.reject(new Hr(Br.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.kl.clear()}(n),n.pl.Qa(e,r.Ac,r.Rc),[4,df(n,r.mc)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function yf(t,e){var n=Vr(t),r=n.Nl.get(e);if(r&&r.yl)return Nu().add(r.key);var i=Nu(),o=n.Dl.get(e);if(!o)return i;for(var u=0,s=o;u<s.length;u++){var a=n.Sl.get(s[u]);i=i.ye(a.view.fl)}return i}function gf(t,e){return Object(Sr.b)(this,void 0,void 0,function(){var n,r,i;return Object(Sr.d)(this,function(o){switch(o.label){case 0:return[4,Oc((n=Vr(t)).Sh,e.query,!0)];case 1:return r=o.sent(),i=e.view.Rl(r),[2,(n.$l&&ff(n,e.targetId,i.ml),i)]}})})}function bf(t){return Object(Sr.b)(this,void 0,void 0,function(){var e;return Object(Sr.d)(this,function(n){return[2,Ec((e=Vr(t)).Sh).then(function(t){return df(e,t)})]})})}function mf(t,e,n,r){return Object(Sr.b)(this,void 0,void 0,function(){var i,o;return Object(Sr.d)(this,function(u){switch(u.label){case 0:return[4,function(t,e){var n=Vr(t),r=Vr(n.Ho);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.gi(t,e).next(function(e){return e?n.Ic.Zo(t,e):Es.resolve(null)})})}((i=Vr(t)).Sh,e)];case 1:return null===(o=u.sent())?[3,6]:"pending"!==n?[3,3]:[4,Eh(i.gl)];case 2:return u.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(af(i,e,r||null),sf(i,e),function(t,e){Vr(Vr(t).Ho).Ni(e)}(i.Sh,e)):Lr(),u.label=4;case 4:return[4,df(i,o)];case 5:return u.sent(),[3,7];case 6:kr("SyncEngine","Cannot apply mutation batch with id: "+e),u.label=7;case 7:return[2]}})})}function wf(t,e){return Object(Sr.b)(this,void 0,void 0,function(){var n,r,i,o,u,s,a;return Object(Sr.d)(this,function(c){switch(c.label){case 0:return jf(n=Vr(t)),Af(n),!0!==e||!0===n.Ll?[3,3]:(r=n.pl.Sa(),[4,If(n,r.rt())]);case 1:return i=c.sent(),n.Ll=!0,[4,kh(n.gl,!0)];case 2:for(c.sent(),o=0,u=i;o<u.length;o++)fh(n.gl,u[o]);return[3,7];case 3:return!1!==e||!1===n.Ll?[3,7]:(s=[],a=Promise.resolve(),n.Dl.forEach(function(t,e){n.pl.$a(e)?s.push(e):a=a.then(function(){return cf(n,e),Ic(n.Sh,e,!0)}),lh(n.gl,e)}),[4,a]);case 4:return c.sent(),[4,If(n,s)];case 5:return c.sent(),function(t){var e=Vr(t);e.Nl.forEach(function(t,n){lh(e.gl,n)}),e.Ol.Mc(),e.Nl=new Map,e.xl=new yu(li.J)}(n),n.Ll=!1,[4,kh(n.gl,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function If(t,e,n){return Object(Sr.b)(this,void 0,void 0,function(){var n,r,i,o,u,s,a,c,h,f,l,p,d;return Object(Sr.d)(this,function(v){switch(v.label){case 0:n=Vr(t),r=[],i=[],o=0,u=e,v.label=1;case 1:return o<u.length?(a=void 0,(c=n.Dl.get(s=u[o]))&&0!==c.length?[4,wc(n.Sh,_o(c[0]))]:[3,7]):[3,13];case 2:a=v.sent(),h=0,f=c,v.label=3;case 3:return h<f.length?(l=n.Sl.get(f[h]),[4,gf(n,l)]):[3,6];case 4:(p=v.sent()).snapshot&&i.push(p.snapshot),v.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,_c(n.Sh,s)];case 8:return d=v.sent(),[4,wc(n.Sh,d)];case 9:return a=v.sent(),[4,Qh(n,Of(d),s,!1)];case 10:v.sent(),v.label=11;case 11:r.push(a),v.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vl.uh(i),r)]}})})}function Of(t){return vo(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function _f(t){var e=Vr(t);return Vr(Vr(e.Sh).persistence).Qo()}function Ef(t,e,n,r){return Object(Sr.b)(this,void 0,void 0,function(){var i,o,u;return Object(Sr.d)(this,function(s){switch(s.label){case 0:return(i=Vr(t)).Ll?(kr("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Dl.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Ec(i.Sh)];case 3:return o=s.sent(),u=Lu.$e(e,"current"===n),[4,df(i,o,u)];case 4:return s.sent(),[3,8];case 5:return[4,Ic(i.Sh,e,!0)];case 6:return s.sent(),cf(i,e,r),[3,8];case 7:Lr(),s.label=8;case 8:return[2]}})})}function Tf(t,e,n){return Object(Sr.b)(this,void 0,void 0,function(){var r,i,o,u,s,a,c,h,f;return Object(Sr.d)(this,function(l){switch(l.label){case 0:if(!(r=jf(t)).Ll)return[3,10];i=0,o=e,l.label=1;case 1:return i<o.length?r.Dl.has(u=o[i])?(kr("SyncEngine","Adding an already active target "+u),[3,5]):[4,_c(r.Sh,u)]:[3,6];case 2:return s=l.sent(),[4,wc(r.Sh,s)];case 3:return a=l.sent(),[4,Qh(r,Of(s),a.targetId,!1)];case 4:l.sent(),fh(r.gl,a),l.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(Sr.d)(this,function(e){switch(e.label){case 0:return r.Dl.has(t)?[4,Ic(r.Sh,t,!1).then(function(){lh(r.gl,t),cf(r,t)}).catch(Na)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},h=0,f=n,l.label=7;case 7:return h<f.length?[5,c(f[h])]:[3,10];case 8:l.sent(),l.label=9;case 9:return h++,[3,7];case 10:return[2]}})})}function jf(t){var e=Vr(t);return e.gl.Ch.Bh=tf.bind(null,e),e.gl.Ch.Sn=yf.bind(null,e),e.gl.Ch.$h=nf.bind(null,e),e.vl.uh=Uh.bind(null,e.Vl),e.vl.ql=Mh.bind(null,e.Vl),e}function Af(t){var e=Vr(t);return e.gl.Ch.qh=rf.bind(null,e),e.gl.Ch.Uh=of.bind(null,e),e}var Sf=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(Sr.b)(this,void 0,void 0,function(){return Object(Sr.d)(this,function(e){switch(e.label){case 0:return this.Kt=eh(t.gu.T),this.pl=this.Wl(t),this.persistence=this.Gl(t),[4,this.persistence.start()];case 1:return e.sent(),this.zl=this.Hl(t),this.Sh=this.Jl(t),[2]}})})},t.prototype.Hl=function(t){return null},t.prototype.Jl=function(t){return pc(this.persistence,new fc,t.Yl,this.Kt)},t.prototype.Gl=function(t){return new Lc(Vc.ra,this.Kt)},t.prototype.Wl=function(t){return new Jc},t.prototype.terminate=function(){return Object(Sr.b)(this,void 0,void 0,function(){return Object(Sr.d)(this,function(t){switch(t.label){case 0:return this.zl&&this.zl.stop(),[4,this.pl.Lo()];case 1:return t.sent(),[4,this.persistence.Lo()];case 2:return t.sent(),[2]}})})},t}(),Nf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Xl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(Sr.c)(e,t),e.prototype.initialize=function(e){return Object(Sr.b)(this,void 0,void 0,function(){return Object(Sr.d)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Tc(this.Sh)];case 2:return n.sent(),[4,this.Xl.initialize(this,e)];case 3:return n.sent(),[4,Af(this.Xl.fa)];case 4:return n.sent(),[4,Eh(this.Xl.gl)];case 5:return n.sent(),[2]}})})},e.prototype.Jl=function(t){return pc(this.persistence,new fc,t.Yl,this.Kt)},e.prototype.Hl=function(t){return new Ka(this.persistence.Ii._r,t.fs)},e.prototype.Gl=function(t){var e=sc(t.gu.T,t.gu.persistenceKey),n=void 0!==this.cacheSizeBytes?Sa.Xs(this.cacheSizeBytes):Sa.ei;return new ic(this.synchronizeTabs,e,t.clientId,n,t.fs,Zc(),th(),this.Kt,this.pl,!!this.forceOwnership)},e.prototype.Wl=function(t){return new Jc},e}(Sf),xf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Xl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(Sr.c)(e,t),e.prototype.initialize=function(e){return Object(Sr.b)(this,void 0,void 0,function(){var n,r=this;return Object(Sr.d)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Xl.fa,this.pl instanceof Kc?(this.pl.fa={nu:mf.bind(null,n),su:Ef.bind(null,n),iu:Tf.bind(null,n),Qo:_f.bind(null,n),eu:bf.bind(null,n)},[4,this.pl.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.Po(function(t){return Object(Sr.b)(r,void 0,void 0,function(){return Object(Sr.d)(this,function(e){switch(e.label){case 0:return[4,wf(this.Xl.fa,t)];case 1:return e.sent(),this.zl&&(t&&!this.zl.Tr?this.zl.start(this.Sh):t||this.zl.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Wl=function(t){var e=Zc();if(!Kc.jn(e))throw new Hr(Br.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=sc(t.gu.T,t.gu.persistenceKey);return new Kc(e,t.fs,n,t.clientId,t.Yl)},e}(Nf),kf=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(Sr.b)(this,void 0,void 0,function(){var n=this;return Object(Sr.d)(this,function(r){switch(r.label){case 0:return this.Sh?[3,2]:(this.Sh=t.Sh,this.pl=t.pl,this.Dh=this.Zl(e),this.gl=this.t_(e),this.Vl=this.e_(e),this.fa=this.n_(e,!t.synchronizeTabs),this.pl.da=function(t){return ef(n.fa,t,1)},this.gl.Ch.s_=vf.bind(null,this.fa),[4,kh(this.gl,this.fa.$l)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.e_=function(t){return new Lh},t.prototype.Zl=function(t){var e=eh(t.gu.T),n=new $c(t.gu);return function(t,e,n){return new uh(t,e,n)}(t.credentials,n,e)},t.prototype.t_=function(t){var e,n,r,i,o,u=this;return e=this.Sh,n=this.Dh,r=t.fs,i=function(t){return ef(u.fa,t,0)},o=Xc.jn()?new Xc:new Wc,new ah(e,n,r,i,o)},t.prototype.n_=function(t,e){return function(t,e,n,r,i,o,u){var s=new Xh(t,e,n,r,i,o);return u&&(s.Ll=!0),s}(this.Sh,this.gl,this.Vl,this.pl,t.Yl,t.bl,e)},t.prototype.terminate=function(){return function(t){return Object(Sr.b)(this,void 0,void 0,function(){var e;return Object(Sr.d)(this,function(n){switch(n.label){case 0:return e=Vr(t),kr("RemoteStore","RemoteStore shutting down."),e.Oh.add(5),[4,hh(e)];case 1:return n.sent(),e.kh.Lo(),e.Mh.set("Unknown"),[2]}})})}(this.gl)},t}(),Df=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.i_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.i_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.r_=function(){this.muted=!0},t.prototype.i_=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),Cf=(function(){function t(t,e){var n=this;this.o_=t,this.Kt=e,this.metadata=new _s,this.buffer=new Uint8Array,this.c_=new TextDecoder("utf-8"),this.a_().then(function(t){t&&t.il()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.o_.cancel()},t.prototype.getMetadata=function(){return Object(Sr.b)(this,void 0,void 0,function(){return Object(Sr.d)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Kl=function(){return Object(Sr.b)(this,void 0,void 0,function(){return Object(Sr.d)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.a_())]}})})},t.prototype.a_=function(){return Object(Sr.b)(this,void 0,void 0,function(){var t,e,n,r;return Object(Sr.d)(this,function(i){switch(i.label){case 0:return[4,this.u_()];case 1:return null===(t=i.sent())?[2,null]:(e=this.c_.decode(t),n=Number(e),isNaN(n)&&this.h_("length string ("+e+") is not valid number"),[4,this.l_(n)]);case 2:return r=i.sent(),[2,new zh(JSON.parse(r),t.length+n)]}})})},t.prototype.__=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.u_=function(){return Object(Sr.b)(this,void 0,void 0,function(){var t,e;return Object(Sr.d)(this,function(n){switch(n.label){case 0:return this.__()<0?[4,this.f_()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.__())<0&&this.h_("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.l_=function(t){return Object(Sr.b)(this,void 0,void 0,function(){var e;return Object(Sr.d)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.f_()]:[3,3];case 1:n.sent()&&this.h_("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.c_.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.h_=function(t){throw this.o_.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.f_=function(){return Object(Sr.b)(this,void 0,void 0,function(){var t,e;return Object(Sr.d)(this,function(n){switch(n.label){case 0:return[4,this.o_.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Hr(Br.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.d_=new fi(t)}return t.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},t}()),Pf=function(t){this._methodName=t};function Lf(t,e,n){if(!n)throw new Hr(Br.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Rf(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Hr(Br.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Vf(t,e,n,r){if(!0===e&&!0===r)throw new Hr(Br.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Uf(t){if(!li.Et(t))throw new Hr(Br.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Mf(t){if(li.Et(t))throw new Hr(Br.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function qf(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Lr()}function Ff(t,e){if("_delegate"in t&&(t=t._),!(t instanceof e)){if(e.name===t.constructor.name)throw new Hr(Br.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=qf(t);throw new Hr(Br.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function zf(t,e){if(e<=0)throw new Hr(Br.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Gf=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Hr(Br.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Hr(Br.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Vf("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Bf=new Map,Hf=function(){function t(t,e){this.w_="(lite)",this.E_=new Gf({}),this.T_=!1,t instanceof $r?(this.I_=t,this.m_=new ei):(this.A_=t,this.I_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Hr(Br.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $r(t.options.projectId)}(t),this.m_=new ni(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.A_)throw new Hr(Br.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"R_",{get:function(){return this.T_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"P_",{get:function(){return void 0!==this.y_},enumerable:!1,configurable:!0}),t.prototype.g_=function(t){if(this.T_)throw new Hr(Br.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.E_=new Gf(t),void 0!==t.credentials&&(this.m_=function(t){if(!t)return new ei;switch(t.type){case"gapi":var e=t.client;return Rr(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new ii(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new Hr(Br.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.V_=function(){return this.E_},t.prototype.p_=function(){return this.T_=!0,this.E_},t.prototype._delete=function(){return this.y_||(this.y_=this.b_()),this.y_},t.prototype.b_=function(){return(t=Bf.get(this))&&(kr("ComponentProvider","Removing Datastore"),Bf.delete(this),t.terminate()),Promise.resolve();var t},t}(),Kf=function(){function t(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.S_.path.ot()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Wf(this.firestore,this.v_,this.S_.path.Z())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.S_)},t}(),Jf=function(){function t(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.C_)},t}(),Wf=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,yo(r))||this).firestore=e,i.D_=r,i.type="collection",i}return Object(Sr.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.C_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.C_.path.ot()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.D_.Z();return t.nt()?null:new Kf(this.firestore,null,new li(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.D_)},e}(Jf);function Xf(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof Jr&&(t=t._),Lf("collection","path",e),t instanceof Hf)return Mf(n=ci.ct.apply(ci,Object(Sr.g)([e],r))),new Wf(t,null,n);if(!(t instanceof Kf||t instanceof Wf))throw new Hr(Br.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Mf(n=ci.ct.apply(ci,Object(Sr.g)([t.path],r)).child(ci.ct(e))),new Wf(t.firestore,null,n)}function Yf(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof Jr&&(t=t._),1===arguments.length&&(e=Mr.t()),Lf("doc","path",e),t instanceof Hf)return Uf(n=ci.ct.apply(ci,Object(Sr.g)([e],r))),new Kf(t,null,new li(n));if(!(t instanceof Kf||t instanceof Wf))throw new Hr(Br.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Uf(n=t.D_.child(ci.ct.apply(ci,Object(Sr.g)([e],r)))),new Kf(t.firestore,t instanceof Wf?t.v_:null,new li(n))}function Qf(t,e){return t instanceof Jr&&(t=t._),e instanceof Jr&&(e=e._),(t instanceof Kf||t instanceof Wf)&&(e instanceof Kf||e instanceof Wf)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function $f(t,e){return t instanceof Jr&&(t=t._),e instanceof Jr&&(e=e._),t instanceof Jf&&e instanceof Jf&&t.firestore===e.firestore&&To(t.C_,e.C_)&&t.v_===e.v_}var Zf=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Hr(Br.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Hr(Br.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},t.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},t.prototype.K=function(t){return qr(this.x_,t.x_)||qr(this.N_,t.N_)},t}(),tl=/^__.*__$/,el=function(){function t(t,e,n){this.data=t,this.zt=e,this.fieldTransforms=n}return t.prototype.O_=function(t,e){return null!==this.zt?new iu(t,this.data,this.zt,e,this.fieldTransforms):new ru(t,this.data,e,this.fieldTransforms)},t}(),nl=function(){function t(t,e,n){this.data=t,this.zt=e,this.fieldTransforms=n}return t.prototype.O_=function(t,e){return new iu(t,this.data,this.zt,e,this.fieldTransforms)},t}();function rl(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Lr()}}var il=function(){function t(t,e,n,r,i,o){this.settings=t,this.T=e,this.Kt=n,this.ignoreUndefinedProperties=r,void 0===i&&this.F_(),this.fieldTransforms=i||[],this.zt=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),t.prototype.M_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.T,this.Kt,this.ignoreUndefinedProperties,this.fieldTransforms,this.zt)},t.prototype.L_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.q_(t),r},t.prototype.U_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.F_(),r},t.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},t.prototype.K_=function(t){return El(t,this.settings.methodName,this.settings.j_||!1,this.path,this.settings.W_)},t.prototype.contains=function(t){return void 0!==this.zt.find(function(e){return t.st(e)})||void 0!==this.fieldTransforms.find(function(e){return t.st(e.field)})},t.prototype.F_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},t.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if(rl(this.k_)&&tl.test(t))throw this.K_('Document fields cannot begin and end with "__"')},t}(),ol=function(){function t(t,e,n){this.T=t,this.ignoreUndefinedProperties=e,this.Kt=n||eh(t)}return t.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new il({k_:t,methodName:e,W_:n,path:fi.at(),B_:!1,j_:r},this.T,this.Kt,this.ignoreUndefinedProperties)},t}();function ul(t){var e=t.p_(),n=eh(t.I_);return new ol(t.I_,!!e.ignoreUndefinedProperties,n)}function sl(t,e,n,r,i,o){void 0===o&&(o={});var u=t.G_(o.merge||o.mergeFields?2:0,e,n,i);wl("Data must be an object, but it was:",u,r);var s,a,c=bl(r,u);if(o.merge)s=new yi(u.zt),a=u.fieldTransforms;else if(o.mergeFields){for(var h=[],f=0,l=o.mergeFields;f<l.length;f++){var p=Il(e,l[f],n);if(!u.contains(p))throw new Hr(Br.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");Tl(h,p)||h.push(p)}s=new yi(h),a=u.fieldTransforms.filter(function(t){return s.It(t.field)})}else s=null,a=u.fieldTransforms;return new el(new qi(c),s,a)}var al=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Sr.c)(e,t),e.prototype.z_=function(t){if(2!==t.k_)throw t.K_(1===t.k_?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.zt.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Pf);function cl(t,e,n){return new il({k_:3,W_:e.settings.W_,methodName:t._methodName,B_:n},e.T,e.Kt,e.ignoreUndefinedProperties)}var hl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Sr.c)(e,t),e.prototype.z_=function(t){return new Jo(t.path,new Mo)},e.prototype.isEqual=function(t){return t instanceof e},e}(Pf),fl=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Object(Sr.c)(e,t),e.prototype.z_=function(t){var e=cl(this,t,!0),n=this.H_.map(function(t){return gl(t,e)}),r=new qo(n);return new Jo(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Pf),ll=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Object(Sr.c)(e,t),e.prototype.z_=function(t){var e=cl(this,t,!0),n=this.H_.map(function(t){return gl(t,e)}),r=new zo(n);return new Jo(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Pf),pl=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).J_=n,r}return Object(Sr.c)(e,t),e.prototype.z_=function(t){var e=new Bo(t.Kt,Po(t.Kt,this.J_));return new Jo(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Pf);function dl(t,e,n,r){var i=t.G_(1,e,n);wl("Data must be an object, but it was:",i,r);var o=[],u=new Fi;di(r,function(t,r){var s=_l(e,t,n);r instanceof Jr&&(r=r._);var a=i.U_(s);if(r instanceof al)o.push(s);else{var c=gl(r,a);null!=c&&(o.push(s),u.set(s,c))}});var s=new yi(o);return new nl(u.yt(),s,i.fieldTransforms)}function vl(t,e,n,r,i,o){var u=t.G_(1,e,n),s=[Il(e,r,n)],a=[i];if(o.length%2!=0)throw new Hr(Br.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)s.push(Il(e,o[c])),a.push(o[c+1]);for(var h=[],f=new Fi,l=s.length-1;l>=0;--l)if(!Tl(h,s[l])){var p=s[l],d=a[l];d instanceof Jr&&(d=d._);var v=u.U_(p);if(d instanceof al)h.push(p);else{var y=gl(d,v);null!=y&&(h.push(p),f.set(p,y))}}var g=new yi(h);return new nl(f.yt(),g,u.fieldTransforms)}function yl(t,e,n,r){return void 0===r&&(r=!1),gl(n,t.G_(r?4:3,e))}function gl(t,e){if(t instanceof Jr&&(t=t._),ml(t))return wl("Unsupported field value:",e,t),bl(t,e);if(t instanceof Pf)return function(t,e){if(!rl(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");var n=t.z_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.zt.push(e.path),t instanceof Array){if(e.settings.B_&&4!==e.k_)throw e.K_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var u=gl(o[i],e.Q_(r));null==u&&(u={nullValue:"NULL_VALUE"}),n.push(u),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof Jr&&(t=t._),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Po(e.Kt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=ui.fromDate(t);return{timestampValue:Ju(e.Kt,n)}}if(t instanceof ui)return n=new ui(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Ju(e.Kt,n)};if(t instanceof Zf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Kr)return{bytesValue:Wu(e.Kt,t.l)};if(t instanceof Kf){var r=t.firestore.I_;if(!r.isEqual(n=e.T))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Qu(t.firestore.I_||e.T,t.S_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.K_("Unsupported field value: "+qf(t))}(t,e)}function bl(t,e){var n={};return vi(t)?e.path&&e.path.length>0&&e.zt.push(e.path):di(t,function(t,r){var i=gl(r,e.L_(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function ml(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof ui||t instanceof Zf||t instanceof Kr||t instanceof Kf||t instanceof Pf)}function wl(t,e,n){if(!ml(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=qf(n);throw e.K_("an object"===r?t+" a custom object":t+" "+r)}}function Il(t,e,n){if(e instanceof Jr&&(e=e._),e instanceof Cf)return e.d_;if("string"==typeof e)return _l(t,e);throw El("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Ol=new RegExp("[~\\*/\\[\\]]");function _l(t,e,n){if(e.search(Ol)>=0)throw El("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Cf.bind.apply(Cf,Object(Sr.g)([void 0],e.split("."))))).d_}catch(r){throw El("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function El(t,e,n,r,i){var o=r&&!r.nt(),u=void 0!==i,s="Function "+e+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var a="";return(o||u)&&(a+=" (found",o&&(a+=" in field "+r),u&&(a+=" in document "+i),a+=")"),new Hr(Br.INVALID_ARGUMENT,(s+=". ")+t+a)}function Tl(t,e){return t.some(function(t){return t.isEqual(e)})}var jl=function(){function t(t){this.Dh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}return t.prototype.ef=function(t){return Object(Sr.b)(this,void 0,void 0,function(){var e,n=this;return Object(Sr.d)(this,function(r){switch(r.label){case 0:if(this.nf(),this.mutations.length>0)throw new Hr(Br.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(Sr.b)(this,void 0,void 0,function(){var n,r,i,o,u,s;return Object(Sr.d)(this,function(a){switch(a.label){case 0:return n=Vr(t),r=rs(n.Kt)+"/documents",i={documents:e.map(function(t){return Zu(n.Kt,t)})},[4,n.Cu("BatchGetDocuments",r,i)];case 1:return o=a.sent(),u=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){Rr(!!e.found);var n=ts(t,e.found.name),r=Yu(e.found.updateTime),i=new qi({mapValue:{fields:e.found.fields}});return new Bi(n,r,i,{})}(t,e):"missing"in e?function(t,e){Rr(!!e.missing),Rr(!!e.readTime);var n=ts(t,e.missing),r=Yu(e.readTime);return new Hi(n,r)}(t,e):Lr()}(n.Kt,t);u.set(e.key.toString(),e)}),s=[],[2,(e.forEach(function(t){var e=u.get(t.toString());Rr(!!e),s.push(e)}),s)]}})})}(this.Dh,t)];case 1:return[2,((e=r.sent()).forEach(function(t){t instanceof Hi||t instanceof Bi?n.sf(t):Lr()}),e)]}})})},t.prototype.set=function(t,e){this.write(e.O_(t,this.Gt(t))),this.tf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.O_(t,this.rf(t)))}catch(t){this.Z_=t}this.tf.add(t.toString())},t.prototype.delete=function(t){this.write(new fu(t,this.Gt(t))),this.tf.add(t.toString())},t.prototype.commit=function(){return Object(Sr.b)(this,void 0,void 0,function(){var t,e=this;return Object(Sr.d)(this,function(n){switch(n.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return t=this.Y_,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=li.ft(n);e.mutations.push(new lu(r,e.Gt(r)))}),[4,function(t,e){return Object(Sr.b)(this,void 0,void 0,function(){var n,r,i;return Object(Sr.d)(this,function(o){switch(o.label){case 0:return n=Vr(t),r=rs(n.Kt)+"/documents",i={writes:e.map(function(t){return ss(n.Kt,t)})},[4,n.bu("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.Dh,this.mutations)];case 1:return n.sent(),this.X_=!0,[2]}})})},t.prototype.sf=function(t){var e;if(t instanceof Bi)e=t.version;else{if(!(t instanceof Hi))throw Lr();e=si.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Hr(Br.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},t.prototype.Gt=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?Xo.updateTime(e):Xo.jt()},t.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(!this.tf.has(t.toString())&&e){if(e.isEqual(si.min()))throw new Hr(Br.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Xo.updateTime(e)}return Xo.exists(!0)},t.prototype.write=function(t){this.nf(),this.mutations.push(t)},t.prototype.nf=function(){},t}(),Al=function(){function t(t,e,n,r){this.fs=t,this.Dh=e,this.updateFunction=n,this.Ts=r,this.cf=5,this.zu=new nh(this.fs,"transaction_retry")}return t.prototype.run=function(){this.af()},t.prototype.af=function(){var t=this;this.zu.Bu(function(){return Object(Sr.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(Sr.d)(this,function(r){return t=new jl(this.Dh),(e=this.uf(t))&&e.then(function(e){n.fs.ys(function(){return t.commit().then(function(){n.Ts.resolve(e)}).catch(function(t){n.hf(t)})})}).catch(function(t){n.hf(t)}),[2]})})})},t.prototype.uf=function(t){try{var e=this.updateFunction(t);return!Ei(e)&&e.catch&&e.then?e:(this.Ts.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Ts.reject(t),null}},t.prototype.hf=function(t){var e=this;this.cf>0&&this.lf(t)?(this.cf-=1,this.fs.ys(function(){return e.af(),Promise.resolve()})):this.Ts.reject(t)},t.prototype.lf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!du(e)}return!1},t}(),Sl=function(){function t(t,e,n){var r=this;this.credentials=t,this.fs=e,this.gu=n,this.user=Zr.UNAUTHENTICATED,this.clientId=Mr.t(),this._f=function(){},this.N=new _s,this.credentials.S(function(t){kr("FirestoreClient","Received user=",t.uid),r.user=t,r._f(t),r.N.resolve()})}return t.prototype.getConfiguration=function(){return Object(Sr.b)(this,void 0,void 0,function(){return Object(Sr.d)(this,function(t){switch(t.label){case 0:return[4,this.N.promise];case 1:return[2,(t.sent(),{fs:this.fs,gu:this.gu,clientId:this.clientId,credentials:this.credentials,Yl:this.user,bl:100})]}})})},t.prototype.ff=function(t){var e=this;this._f=t,this.N.promise.then(function(){return e._f(e.user)})},t.prototype.df=function(){if(this.fs.wf)throw new Hr(Br.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.fs.Ef();var e=new _s;return this.fs.Tf(function(){return Object(Sr.b)(t,void 0,void 0,function(){var t,n;return Object(Sr.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.D(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Ls(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function Nl(t,e){return Object(Sr.b)(this,void 0,void 0,function(){var n,r,i=this;return Object(Sr.d)(this,function(o){switch(o.label){case 0:return t.fs.Af(),kr("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.Yl,t.ff(function(n){r.isEqual(n)||(r=n,t.fs.bo(function(){return Object(Sr.b)(i,void 0,void 0,function(){return Object(Sr.d)(this,function(t){switch(t.label){case 0:return[4,dc(e.Sh,n)];case 1:return t.sent(),[2]}})})}))}),e.persistence.yo(function(){return t.terminate()}),t.mf=e,[2]}})})}function xl(t,e){return Object(Sr.b)(this,void 0,void 0,function(){var n,r;return Object(Sr.d)(this,function(i){switch(i.label){case 0:return t.fs.Af(),[4,kl(t)];case 1:return n=i.sent(),kr("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.ff(function(n){return t.fs.bo(function(){return function(t,e){return Object(Sr.b)(this,void 0,void 0,function(){var n,r;return Object(Sr.d)(this,function(i){switch(i.label){case 0:return(n=Vr(t)).fs.Af(),kr("RemoteStore","RemoteStore received new credentials"),r=gh(n),n.Oh.add(3),[4,hh(n)];case 1:return i.sent(),r&&n.Mh.set("Unknown"),[4,n.Ch.s_(e)];case 2:return i.sent(),n.Oh.delete(3),[4,ch(n)];case 3:return i.sent(),[2]}})})}(e.gl,n)})}),t.If=e,[2]}})})}function kl(t){return Object(Sr.b)(this,void 0,void 0,function(){return Object(Sr.d)(this,function(e){switch(e.label){case 0:return t.mf?[3,2]:(kr("FirestoreClient","Using default OfflineComponentProvider"),[4,Nl(t,new Sf)]);case 1:e.sent(),e.label=2;case 2:return[2,t.mf]}})})}function Dl(t){return Object(Sr.b)(this,void 0,void 0,function(){return Object(Sr.d)(this,function(e){switch(e.label){case 0:return t.If?[3,2]:(kr("FirestoreClient","Using default OnlineComponentProvider"),[4,xl(t,new kf)]);case 1:e.sent(),e.label=2;case 2:return[2,t.If]}})})}function Cl(t){return kl(t).then(function(t){return t.persistence})}function Pl(t){return kl(t).then(function(t){return t.Sh})}function Ll(t){return Dl(t).then(function(t){return t.gl})}function Rl(t){return Dl(t).then(function(t){return t.fa})}function Vl(t){return Object(Sr.b)(this,void 0,void 0,function(){var e,n;return Object(Sr.d)(this,function(r){switch(r.label){case 0:return[4,Dl(t)];case 1:return e=r.sent(),[2,((n=e.Vl).Gh=Yh.bind(null,e.fa),n.Jh=$h.bind(null,e.fa),n)]}})})}function Ul(t,e,n){var r=this;void 0===n&&(n={});var i=new _s;return t.fs.ys(function(){return Object(Sr.b)(r,void 0,void 0,function(){var r;return Object(Sr.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Df({next:function(o){e.ys(function(){return Vh(t,u)});var s=o.docs.has(n);!s&&o.fromCache?i.reject(new Hr(Br.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new Hr(Br.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),u=new Fh(yo(n.path),o,{includeMetadataChanges:!0,sl:!0});return Rh(t,u)},[4,Vl(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.fs,e,n,i])]}})})}),i.promise}function Ml(t,e,n){var r=this;void 0===n&&(n={});var i=new _s;return t.fs.ys(function(){return Object(Sr.b)(r,void 0,void 0,function(){var r;return Object(Sr.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Df({next:function(n){e.ys(function(){return Vh(t,u)}),n.fromCache&&"server"===r.source?i.reject(new Hr(Br.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),u=new Fh(n,o,{includeMetadataChanges:!0,sl:!0});return Rh(t,u)},[4,Vl(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.fs,e,n,i])]}})})}),i.promise}var ql=function(){function t(){var t=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.zu=new nh(this,"async_queue_retry"),this.vf=function(){var e=th();e&&kr("AsyncQueue","Visibility state changed to "+e.visibilityState),t.zu.Uu()};var e=th();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.vf)}return Object.defineProperty(t.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),t.prototype.ys=function(t){this.enqueue(t)},t.prototype.Tf=function(t){this.Sf(),this.Df(t)},t.prototype.Ef=function(){if(!this.yf){this.yf=!0;var t=th();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf)}},t.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise(function(t){}):this.Df(t)},t.prototype.bo=function(t){var e=this;this.ys(function(){return e.Pf.push(t),e.Cf()})},t.prototype.Cf=function(){return Object(Sr.b)(this,void 0,void 0,function(){var t,e=this;return Object(Sr.d)(this,function(n){switch(n.label){case 0:if(0===this.Pf.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return n.sent(),this.Pf.shift(),this.zu.reset(),[3,4];case 3:if(!Ns(t=n.sent()))throw t;return kr("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Pf.length>0&&this.zu.Bu(function(){return e.Cf()}),n.label=5;case 5:return[2]}})})},t.prototype.Df=function(t){var e=this,n=this.Rf.then(function(){return e.pf=!0,t().catch(function(t){throw e.Vf=t,e.pf=!1,Dr("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.pf=!1,t})});return this.Rf=n,n},t.prototype.Ir=function(t,e,n){var r=this;this.Sf(),this.bf.indexOf(t)>-1&&(e=0);var i=Ps.Is(this,t,e,n,function(t){return r.xf(t)});return this.gf.push(i),i},t.prototype.Sf=function(){this.Vf&&Lr()},t.prototype.Af=function(){},t.prototype.Nf=function(){return Object(Sr.b)(this,void 0,void 0,function(){var t;return Object(Sr.d)(this,function(e){switch(e.label){case 0:return[4,t=this.Rf];case 1:e.sent(),e.label=2;case 2:if(t!==this.Rf)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.Of=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].ds===t)return!0;return!1},t.prototype.Ff=function(t){var e=this;return this.Nf().then(function(){e.gf.sort(function(t,e){return t.ws-e.ws});for(var n=0,r=e.gf;n<r.length;n++){var i=r[n];if(i.Ps(),"all"!==t&&i.ds===t)break}return e.Nf()})},t.prototype.kf=function(t){this.bf.push(t)},t.prototype.xf=function(t){var e=this.gf.indexOf(t);this.gf.splice(e,1)},t}(),Fl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Mf=new ql,r.w_="name"in e?e.name:"[DEFAULT]",r}return Object(Sr.c)(e,t),e.prototype.b_=function(){return this.Lf||Gl(this),this.Lf.terminate()},e}(Hf);function zl(t){return t.Lf||Gl(t),t.Lf.df(),t.Lf}function Gl(t){var e=t.p_(),n=function(t,e,n){return new Qr(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.I_,t.w_,e);t.Lf=new Sl(t.m_,t.Mf,n)}function Bl(t,e,n){var r=this,i=new _s;return t.fs.enqueue(function(){return Object(Sr.b)(r,void 0,void 0,function(){var r;return Object(Sr.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Nl(t,n)];case 1:return o.sent(),[4,xl(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Br.FAILED_PRECONDITION||t.code===Br.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function Hl(t){if(t.R_||t.P_)throw new Hr(Br.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Kl=function(){function t(){}return t.prototype.$f=function(t,e){switch(void 0===e&&(e="none"),Ai(t)){case 0:return null;case 1:return t.booleanValue;case 2:return mi(t.integerValue||t.doubleValue);case 3:return this.Bf(t.timestampValue);case 4:return this.qf(t,e);case 5:return t.stringValue;case 6:return this.Uf(wi(t.bytesValue));case 7:return this.Qf(t.referenceValue);case 8:return this.Kf(t.geoPointValue);case 9:return this.jf(t.arrayValue,e);case 10:return this.Wf(t.mapValue,e);default:throw Lr()}},t.prototype.Wf=function(t,e){var n=this,r={};return di(t.fields||{},function(t,i){r[t]=n.$f(i,e)}),r},t.prototype.Kf=function(t){return new Zf(mi(t.latitude),mi(t.longitude))},t.prototype.jf=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.$f(t,e)})},t.prototype.qf=function(t,e){switch(e){case"previous":var n=Oi(t);return null==n?null:this.$f(n,e);case"estimate":return this.Bf(_i(t));default:return null}},t.prototype.Bf=function(t){var e=bi(t);return new ui(e.seconds,e.nanos)},t.prototype.Gf=function(t,e){var n=ci.ct(t);Rr(Os(n));var r=new $r(n.get(1),n.get(3)),i=new li(n.X(5));return r.isEqual(e)||Dr("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),Jl=function(){function t(t,e,n,r,i){this.zf=t,this.Hf=e,this.S_=n,this.Jf=r,this.v_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Kf(this.zf,this.v_,this.S_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.Jf},t.prototype.data=function(){if(this.Jf){if(this.v_){var t=new Wl(this.zf,this.Hf,this.S_,this.Jf,null);return this.v_.fromFirestore(t)}return this.Hf.$f(this.Jf.vt())}},t.prototype.get=function(t){if(this.Jf){var e=this.Jf.data().field(Xl("DocumentSnapshot.get",t));if(null!==e)return this.Hf.$f(e)}},t}(),Wl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Sr.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Jl);function Xl(t,e){return"string"==typeof e?_l(t,e):e instanceof Jr?e._.d_:e.d_}function Yl(t){if(bo(t)&&0===t.Nt.length)throw new Hr(Br.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ql=function(){};function $l(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.Yf(t)}return t}var Zl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Xf=e,i.Zf=n,i.td=r,i.type="where",i}return Object(Sr.c)(e,t),e.prototype.Yf=function(t){var e=ul(t.firestore),n=function(t,e,n,r,i,o,u){var s;if(i.ht()){if("array-contains"===o||"array-contains-any"===o)throw new Hr(Br.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){up(u,o);for(var a=[],c=0,h=u;c<h.length;c++)a.push(op(r,t,h[c]));s={arrayValue:{values:a}}}else s=op(r,t,u)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||up(u,o),s=yl(n,"where",u,"in"===o||"not-in"===o);var f=$i.create(i,o,s);return function(t,e){if(e.xt()){var n=wo(t);if(null!==n&&!n.isEqual(e.field))throw new Hr(Br.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=mo(t);null!==r&&sp(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Hr(Br.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t.C_,0,e,t.firestore.I_,this.Xf,this.Zf,this.td);return new Jf(t.firestore,t.v_,function(t,e){var n=t.filters.concat([e]);return new po(t.path,t.collectionGroup,t.Nt.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,n))},e}(Ql),tp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Xf=e,r.ed=n,r.type="orderBy",r}return Object(Sr.c)(e,t),e.prototype.Yf=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Hr(Br.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Hr(Br.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new co(e,n);return function(t,e){if(null===mo(t)){var n=wo(t);null!==n&&sp(0,n,e.field)}}(t,r),r}(t.C_,this.Xf,this.ed);return new Jf(t.firestore,t.v_,function(t,e){var n=t.Nt.concat([e]);return new po(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,e))},e}(Ql),ep=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.nd=n,i.sd=r,i}return Object(Sr.c)(e,t),e.prototype.Yf=function(t){return new Jf(t.firestore,t.v_,Eo(t.C_,this.nd,this.sd))},e}(Ql),np=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.rd=n,i.od=r,i}return Object(Sr.c)(e,t),e.prototype.Yf=function(t){var e=ip(t,this.type,this.rd,this.od);return new Jf(t.firestore,t.v_,function(t,e){return new po(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t.C_,e))},e}(Ql),rp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.rd=n,i.od=r,i}return Object(Sr.c)(e,t),e.prototype.Yf=function(t){var e=ip(t,this.type,this.rd,this.od);return new Jf(t.firestore,t.v_,function(t,e){return new po(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t.C_,e))},e}(Ql);function ip(t,e,n,r){if(n[0]instanceof Jr&&(n[0]=n[0]._),n[0]instanceof Jl)return function(t,e,n,r,i){if(!r)throw new Hr(Br.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],u=0,s=Oo(t);u<s.length;u++){var a=s[u];if(a.field.ht())o.push(Pi(e,r.key));else{var c=r.field(a.field);if(Ii(c))throw new Hr(Br.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=a.field.ot();throw new Hr(Br.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new so(o,i)}(t.C_,t.firestore.I_,e,n[0].Jf,r);var i=ul(t.firestore);return function(t,e,n,r,i,o){var u=t.Nt;if(i.length>u.length)throw new Hr(Br.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],a=0;a<i.length;a++){var c=i[a];if(u[a].field.ht()){if("string"!=typeof c)throw new Hr(Br.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Io(t)&&-1!==c.indexOf("/"))throw new Hr(Br.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(ci.ct(c));if(!li.Et(h))throw new Hr(Br.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var f=new li(h);s.push(Pi(e,f))}else{var l=yl(n,r,c);s.push(l)}}return new so(s,o)}(t.C_,t.firestore.I_,i,e,n,r)}function op(t,e,n){if(n instanceof Jr&&(n=n._),"string"==typeof n){if(""===n)throw new Hr(Br.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Io(e)&&-1!==n.indexOf("/"))throw new Hr(Br.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(ci.ct(n));if(!li.Et(r))throw new Hr(Br.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Pi(t,new li(r))}if(n instanceof Kf)return Pi(t,n.S_);throw new Hr(Br.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+qf(n)+".")}function up(t,e){if(!Array.isArray(t)||0===t.length)throw new Hr(Br.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Hr(Br.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function sp(t,e,n){if(!n.isEqual(e))throw new Hr(Br.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function ap(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}function cp(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var hp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Sr.c)(e,t),e.prototype.Uf=function(t){return new Kr(t)},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return new Kf(this.firestore,null,e)},e}(Kl),fp=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),lp=function(t){function e(e,n,r,i,o,u){var s=this;return(s=t.call(this,e,n,r,i,u)||this).zf=e,s.ad=e,s.metadata=o,s}return Object(Sr.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.Jf){if(this.v_){var e=new pp(this.zf,this.Hf,this.S_,this.Jf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Hf.$f(this.Jf.vt(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Jf){var n=this.Jf.data().field(Xl("DocumentSnapshot.get",t));if(null!==n)return this.Hf.$f(n,e.serverTimestamps)}},e}(Jl),pp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Sr.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(lp),dp=function(){function t(t,e,n,r){this.zf=t,this.Hf=e,this.ud=r,this.metadata=new fp(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.ud.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this.ud.docs.forEach(function(r){t.call(e,new pp(n.zf,n.Hf,r.key,r,new fp(n.ud.Ce.has(r.key),n.ud.fromCache),n.query.v_))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this.ud.Ne)throw new Hr(Br.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.hd&&this.ld===e||(this.hd=function(t,e){if(t.ud.De.nt()){var n=0;return t.ud.docChanges.map(function(e){return{type:"added",doc:new pp(t.zf,t.Hf,e.doc.key,e.doc,new fp(t.ud.Ce.has(e.doc.key),t.ud.fromCache),t.query.v_),oldIndex:-1,newIndex:n++}})}var r=t.ud.De;return t.ud.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new pp(t.zf,t.Hf,e.doc.key,e.doc,new fp(t.ud.Ce.has(e.doc.key),t.ud.fromCache),t.query.v_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:vp(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this.ld=e),this.hd},t}();function vp(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Lr()}}function yp(t,e){return t instanceof lp&&e instanceof lp?t.zf===e.zf&&t.S_.isEqual(e.S_)&&(null===t.Jf?null===e.Jf:t.Jf.isEqual(e.Jf))&&t.v_===e.v_:t instanceof dp&&e instanceof dp&&t.zf===e.zf&&$f(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t.ud.isEqual(e.ud)}var gp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Sr.c)(e,t),e.prototype.Uf=function(t){return new Kr(t)},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return new Kf(this.firestore,null,e)},e}(Kl);function bp(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Ff(t,Kf);var o=Ff(t.firestore,Fl),u=ul(o);return e instanceof Jr&&(e=e._),wp(o,[("string"==typeof e||e instanceof Cf?vl(u,"updateDoc",t.S_,e,n,r):dl(u,"updateDoc",t.S_,e)).O_(t.S_,Xo.exists(!0))])}function mp(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof Jr&&(t=t._);var u={includeMetadataChanges:!1},s=0;"object"!=typeof i[s]||ap(i[s])||(u=i[s],s++);var a,c,h,f={includeMetadataChanges:u.includeMetadataChanges};if(ap(i[s])){var l=i[s];i[s]=null===(e=l.next)||void 0===e?void 0:e.bind(l),i[s+1]=null===(n=l.error)||void 0===n?void 0:n.bind(l),i[s+2]=null===(r=l.complete)||void 0===r?void 0:r.bind(l)}if(t instanceof Kf)c=Ff(t.firestore,Fl),h=yo(t.S_.path),a={next:function(e){i[s]&&i[s](Ip(c,t,e))},error:i[s+1],complete:i[s+2]};else{var p=Ff(t,Jf);c=Ff(p.firestore,Fl),h=p.C_;var d=new gp(c);a={next:function(t){i[s]&&i[s](new dp(c,d,p,t))},error:i[s+1],complete:i[s+2]},Yl(t.C_)}return function(t,e,n,r){var i=this,o=new Df(r),u=new Fh(e,o,n);return t.fs.ys(function(){return Object(Sr.b)(i,void 0,void 0,function(){var e;return Object(Sr.d)(this,function(n){switch(n.label){case 0:return e=Rh,[4,Vl(t)];case 1:return[2,e.apply(void 0,[n.sent(),u])]}})})}),function(){o.r_(),t.fs.ys(function(){return Object(Sr.b)(i,void 0,void 0,function(){var e;return Object(Sr.d)(this,function(n){switch(n.label){case 0:return e=Vh,[4,Vl(t)];case 1:return[2,e.apply(void 0,[n.sent(),u])]}})})})}}(zl(c),h,f,a)}function wp(t,e){return function(t,e){var n=this,r=new _s;return t.fs.ys(function(){return Object(Sr.b)(n,void 0,void 0,function(){var n;return Object(Sr.d)(this,function(i){switch(i.label){case 0:return n=Zh,[4,Rl(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(zl(t),e)}function Ip(t,e,n){var r=n.docs.get(e.S_),i=new gp(t);return new lp(t,i,e.S_,r,new fp(n.hasPendingWrites,n.fromCache),e.v_)}var Op=function(){function t(t,e){this.zf=t,this._d=e,this.fd=[],this.dd=!1,this.wd=ul(t)}return t.prototype.set=function(t,e,n){this.Ed();var r=_p(t,this.zf),i=cp(r.v_,e,n),o=sl(this.wd,"WriteBatch.set",r.S_,i,null!==r.v_,n);return this.fd.push(o.O_(r.S_,Xo.jt())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.Ed();var o,u=_p(t,this.zf);return e instanceof Jr&&(e=e._),o="string"==typeof e||e instanceof Cf?vl(this.wd,"WriteBatch.update",u.S_,e,n,r):dl(this.wd,"WriteBatch.update",u.S_,e),this.fd.push(o.O_(u.S_,Xo.exists(!0))),this},t.prototype.delete=function(t){this.Ed();var e=_p(t,this.zf);return this.fd=this.fd.concat(new fu(e.S_,Xo.jt())),this},t.prototype.commit=function(){return this.Ed(),this.dd=!0,this.fd.length>0?this._d(this.fd):Promise.resolve()},t.prototype.Ed=function(){if(this.dd)throw new Hr(Br.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function _p(t,e){if(t instanceof Jr&&(t=t._),t.firestore!==e)throw new Hr(Br.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Ep=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).zf=e,r}return Object(Sr.c)(e,t),e.prototype.get=function(e){var n=this,r=_p(e,this.zf),i=new gp(this.zf);return t.prototype.get.call(this,e).then(function(t){return new lp(n.zf,i,r.S_,t.Jf,new fp(!1,!1),r.v_)})},e}(function(){function t(t,e){this.zf=t,this.Td=e,this.wd=ul(t)}return t.prototype.get=function(t){var e=this,n=_p(t,this.zf),r=new hp(this.zf);return this.Td.ef([n.S_]).then(function(t){if(!t||1!==t.length)return Lr();var i=t[0];if(i instanceof Hi)return new Jl(e.zf,r,n.S_,null,n.v_);if(i instanceof Bi)return new Jl(e.zf,r,i.key,i,n.v_);throw Lr()})},t.prototype.set=function(t,e,n){var r=_p(t,this.zf),i=cp(r.v_,e,n),o=sl(this.wd,"Transaction.set",r.S_,i,null!==r.v_,n);return this.Td.set(r.S_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,u=_p(t,this.zf);return e instanceof Jr&&(e=e._),o="string"==typeof e||e instanceof Cf?vl(this.wd,"Transaction.update",u.S_,e,n,r):dl(this.wd,"Transaction.update",u.S_,e),this.Td.update(u.S_,o),this},t.prototype.delete=function(t){var e=_p(t,this.zf);return this.Td.delete(e.S_),this},t}()),Tp=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Hl(t=Ff(t,Fl));var n=zl(t),r=t.p_(),i=new kf;return Bl(n,i,new Nf(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Hl(t=Ff(t,Fl));var e=zl(t),n=t.p_(),r=new kf;return Bl(e,r,new xf(r,n.cacheSizeBytes))}(t._)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.R_&&!t.P_)throw new Hr(Br.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new _s;return t.Mf.Tf(function(){return Object(Sr.b)(e,void 0,void 0,function(){var e;return Object(Sr.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(Sr.b)(this,void 0,void 0,function(){return Object(Sr.d)(this,function(e){switch(e.label){case 0:return js.jn()?[4,js.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(sc(t.I_,t.w_))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._)},t}(),jp=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).Id=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof $r||(i.md=e),i}return Object(Sr.c)(e,t),Object.defineProperty(e.prototype,"I_",{get:function(){return this._.I_},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._.V_()),t)).merge,this._.g_(t)},e.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=Ff(t,Hf)).V_();"firestore.googleapis.com"!==r.host&&r.host!==e&&Cr("Host has been set in both settings() and useEmulator(), emulator host will be used"),t.g_(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this._,t,e)},e.prototype.enableNetwork=function(){return function(t){var e=this;return t.fs.enqueue(function(){return Object(Sr.b)(e,void 0,void 0,function(){var e,n;return Object(Sr.d)(this,function(r){switch(r.label){case 0:return[4,Cl(t)];case 1:return e=r.sent(),[4,Ll(t)];case 2:return n=r.sent(),[2,(e.Vo(!0),function(t){var e=Vr(t);return e.Oh.delete(0),ch(e)}(n))]}})})})}(zl(Ff(this._,Fl)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t.fs.enqueue(function(){return Object(Sr.b)(e,void 0,void 0,function(){var e,n;return Object(Sr.d)(this,function(r){switch(r.label){case 0:return[4,Cl(t)];case 1:return e=r.sent(),[4,Ll(t)];case 2:return n=r.sent(),[2,(e.Vo(!1),function(t){return Object(Sr.b)(this,void 0,void 0,function(){var e;return Object(Sr.d)(this,function(n){switch(n.label){case 0:return(e=Vr(t)).Oh.add(0),[4,hh(e)];case 1:return n.sent(),e.Mh.set("Offline"),[2]}})})}(n))]}})})})}(zl(Ff(this._,Fl)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Vf("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Id.enableMultiTabIndexedDbPersistence(this):this.Id.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Id.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.app._removeServiceInstance("firestore-exp"),this._._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new _s;return t.fs.ys(function(){return Object(Sr.b)(e,void 0,void 0,function(){var e;return Object(Sr.d)(this,function(r){switch(r.label){case 0:return e=uf,[4,Rl(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(zl(Ff(this._,Fl)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Df(e);return t.fs.ys(function(){return Object(Sr.b)(n,void 0,void 0,function(){var e;return Object(Sr.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Vr(t).Wh.add(e),e.next()},[4,Vl(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.r_(),t.fs.ys(function(){return Object(Sr.b)(n,void 0,void 0,function(){var e;return Object(Sr.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Vr(t).Wh.delete(e)},[4,Vl(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(zl(t=Ff(t,Fl)),ap(e)?e:{next:e})}(this._,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.md)throw new Hr(Br.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.md},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Mp(this,Xf(this._,t))}catch(t){throw kp(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new xp(this,Yf(this._,t))}catch(t){throw kp(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new Rp(this,function(t,e){if(t=Ff(t,Hf),Lf("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Hr(Br.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Jf(t,null,function(t){return new po(ci.at(),t)}(e))}(this._,t))}catch(t){throw kp(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new _s;return t.fs.ys(function(){return Object(Sr.b)(n,void 0,void 0,function(){var n;return Object(Sr.d)(this,function(i){switch(i.label){case 0:return[4,function(t){return Dl(t).then(function(t){return t.Dh})}(t)];case 1:return n=i.sent(),new Al(t.fs,n,e,r).run(),[2]}})})}),r.promise}(zl(t),function(n){return e(new Ep(t,n))})}(this._,function(n){return t(new Sp(e,n))})},e.prototype.batch=function(){var t=this;return zl(this._),new Np(new Op(this._,function(e){return wp(t._,e)}))},e.prototype.loadBundle=function(t){throw new Hr(Br.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new Hr(Br.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(Jr),Ap=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Sr.c)(e,t),e.prototype.Uf=function(t){return new Yr(new Kr(t))},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return xp.Ad(e,this.firestore,null)},e}(Kl),Sp=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r.Hf=new Ap(e),r}return Object(Sr.c)(e,t),e.prototype.get=function(t){var e=this,n=qp(t);return this._.get(n).then(function(t){return new Pp(e.zf,new lp(e.zf._,e.Hf,t.S_,t.Jf,t.metadata,n.v_))})},e.prototype.set=function(t,e,n){var r=qp(t);return n?(Rf("Transaction.set",n),this._.set(r,e,n)):this._.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var u=qp(t);return 2===arguments.length?this._.update(u,e):(r=this._).update.apply(r,Object(Sr.g)([u,e,n],i)),this},e.prototype.delete=function(t){var e=qp(t);return this._.delete(e),this},e}(Jr),Np=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Sr.c)(e,t),e.prototype.set=function(t,e,n){var r=qp(t);return n?(Rf("WriteBatch.set",n),this._.set(r,e,n)):this._.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var u=qp(t);return 2===arguments.length?this._.update(u,e):(r=this._).update.apply(r,Object(Sr.g)([u,e,n],i)),this},e.prototype.delete=function(t){var e=qp(t);return this._.delete(e),this},e.prototype.commit=function(){return this._.commit()},e}(Jr),xp=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Hf=new Ap(e),r}return Object(Sr.c)(e,t),e.Rd=function(t,n,r){if(t.length%2!=0)throw new Hr(Br.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.ot()+" has "+t.length);return new e(n,new Kf(n._,r,new li(t)))},e.Ad=function(t,n,r){return new e(n,new Kf(n._,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Mp(this.firestore,this._.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Mp(this.firestore,Xf(this._,t))}catch(t){throw kp(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof Jr&&(t=t._),t instanceof Kf&&Qf(this._,t)},e.prototype.set=function(t,e){e=Rf("DocumentReference.set",e);try{return function(t,e,n){t=Ff(t,Kf);var r=Ff(t.firestore,Fl),i=cp(t.v_,e,n);return wp(r,[sl(ul(r),"setDoc",t.S_,i,null!==t.v_,n).O_(t.S_,Xo.jt())])}(this._,t,e)}catch(t){throw kp(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?bp(this._,t):bp.apply(void 0,Object(Sr.g)([this._,t,e],n))}catch(t){throw kp(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return wp(Ff((t=this._).firestore,Fl),[new fu(t.S_,Xo.jt())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Dp(e),i=Cp(e,function(e){return new Pp(t.firestore,new lp(t.firestore._,t.Hf,e.S_,e.Jf,e.metadata,t._.v_))});return mp(this._,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Ff(t,Kf);var e=Ff(t.firestore,Fl),n=zl(e),r=new gp(e);return function(t,e){var n=this,r=new _s;return t.fs.ys(function(){return Object(Sr.b)(n,void 0,void 0,function(){var n;return Object(Sr.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Sr.b)(this,void 0,void 0,function(){var r,i;return Object(Sr.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Vr(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Ic.Jo(t,e)})}(t,e)];case 1:return(i=o.sent())instanceof Bi?n.resolve(i):i instanceof Hi?n.resolve(null):n.reject(new Hr(Br.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Ls(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,Pl(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t.S_).then(function(n){return new lp(e,r,t.S_,n,new fp(n instanceof Bi&&n.bt,!0),t.v_)})}(this._):"server"===(null==t?void 0:t.source)?function(t){t=Ff(t,Kf);var e=Ff(t.firestore,Fl);return Ul(zl(e),t.S_,{source:"server"}).then(function(n){return Ip(e,t,n)})}(this._):function(t){t=Ff(t,Kf);var e=Ff(t.firestore,Fl);return Ul(zl(e),t.S_).then(function(n){return Ip(e,t,n)})}(this._)).then(function(t){return new Pp(e.firestore,new lp(e.firestore._,e.Hf,t.S_,t.Jf,t.metadata,e._.v_))})},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(t))},e}(Jr);function kp(t,e,n){return t.message=t.message.replace(e,n),t}function Dp(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!ap(r))return r}return{}}function Cp(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=ap(t[0])?t[0]:ap(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Pp=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return Object(Sr.c)(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new xp(this.zf,this._.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this._.data(t)},e.prototype.get=function(t,e){return this._.get(t,e)},e.prototype.isEqual=function(t){return yp(this._,t._)},e}(Jr),Lp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Sr.c)(e,t),e.prototype.data=function(t){return this._.data(t)},e}(Pp),Rp=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Hf=new Ap(e),r}return Object(Sr.c)(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,$l(this._,function(t,e,n){var r=e,i=Xl("where",t);return new Zl(i,r,n)}(t,n,r)))}catch(t){throw kp(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,$l(this._,function(t,e){void 0===e&&(e="asc");var n=e,r=Xl("orderBy",t);return new tp(r,n)}(t,n)))}catch(t){throw kp(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,$l(this._,function(t){return zf("limit",t),new ep("limit",t,"F")}(t)))}catch(t){throw kp(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,$l(this._,function(t){return zf("limitToLast",t),new ep("limitToLast",t,"L")}(t)))}catch(t){throw kp(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,$l(this._,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new np("startAt",t,!0)}).apply(void 0,t)))}catch(t){throw kp(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,$l(this._,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new np("startAfter",t,!1)}).apply(void 0,t)))}catch(t){throw kp(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,$l(this._,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new rp("endBefore",t,!0)}).apply(void 0,t)))}catch(t){throw kp(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,$l(this._,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new rp("endAt",t,!1)}).apply(void 0,t)))}catch(t){throw kp(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return $f(this._,t._)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Ff(t,Jf);var e=Ff(t.firestore,Fl),n=zl(e),r=new gp(e);return function(t,e){var n=this,r=new _s;return t.fs.ys(function(){return Object(Sr.b)(n,void 0,void 0,function(){var n;return Object(Sr.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Sr.b)(this,void 0,void 0,function(){var r,i,o,u,s;return Object(Sr.d)(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,Oc(t,e,!0)];case 1:return s=a.sent(),r=new Kh(e,s.Pc),i=r.dl(s.documents),o=r.Ei(i,!1),n.resolve(o.snapshot),[3,3];case 2:return u=a.sent(),s=Ls(u,"Failed to execute query '"+e+" against cache"),n.reject(s),[3,3];case 3:return[2]}})})},[4,Pl(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t.C_).then(function(n){return new dp(e,r,t,n)})}(this._):"server"===(null==t?void 0:t.source)?function(t){t=Ff(t,Jf);var e=Ff(t.firestore,Fl),n=zl(e),r=new gp(e);return Ml(n,t.C_,{source:"server"}).then(function(n){return new dp(e,r,t,n)})}(this._):function(t){t=Ff(t,Jf);var e=Ff(t.firestore,Fl),n=zl(e),r=new gp(e);return Yl(t.C_),Ml(n,t.C_).then(function(n){return new dp(e,r,t,n)})}(this._)).then(function(t){return new Up(e.firestore,new dp(e.firestore._,e.Hf,e._,t.ud))})},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Dp(e),i=Cp(e,function(e){return new Up(t.firestore,new dp(t.firestore._,t.Hf,t._,e.ud))});return mp(this._,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(t))},e}(Jr),Vp=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return Object(Sr.c)(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new Lp(this.zf,this._.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._.newIndex},enumerable:!1,configurable:!0}),e}(Jr),Up=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return Object(Sr.c)(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new Rp(this.zf,this._.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this._.docs.map(function(e){return new Lp(t.zf,e)})},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this._.docChanges(t).map(function(t){return new Vp(e.zf,t)})},e.prototype.forEach=function(t,e){var n=this;this._.forEach(function(r){t.call(e,new Lp(n.zf,r))})},e.prototype.isEqual=function(t){return yp(this._,t._)},e}(Jr),Mp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._=n,r}return Object(Sr.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._.parent;return t?new xp(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new xp(this.firestore,void 0===t?Yf(this._):Yf(this._,t))}catch(t){throw kp(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Ff(t.firestore,Fl),r=Yf(t),i=cp(t.v_,e);return wp(n,[sl(ul(t.firestore),"addDoc",r.S_,i,null!==t.v_,{}).O_(r.S_,Xo.exists(!1))]).then(function(){return r})}(this._,t).then(function(t){return new xp(e.firestore,t)})},e.prototype.isEqual=function(t){return Qf(this._,t._)},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(t))},e}(Rp);function qp(t){return t instanceof Jr&&(t=t._),Ff(t,Kf)}var Fp=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(Cf.bind.apply(Cf,Object(Sr.g)([void 0],e))))||this}return Object(Sr.c)(e,t),e.documentId=function(){return new e(fi.lt().ot())},e.prototype.isEqual=function(t){return t instanceof Jr&&(t=t._),t instanceof Cf&&this._.d_.isEqual(t.d_)},e}(Jr),zp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Sr.c)(e,t),e.serverTimestamp=function(){var t=new hl("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new al("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new fl("arrayUnion",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ll("arrayRemove",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new pl("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this._.isEqual(t._)},e}(Jr);!function(){function t(){this.Pd={},this.yd=new _s,this.gd={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this.Pd={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this.yd.promise.catch(t)},t.prototype.then=function(t,e){return this.yd.promise.then(t,e)},t.prototype.Ul=function(t){this.Ql(t),this.Pd.complete&&this.Pd.complete(),this.yd.resolve(t)},t.prototype.jl=function(t){this.gd.taskState="Error",this.Pd.next&&this.Pd.next(this.gd),this.Pd.error&&this.Pd.error(t),this.yd.reject(t)},t.prototype.Ql=function(t){this.gd=t,this.Pd.next&&this.Pd.next(t)}}();var Gp,Bp=u("/6Yf"),Hp={Firestore:jp,GeoPoint:Zf,Timestamp:ui,Blob:Yr,Transaction:Sp,WriteBatch:Np,DocumentReference:xp,DocumentSnapshot:Pp,Query:Rp,QueryDocumentSnapshot:Lp,QuerySnapshot:Up,CollectionReference:Mp,FieldPath:Fp,FieldValue:zp,setLogLevel:function(t){Nr.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new Bp.a("firestore",function(t){return function(t,e){return new jp(t,new Fl(t,e),new Tp)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},Hp)))})(Gp=_.a),Gp.registerVersion("@firebase/firestore","2.1.2");var Kp=u("XNiG"),Jp=u("VRyK"),Wp=u("eIep"),Xp=u("UXun"),Yp=u("SxV6");function Qp(t,e){return e?Object(Wp.a)(function(){return t},e):Object(Wp.a)(function(){return t})}var $p,Zp=u("tf+s"),td=new a.InjectionToken("angularfire2.auth.use-emulator"),ed=new a.InjectionToken("angularfire2.auth.settings"),nd=new a.InjectionToken("angularfire2.auth.tenant-id"),rd=new a.InjectionToken("angularfire2.auth.langugage-code"),id=new a.InjectionToken("angularfire2.auth.use-device-language"),od=new a.InjectionToken("angularfire.auth.persistence"),ud=(($p=function t(e,n,r,i,o,a,c,p,d,y){s(this,t);var g=new w.d(i),O=Object(w.h)(g),_=new Kp.a,E=Object(l.a)(void 0).pipe(Object(m.b)(g.outsideAngular),Object(Wp.a)(function(){return i.runOutsideAngular(function(){return u.e(8).then(u.bind(null,"6nsN"))})}),Object(v.a)(function(){return Object(w.g)(e,i,n)}),Object(v.a)(function(t){return i.runOutsideAngular(function(){var e=o,n=a;return Object(w.f)(t.name+".auth","AngularFireAuth",t,function(){var r=i.runOutsideAngular(function(){return t.auth()});return e&&r.useEmulator("http://"+e.join(":")),c&&(r.tenantId=c),r.languageCode=p,d&&r.useDeviceLanguage(),n&&(r.settings=n),y&&r.setPersistence(y),r},[e,c,p,d,n,y])})}),Object(Xp.a)({bufferSize:1,refCount:!1}));if(Object(I.B)(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(l.a)(null);else{E.pipe(Object(Yp.a)()).subscribe();var T=E.pipe(Object(Wp.a)(function(t){return t.getRedirectResult().then(function(t){return t},function(){return null})}),O,Object(Xp.a)({bufferSize:1,refCount:!1})),j=function(t){return new h.a(function(e){return{unsubscribe:i.runOutsideAngular(function(){return t(e)})}})},A=E.pipe(Object(Wp.a)(function(t){return j(t.onAuthStateChanged.bind(t))})),S=E.pipe(Object(Wp.a)(function(t){return j(t.onIdTokenChanged.bind(t))}));this.authState=T.pipe(Qp(A),Object(Zp.a)(g.outsideAngular),Object(m.b)(g.insideAngular)),this.user=T.pipe(Qp(S),Object(Zp.a)(g.outsideAngular),Object(m.b)(g.insideAngular)),this.idToken=this.user.pipe(Object(Wp.a)(function(t){return t?Object(f.a)(t.getIdToken()):Object(l.a)(null)})),this.idTokenResult=this.user.pipe(Object(Wp.a)(function(t){return t?Object(f.a)(t.getIdTokenResult()):Object(l.a)(null)})),this.credential=Object(Jp.a)(T,_,this.authState.pipe(Object(b.a)(function(t){return!t}))).pipe(Object(v.a)(function(t){return(null==t?void 0:t.user)?t:null}),Object(Zp.a)(g.outsideAngular),Object(m.b)(g.insideAngular))}return Object(w.i)(this,E,i,{spy:{apply:function(t,e,n){(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(function(t){return _.next(t)})}}})}).\u0275fac=function(t){return new(t||$p)(a["\u0275\u0275inject"](w.c),a["\u0275\u0275inject"](w.b,8),a["\u0275\u0275inject"](a.PLATFORM_ID),a["\u0275\u0275inject"](a.NgZone),a["\u0275\u0275inject"](td,8),a["\u0275\u0275inject"](ed,8),a["\u0275\u0275inject"](nd,8),a["\u0275\u0275inject"](rd,8),a["\u0275\u0275inject"](id,8),a["\u0275\u0275inject"](od,8))},$p.\u0275prov=Object(a["\u0275\u0275defineInjectable"])({factory:function(){return new $p(Object(a["\u0275\u0275inject"])(w.c),Object(a["\u0275\u0275inject"])(w.b,8),Object(a["\u0275\u0275inject"])(a.PLATFORM_ID),Object(a["\u0275\u0275inject"])(a.NgZone),Object(a["\u0275\u0275inject"])(td,8),Object(a["\u0275\u0275inject"])(ed,8),Object(a["\u0275\u0275inject"])(nd,8),Object(a["\u0275\u0275inject"])(rd,8),Object(a["\u0275\u0275inject"])(id,8),Object(a["\u0275\u0275inject"])(od,8))},token:$p,providedIn:"any"}),$p);function sd(t,e){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.b;return new h.a(function(n){var r;return null!=e?e.schedule(function(){r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),function(){null!=r&&r()}})}(t,e)}function ad(t,e){return sd(t,e).pipe(Object(v.a)(function(t){return{payload:t,type:"query"}}))}function cd(t,e){return ad(t,e).pipe(Object(p.a)(void 0),Object(d.a)(),Object(v.a)(function(t){var e=i(t,2),n=e[0],r=e[1],o=r.payload.docChanges(),u=o.map(function(t){return{type:t.type,payload:t}});return n&&JSON.stringify(n.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach(function(t,e){var r=o.find(function(e){return e.doc.ref.isEqual(t.ref)}),i=null==n?void 0:n.payload.docs.find(function(e){return e.ref.isEqual(t.ref)});r&&JSON.stringify(r.doc.metadata)===JSON.stringify(t.metadata)||!r&&i&&JSON.stringify(i.metadata)===JSON.stringify(t.metadata)||u.push({type:"modified",payload:{oldIndex:e,newIndex:e,type:"modified",doc:t}})}),u}))}function hd(t,e,n){return cd(t,n).pipe(Object(y.a)(function(t,n){return function(t,e,n){return e.forEach(function(e){n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return fd(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){var n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return fd(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return fd(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(function(t){return t.payload}),e)},[]),Object(g.a)(),Object(v.a)(function(t){return t.map(function(t){return{type:t.type,payload:t}})}))}function fd(t,e,n){for(var r=t.slice(),i=arguments.length,o=new Array(i>3?i-3:0),u=3;u<i;u++)o[u-3]=arguments[u];return r.splice.apply(r,[e,n].concat(o)),r}function ld(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}Object(w.e)(ud,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);var pd=function(){function n(t,e,r){s(this,n),this.ref=t,this.query=e,this.afs=r}return r(n,[{key:"stateChanges",value:function(t){var e=cd(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(v.a)(function(e){return e.filter(function(e){return t.indexOf(e.type)>-1})}))),e.pipe(Object(p.a)(void 0),Object(d.a)(),Object(b.a)(function(t){var e=i(t,2),n=e[0];return e[1].length>0||!n}),Object(v.a)(function(t){var e=i(t,2);e[0];return e[1]}),this.afs.keepUnstableUntilFirst)}},{key:"auditTrail",value:function(t){return this.stateChanges(t).pipe(Object(y.a)(function(t,n){return[].concat(e(t),e(n))},[]))}},{key:"snapshotChanges",value:function(t){var e=ld(t);return hd(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}},{key:"valueChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ad(this.query,this.afs.schedulers.outsideAngular).pipe(Object(v.a)(function(n){return n.payload.docs.map(function(n){return e.idField?Object.assign(Object.assign({},n.data()),t({},e.idField,n.id)):n.data()})}),this.afs.keepUnstableUntilFirst)}},{key:"get",value:function(t){return Object(f.a)(this.query.get(t)).pipe(Object(m.b)(this.afs.schedulers.insideAngular))}},{key:"add",value:function(t){return this.ref.add(t)}},{key:"doc",value:function(t){return new dd(this.ref.doc(t),this.afs)}}]),n}(),dd=function(){function e(t,n){s(this,e),this.ref=t,this.afs=n}return r(e,[{key:"set",value:function(t,e){return this.ref.set(t,e)}},{key:"update",value:function(t){return this.ref.update(t)}},{key:"delete",value:function(){return this.ref.delete()}},{key:"collection",value:function(t,e){var n=wd(this.ref.collection(t),e),r=n.ref,i=n.query;return new pd(r,i,this.afs)}},{key:"snapshotChanges",value:function(){return sd(this.ref,this.afs.schedulers.outsideAngular).pipe(Object(p.a)(void 0),Object(d.a)(),Object(v.a)(function(t){var e=i(t,2),n=e[0],r=e[1];return r.exists?(null==n?void 0:n.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}})).pipe(this.afs.keepUnstableUntilFirst)}},{key:"valueChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.snapshotChanges().pipe(Object(v.a)(function(n){var r=n.payload;return e.idField?Object.assign(Object.assign({},r.data()),t({},e.idField,r.id)):r.data()}))}},{key:"get",value:function(t){return Object(f.a)(this.ref.get(t)).pipe(Object(m.b)(this.afs.schedulers.insideAngular))}}]),e}(),vd=function(){function n(t,e){s(this,n),this.query=t,this.afs=e}return r(n,[{key:"stateChanges",value:function(t){return t&&0!==t.length?cd(this.query,this.afs.schedulers.outsideAngular).pipe(Object(v.a)(function(e){return e.filter(function(e){return t.indexOf(e.type)>-1})}),Object(b.a)(function(t){return t.length>0}),this.afs.keepUnstableUntilFirst):cd(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}},{key:"auditTrail",value:function(t){return this.stateChanges(t).pipe(Object(y.a)(function(t,n){return[].concat(e(t),e(n))},[]))}},{key:"snapshotChanges",value:function(t){var e=ld(t);return hd(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}},{key:"valueChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ad(this.query,this.afs.schedulers.outsideAngular).pipe(Object(v.a)(function(n){return n.payload.docs.map(function(n){return e.idField?Object.assign(t({},e.idField,n.id),n.data()):n.data()})}),this.afs.keepUnstableUntilFirst)}},{key:"get",value:function(t){return Object(f.a)(this.query.get(t)).pipe(Object(m.b)(this.afs.schedulers.insideAngular))}}]),n}(),yd=new a.InjectionToken("angularfire2.enableFirestorePersistence"),gd=new a.InjectionToken("angularfire2.firestore.persistenceSettings"),bd=new a.InjectionToken("angularfire2.firestore.settings"),md=new a.InjectionToken("angularfire2.firestore.use-emulator");function wd(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t};return{query:e(t),ref:t}}var Id,Od=((Id=function(){function t(n,r,o,u,a,c,h,p,d){s(this,t),this.schedulers=new w.d(c),this.keepUnstableUntilFirst=Object(w.h)(this.schedulers);var v=Object(w.g)(n,c,r);!O.a.auth&&d&&Object(w.j)();var y=p,g=i(Object(w.f)(v.name+".firestore","AngularFirestore",v,function(){var t=c.runOutsideAngular(function(){return v.firestore()});return u&&t.settings(u),y&&t.useEmulator.apply(t,e(y)),o&&!Object(I.B)(a)?[t,c.runOutsideAngular(function(){try{return Object(f.a)(t.enablePersistence(h||void 0).then(function(){return!0},function(){return!1}))}catch(Gp){return"undefined"!=typeof console&&console.warn(Gp),Object(l.a)(!1)}})]:[t,Object(l.a)(!1)]},[u,y,o]),2);this.firestore=g[0],this.persistenceEnabled$=g[1]}return r(t,[{key:"collection",value:function(t,e){var n=wd("string"==typeof t?this.firestore.collection(t):t,e),r=n.ref,i=n.query,o=this.schedulers.ngZone.run(function(){return r});return new pd(o,i,this)}},{key:"collectionGroup",value:function(t,e){var n=e||function(t){return t},r=this.firestore.collectionGroup(t);return new vd(n(r),this)}},{key:"doc",value:function(t){var e;e="string"==typeof t?this.firestore.doc(t):t;var n=this.schedulers.ngZone.run(function(){return e});return new dd(n,this)}},{key:"createId",value:function(){return this.firestore.collection("_").doc().id}}]),t}()).\u0275fac=function(t){return new(t||Id)(a["\u0275\u0275inject"](w.c),a["\u0275\u0275inject"](w.b,8),a["\u0275\u0275inject"](yd,8),a["\u0275\u0275inject"](bd,8),a["\u0275\u0275inject"](a.PLATFORM_ID),a["\u0275\u0275inject"](a.NgZone),a["\u0275\u0275inject"](gd,8),a["\u0275\u0275inject"](md,8),a["\u0275\u0275inject"](td,8))},Id.\u0275prov=Object(a["\u0275\u0275defineInjectable"])({factory:function(){return new Id(Object(a["\u0275\u0275inject"])(w.c),Object(a["\u0275\u0275inject"])(w.b,8),Object(a["\u0275\u0275inject"])(yd,8),Object(a["\u0275\u0275inject"])(bd,8),Object(a["\u0275\u0275inject"])(a.PLATFORM_ID),Object(a["\u0275\u0275inject"])(a.NgZone),Object(a["\u0275\u0275inject"])(gd,8),Object(a["\u0275\u0275inject"])(md,8),Object(a["\u0275\u0275inject"])(td,8))},token:Id,providedIn:"any"}),Id)},"w+5F":function(t,e,n){"use strict";n.d(e,"a",function(){return u});var i=n("fXoL"),o=n("aceb"),u=function(){var t=function(){function t(e){s(this,t),this.menuService=e}return r(t,[{key:"goToHome",value:function(){this.menuService.navigateHome()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](o.L))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-not-found"]],decls:11,vars:0,consts:[[1,"row"],[1,"col-md-12"],[1,"flex-centered","col-xl-4","col-lg-6","col-md-8","col-sm-12"],[1,"title"],[1,"sub-title"],["nbButton","","fullWidth","","type","button",1,"home-button",3,"click"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275elementStart"](2,"nb-card"),i["\u0275\u0275elementStart"](3,"nb-card-body"),i["\u0275\u0275elementStart"](4,"div",2),i["\u0275\u0275elementStart"](5,"h2",3),i["\u0275\u0275text"](6,"404 Page Not Found"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"small",4),i["\u0275\u0275text"](8,"The page you were looking for doesn't exist"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"button",5),i["\u0275\u0275listener"]("click",function(){return e.goToHome()}),i["\u0275\u0275text"](10," Take me home "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]())},directives:[o.m,o.l,o.j],styles:[".flex-centered[_ngcontent-%COMP%]{margin:auto}nb-card-body[_ngcontent-%COMP%]{display:flex}.sub-title[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{text-align:center}.sub-title[_ngcontent-%COMP%]{display:block;margin-bottom:3rem}.home-button[_ngcontent-%COMP%]{margin-bottom:2rem}"]}),t}()}}])}();